{"version":3,"sources":["src/Sprite/SpriteShape.js"],"names":[],"mappings":"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","file":"src/Sprite/SpriteShape.js","sourcesContent":["/*\n\n2D Game Sprite Library, Built using JavaScript ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n\n/**\n * @fileoverview Create a shape\n * @author mail@qhduan.com (QH Duan)\n */\n\n(function () {\n \"use strict\";\n\n  let internal = Sprite.Namespace();\n\n  /**\n   * Class Sprite.Shape\n   * @class\n   * @extends Sprite.Display\n   */\n  Sprite.register(\"Shape\", class SpriteShape extends Sprite.Display {\n    /**\n     * construct Sprite.Shape\n     * @constructor\n     */\n    constructor () {\n      super();\n      internal(this).children = [];\n      internal(this).width = 0;\n      internal(this).height = 0;\n      internal(this).image = null;\n    }\n\n    clone () {\n      let shape = new Sprite.Shape();\n      internal(shape).children = internal(this).children.slice();\n      internal(shape).image = internal(this).image;\n      internal(shape).width = internal(this).width;\n      internal(shape).height = internal(this).height;\n      shape.x = this.x;\n      shape.y = this.y;\n      shape.centerX = this.centerX;\n      shape.centerY = this.centerY;\n      return shape;\n    }\n\n    get width () {\n      return internal(this).width;\n    }\n\n    set width (value) {\n      internal(this).width = value;\n      this.generate();\n    }\n\n    get height () {\n      return internal(this).height;\n    }\n\n    set height (value) {\n      internal(this).height = value;\n      this.generate();\n    }\n\n    clear () {\n      internal(this).children = [];\n      internal(this).width = 0;\n      internal(this).height = 0;\n      this.generate();\n      return this;\n    }\n\n    makeConfig (defaultConfig, userConfig) {\n      if (userConfig) {\n        for (let key in userConfig) {\n          defaultConfig[key] = userConfig[key];\n        }\n      }\n      let ret = [];\n      for (let key in defaultConfig) {\n        ret.push(`${key}=\"${defaultConfig[key]}\"`);\n      }\n      return ret.join(\" \");\n    }\n\n    rect (userConfig) {\n      let config = {\n        \"x\": 0,\n        \"y\": 0,\n        \"width\": 10,\n        \"height\": 10,\n        \"stroke\": \"black\",\n        \"stroke-width\": 1,\n        \"fill\": \"white\",\n        \"fill-opacity\": 1,\n        \"stroke-opacity\": 1,\n        \"opacity\": 1,\n      };\n\n      internal(this).children.push(`<rect ${this.makeConfig(config, userConfig)} />`);\n\n      if (config.x + config.width > internal(this).width) {\n        internal(this).width = config.x + config.width;\n      }\n      if (config.y + config.height > internal(this).height) {\n        internal(this).height = config.y + config.height;\n      }\n      this.generate();\n    }\n\n    circle (userConfig) {\n      let config = {\n        \"cx\": 10,\n        \"cy\": 10,\n        \"r\": 10,\n        \"stroke\": \"black\",\n        \"stroke-width\": 1,\n        \"fill\": \"white\",\n        \"fill-opacity\": 1,\n        \"stroke-opacity\": 1,\n        \"opacity\": 1,\n      };\n\n      internal(this).children.push(`<circle ${this.makeConfig(config, userConfig)} />`);\n\n      if (config.cx + config.r > internal(this).width) {\n        internal(this).width = config.cx + config.r;\n      }\n      if (config.cy + config.r > internal(this).height) {\n        internal(this).height = config.cy + config.r;\n      }\n      this.generate();\n    }\n\n    ellipse (userConfig) {\n      let config = {\n        \"cx\": 10,\n        \"cy\": 10,\n        \"rx\": 5,\n        \"ry\": 10,\n        \"stroke\": \"black\",\n        \"stroke-width\": 1,\n        \"fill\": \"white\",\n        \"fill-opacity\": 1,\n        \"stroke-opacity\": 1,\n        \"opacity\": 1,\n      };\n\n      internal(this).children.push(`<ellipse ${this.makeConfig(config, userConfig)} />`);\n\n      if (config.cx + config.rx > internal(this).width) {\n        internal(this).width = config.cx + config.rx;\n      }\n      if (config.cy + config.ry > internal(this).height) {\n        internal(this).height = config.cy + config.ry;\n      }\n      this.generate();\n    }\n\n    line (userConfig) {\n      let config = {\n        \"x1\": 10,\n        \"y1\": 10,\n        \"x2\": 20,\n        \"y2\": 20,\n        \"stroke\": \"black\",\n        \"stroke-width\": 1,\n        \"stroke-opacity\": 1,\n        \"opacity\": 1,\n      };\n\n      internal(this).children.push(`<line ${this.makeConfig(config, userConfig)} />`);\n\n      if (Math.max(config.x1, config.x2) > internal(this).width) {\n        internal(this).width = Math.max(config.x1, config.x2);\n      }\n      if (Math.max(config.y1, config.y2) > internal(this).height) {\n        internal(this).height = Math.max(config.y1, config.y2);\n      }\n      this.generate();\n    }\n\n    polyline (userConfig) {\n      let config = {\n        \"points\": \"20, 20, 30, 20, 30, 30, 20, 30\",\n        \"stroke\": \"black\",\n        \"stroke-width\": 1,\n        \"fill\": \"white\",\n        \"fill-opacity\": 1,\n        \"stroke-opacity\": 1,\n        \"opacity\": 1,\n      };\n\n      this._children.push(`<polyline ${this.makeConfig(config, userConfig)} />`);\n\n      let max = -1;\n      config.points.split(/, /).forEach((element) => {\n        let number = parseInt(element);\n        if (!isNaN(number) && number > max) {\n          max = number;\n        }\n      });\n\n      if (max != -1 && max > internal(this).width) {\n        internal(this).width = max;\n      }\n      if (max != -1 && max > internal(this).height) {\n        internal(this).height = max;\n      }\n      this.generate();\n    }\n\n    polygon (userConfig) {\n      let config = {\n        \"points\": \"20,20 30,20 30,30 20,30\",\n        \"stroke\": \"black\",\n        \"stroke-width\": 1,\n        \"fill\": \"white\",\n        \"fill-opacity\": 1,\n        \"stroke-opacity\": 1,\n        \"opacity\": 1,\n      };\n\n      internal(this).children.push(`<polyline ${this.makeConfig(config, userConfig)} />`);\n\n      let width = -1;\n      let height = -1;\n      // split points by comma or space\n      config.points.split(/,| /).forEach((element, index) => {\n        let number = parseInt(element);\n        if (index % 2 == 0) { // even\n          if (number > width)\n            width = number;\n        } else { // odds\n          if (number > height)\n            height = number;\n        }\n      });\n\n      if (width > 0 && width > internal(this).width)\n        internal(this).width = width;\n      if (height > 0 && height > internal(this).height)\n        internal(this).height = height;\n      this.generate();\n    }\n\n    generate () {\n      let svg = `<?xml version=\"1.0\"?>\\n<svg width=\"${this._width}\" height=\"${this._height}\" ` +\n        `style=\"width: ${this._width}px; height: ${this._height}px;\" ` +\n        `xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\\n`;\n\n      for (let child of internal(this).children) {\n        svg += `  ${child}\\n`;\n      }\n\n      svg += \"</svg>\";\n\n      let blob = new Blob([svg], {type: \"image/svg+xml;charset=utf-8\"});\n      let url = window.URL.createObjectURL(blob);\n      let image = new Image();\n      image.src = url;\n\n      let Done = () => {\n        internal(this).image = image;\n        internal(this).width = image.width;\n        internal(this).height = image.height;\n        // window.URL.revokeObjectURL(url);\n        this.emit(\"change\");\n      };\n\n      if (image.complete) {\n        Done();\n      } else {\n        image.onload = Done;\n      }\n\n    }\n\n    draw (renderer) {\n      let image = internal(this).image;\n      if (image instanceof Image && image.width > 0 && image.height > 0) {\n        this.drawImage(renderer, image,\n          0, 0, image.width, image.height,\n          0, 0, image.width, image.height\n        );\n      }\n    }\n  });\n\n\n})();\n"]}