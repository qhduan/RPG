{"version":3,"sources":["public/src/dialogue.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAmBA,CAAC,YAAY;AACX,cAAY,CAAC;;AAEb,MAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;;;;;;;;;;;;;;;;;;AAmBnB,MAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,EAAE,CAAC;;AAE/B,MAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,YAAY;;AAE/B,QAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAG;AAC1B,UAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,EAAE;AACjC,YAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;AAClC,YAAI,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC;AACtD,gBAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,KAAK,GAAG,EAAE,CAAC;AAChD,YAAI,IAAI,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE;AACtB,cAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;SAC3B;OACF,MAAM;AACL,YAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;AAClC,gBAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC;AAC7C,kBAAU,CAAC,YAAY;AACrB,kBAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAA;SAC7C,EAAE,GAAG,CAAC,CAAC;OACT;AACD,UAAI,CAAC,MAAM,EAAE,CAAC;KACf;GACF,CAAA;;AAED,UAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAU,KAAK,EAAE;AACpD,SAAK,GAAG,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC;AAC9B,QAAI,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;;AAE5B,QAAI,OAAO,IAAI,EAAE,EAAE;;AACjB,UAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;KACtB;GACF,CAAC,CAAC;CAGJ,CAAA,EAAG,CAAC","file":"public/src/dialogue.js","sourcesContent":["/*\n\nA-RPG Game, Built using Node.js + JavaScript + ES6\nCopyright (C) 2015 qhduan(http://qhduan.com)\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n*/\n(function () {\n  \"use strict\";\n\n  Game.dialogue = {};\n\n    /*\n  Game.oninit(function () {\n    var talkBox = Game.dialogue.talkBox = new createjs.DOMElement(\"talkBox\");\n    Game.dialogueLayer.appendChild(talkBox);\n    talkBox.center.x = 300;\n    talkBox.center.y = 20;\n    talkBox.visible = 0;\n\n    Sprite.Ticker.on(\"tick\", function () {\n      if (Game.hero) {\n        talkBox.x = Game.hero.x;\n        talkBox.y = Game.hero.y;\n      }\n    });\n  });\n  */\n\n  Game.dialogue.talkHistory = [];\n\n  Game.dialogue.talk = function () {\n    // 发送聊天信息\n    if (Game.dialogue.talkBox)  {\n      if (Game.dialogue.talkBox.visible) {\n        Game.dialogue.talkBox.visible = 0;\n        var text = document.getElementById(\"talkInput\").value;\n        document.getElementById(\"talkInput\").value = \"\";\n        if (text.trim().length) {\n          Game.io.talk(text.trim());\n        }\n      } else {\n        Game.dialogue.talkBox.visible = 1;\n        document.getElementById(\"talkInput\").focus();\n        setTimeout(function () {\n          document.getElementById(\"talkInput\").focus()\n        }, 100);\n      }\n      Game.update();\n    }\n  }\n\n  document.addEventListener(\"keydown\", function (event) {\n    event = event || window.event;\n    var keyCode = event.keyCode;\n\n    if (keyCode == 13) { // Enter\n      Game.dialogue.talk();\n    }\n  });\n\n\n})();\n"]}