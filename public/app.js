!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}n(2);var i=n(192);r(i)},function(t,e,n){(function(t){"use strict";if(n(3),n(190),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0}).call(e,function(){return this}())},function(t,e,n){n(4),n(37),n(43),n(45),n(47),n(49),n(51),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(67),n(68),n(69),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(79),n(80),n(81),n(83),n(84),n(85),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94),n(95),n(96),n(97),n(98),n(99),n(100),n(105),n(106),n(110),n(111),n(113),n(114),n(119),n(120),n(123),n(125),n(127),n(129),n(130),n(131),n(133),n(134),n(136),n(137),n(138),n(139),n(146),n(149),n(150),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(165),n(166),n(167),n(168),n(169),n(170),n(172),n(173),n(174),n(175),n(177),n(178),n(180),n(181),n(183),n(184),n(185),n(188),n(189),t.exports=n(8)},function(t,e,n){"use strict";var r,i=n(5),o=n(6),a=n(11),u=n(10),l=n(17),s=n(18),c=n(20),d=n(21),f=n(22),h=n(12),p=n(23),v=n(16),y=n(19),w=n(24),g=n(26),m=n(28),b=n(29),x=n(30),k=n(27),A=n(14)("__proto__"),S=n(31),E=n(36)(!1),W=Object.prototype,O=Array.prototype,M=O.slice,C=O.join,_=i.setDesc,P=i.getDesc,T=i.setDescs,j={};a||(r=!h(function(){return 7!=_(s("div"),"a",{get:function(){return 7}}).a}),i.setDesc=function(t,e,n){if(r)try{return _(t,e,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(p(t)[e]=n.value),t},i.getDesc=function(t,e){if(r)try{return P(t,e)}catch(n){}return c(t,e)?u(!W.propertyIsEnumerable.call(t,e),t[e]):void 0},i.setDescs=T=function(t,e){p(t);for(var n,r=i.getKeys(e),o=r.length,a=0;o>a;)i.setDesc(t,n=r[a++],e[n]);return t}),o(o.S+o.F*!a,"Object",{getOwnPropertyDescriptor:i.getDesc,defineProperty:i.setDesc,defineProperties:T});var L="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),I=L.concat("length","prototype"),B=L.length,q=function(){var t,e=s("iframe"),n=B,r=">";for(e.style.display="none",l.appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+r),t.close(),q=t.F;n--;)delete q.prototype[L[n]];return q()},F=function(t,e){return function(n){var r,i=g(n),o=0,a=[];for(r in i)r!=A&&c(i,r)&&a.push(r);for(;e>o;)c(i,r=t[o++])&&(~E(a,r)||a.push(r));return a}},N=function(){};o(o.S,"Object",{getPrototypeOf:i.getProto=i.getProto||function(t){return t=w(t),c(t,A)?t[A]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?W:null},getOwnPropertyNames:i.getNames=i.getNames||F(I,I.length,!0),create:i.create=i.create||function(t,e){var n;return null!==t?(N.prototype=p(t),n=new N,N.prototype=null,n[A]=t):n=q(),void 0===e?n:T(n,e)},keys:i.getKeys=i.getKeys||F(L,B,!1)});var U=function(t,e,n){if(!(e in j)){for(var r=[],i=0;e>i;i++)r[i]="a["+i+"]";j[e]=Function("F,a","return new F("+r.join(",")+")")}return j[e](t,n)};o(o.P,"Function",{bind:function(t){var e=v(this),n=M.call(arguments,1),r=function(){var i=n.concat(M.call(arguments));return this instanceof r?U(e,i.length,i):f(e,i,t)};return y(e.prototype)&&(r.prototype=e.prototype),r}}),o(o.P+o.F*h(function(){l&&M.call(l)}),"Array",{slice:function(t,e){var n=x(this.length),r=d(this);if(e=void 0===e?n:e,"Array"==r)return M.call(this,t,e);for(var i=b(t,n),o=b(e,n),a=x(o-i),u=Array(a),l=0;a>l;l++)u[l]="String"==r?this.charAt(i+l):this[i+l];return u}}),o(o.P+o.F*(k!=Object),"Array",{join:function(t){return C.call(k(this),void 0===t?",":t)}}),o(o.S,"Array",{isArray:n(33)});var R=function(t){return function(e,n){v(e);var r=k(this),i=x(r.length),o=t?i-1:0,a=t?-1:1;if(arguments.length<2)for(;;){if(o in r){n=r[o],o+=a;break}if(o+=a,t?0>o:o>=i)throw TypeError("Reduce of empty array with no initial value")}for(;t?o>=0:i>o;o+=a)o in r&&(n=e(n,r[o],o,this));return n}},D=function(t){return function(e){return t(this,e,arguments[1])}};o(o.P,"Array",{forEach:i.each=i.each||D(S(0)),map:D(S(1)),filter:D(S(2)),some:D(S(3)),every:D(S(4)),reduce:R(!1),reduceRight:R(!0),indexOf:D(E),lastIndexOf:function(t,e){var n=g(this),r=x(n.length),i=r-1;for(arguments.length>1&&(i=Math.min(i,m(e))),0>i&&(i=x(r+i));i>=0;i--)if(i in n&&n[i]===t)return i;return-1}}),o(o.S,"Date",{now:function(){return+new Date}});var G=function(t){return t>9?t:"0"+t};o(o.P+o.F*(h(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!h(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=0>e?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+G(t.getUTCMonth()+1)+"-"+G(t.getUTCDate())+"T"+G(t.getUTCHours())+":"+G(t.getUTCMinutes())+":"+G(t.getUTCSeconds())+"."+(n>99?n:"0"+G(n))+"Z"}})},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){var r=n(7),i=n(8),o=n(9),a=n(13),u=n(15),l="prototype",s=function(t,e,n){var c,d,f,h,p=t&s.F,v=t&s.G,y=t&s.S,w=t&s.P,g=t&s.B,m=v?r:y?r[e]||(r[e]={}):(r[e]||{})[l],b=v?i:i[e]||(i[e]={}),x=b[l]||(b[l]={});v&&(n=e);for(c in n)d=!p&&m&&c in m,f=(d?m:n)[c],h=g&&d?u(f,r):w&&"function"==typeof f?u(Function.call,f):f,m&&!d&&a(m,c,f),b[c]!=f&&o(b,c,h),w&&x[c]!=f&&(x[c]=f)};r.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(5),i=n(10);t.exports=n(11)?function(t,e,n){return r.setDesc(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){t.exports=!n(12)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(7),i=n(9),o=n(14)("src"),a="toString",u=Function[a],l=(""+u).split(a);n(8).inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,a){"function"==typeof n&&(n.hasOwnProperty(o)||i(n,o,t[e]?""+t[e]:l.join(String(e))),n.hasOwnProperty("name")||i(n,"name",e)),t===r?t[e]=n:(a||delete t[e],i(t,e,n))})(Function.prototype,a,function(){return"function"==typeof this&&this[o]||u.call(this)})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(16);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){t.exports=n(7).document&&document.documentElement},function(t,e,n){var r=n(19),i=n(7).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(19);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(25);t.exports=function(t){return Object(r(t))}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(27),i=n(25);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(21);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(28),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),0>t?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(28),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(15),i=n(27),o=n(24),a=n(30),u=n(32);t.exports=function(t){var e=1==t,n=2==t,l=3==t,s=4==t,c=6==t,d=5==t||c;return function(f,h,p){for(var v,y,w=o(f),g=i(w),m=r(h,p,3),b=a(g.length),x=0,k=e?u(f,b):n?u(f,0):void 0;b>x;x++)if((d||x in g)&&(v=g[x],y=m(v,x,w),t))if(e)k[x]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:k.push(v)}else if(s)return!1;return c?-1:l||s?s:k}}},function(t,e,n){var r=n(19),i=n(33),o=n(34)("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),r(n)&&(n=n[o],null===n&&(n=void 0))),new(void 0===n?Array:n)(e)}},function(t,e,n){var r=n(21);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(35)("wks"),i=n(14),o=n(7).Symbol;t.exports=function(t){return r[t]||(r[t]=o&&o[t]||(o||i)("Symbol."+t))}},function(t,e,n){var r=n(7),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(26),i=n(30),o=n(29);t.exports=function(t){return function(e,n,a){var u,l=r(e),s=i(l.length),c=o(a,s);if(t&&n!=n){for(;s>c;)if(u=l[c++],u!=u)return!0}else for(;s>c;c++)if((t||c in l)&&l[c]===n)return t||c;return!t&&-1}}},function(t,e,n){"use strict";var r=n(5),i=n(7),o=n(20),a=n(11),u=n(6),l=n(13),s=n(12),c=n(35),d=n(38),f=n(14),h=n(34),p=n(39),v=n(40),y=n(41),w=n(33),g=n(23),m=n(26),b=n(10),x=r.getDesc,k=r.setDesc,A=r.create,S=v.get,E=i.Symbol,W=i.JSON,O=W&&W.stringify,M=!1,C=h("_hidden"),_=r.isEnum,P=c("symbol-registry"),T=c("symbols"),j="function"==typeof E,L=Object.prototype,I=a&&s(function(){return 7!=A(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=x(L,e);r&&delete L[e],k(t,e,n),r&&t!==L&&k(L,e,r)}:k,B=function(t){var e=T[t]=A(E.prototype);return e._k=t,a&&M&&I(L,t,{configurable:!0,set:function(e){o(this,C)&&o(this[C],t)&&(this[C][t]=!1),I(this,t,b(1,e))}}),e},q=function(t){return"symbol"==typeof t},F=function(t,e,n){return n&&o(T,e)?(n.enumerable?(o(t,C)&&t[C][e]&&(t[C][e]=!1),n=A(n,{enumerable:b(0,!1)})):(o(t,C)||k(t,C,b(1,{})),t[C][e]=!0),I(t,e,n)):k(t,e,n)},N=function(t,e){g(t);for(var n,r=y(e=m(e)),i=0,o=r.length;o>i;)F(t,n=r[i++],e[n]);return t},U=function(t,e){return void 0===e?A(t):N(A(t),e)},R=function(t){var e=_.call(this,t);return e||!o(this,t)||!o(T,t)||o(this,C)&&this[C][t]?e:!0},D=function(t,e){var n=x(t=m(t),e);return!n||!o(T,e)||o(t,C)&&t[C][e]||(n.enumerable=!0),n},G=function(t){for(var e,n=S(m(t)),r=[],i=0;n.length>i;)o(T,e=n[i++])||e==C||r.push(e);return r},z=function(t){for(var e,n=S(m(t)),r=[],i=0;n.length>i;)o(T,e=n[i++])&&r.push(T[e]);return r},Y=function(t){if(void 0!==t&&!q(t)){for(var e,n,r=[t],i=1,o=arguments;o.length>i;)r.push(o[i++]);return e=r[1],"function"==typeof e&&(n=e),(n||!w(e))&&(e=function(t,e){return n&&(e=n.call(this,t,e)),q(e)?void 0:e}),r[1]=e,O.apply(W,r)}},H=s(function(){var t=E();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))});j||(E=function(){if(q(this))throw TypeError("Symbol is not a constructor");return B(f(arguments.length>0?arguments[0]:void 0))},l(E.prototype,"toString",function(){return this._k}),q=function(t){return t instanceof E},r.create=U,r.isEnum=R,r.getDesc=D,r.setDesc=F,r.setDescs=N,r.getNames=v.get=G,r.getSymbols=z,a&&!n(42)&&l(L,"propertyIsEnumerable",R,!0));var X={"for":function(t){return o(P,t+="")?P[t]:P[t]=E(t)},keyFor:function(t){return p(P,t)},useSetter:function(){M=!0},useSimple:function(){M=!1}};r.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var e=h(t);X[t]=j?e:B(e)}),M=!0,u(u.G+u.W,{Symbol:E}),u(u.S,"Symbol",X),u(u.S+u.F*!j,"Object",{create:U,defineProperty:F,defineProperties:N,getOwnPropertyDescriptor:D,getOwnPropertyNames:G,getOwnPropertySymbols:z}),W&&u(u.S+u.F*(!j||H),"JSON",{stringify:Y}),d(E,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(t,e,n){var r=n(5).setDesc,i=n(20),o=n(34)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(5),i=n(26);t.exports=function(t,e){for(var n,o=i(t),a=r.getKeys(o),u=a.length,l=0;u>l;)if(o[n=a[l++]]===e)return n}},function(t,e,n){var r=n(26),i=n(5).getNames,o={}.toString,a="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.get=function(t){return a&&"[object Window]"==o.call(t)?u(t):i(r(t))}},function(t,e,n){var r=n(5);t.exports=function(t){var e=r.getKeys(t),n=r.getSymbols;if(n)for(var i,o=n(t),a=r.isEnum,u=0;o.length>u;)a.call(t,i=o[u++])&&e.push(i);return e}},function(t,e){t.exports=!1},function(t,e,n){var r=n(6);r(r.S+r.F,"Object",{assign:n(44)})},function(t,e,n){var r=n(5),i=n(24),o=n(27);t.exports=n(12)(function(){var t=Object.assign,e={},n={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach(function(t){n[t]=t}),7!=t({},e)[r]||Object.keys(t({},n)).join("")!=i})?function(t,e){for(var n=i(t),a=arguments,u=a.length,l=1,s=r.getKeys,c=r.getSymbols,d=r.isEnum;u>l;)for(var f,h=o(a[l++]),p=c?s(h).concat(c(h)):s(h),v=p.length,y=0;v>y;)d.call(h,f=p[y++])&&(n[f]=h[f]);return n}:Object.assign},function(t,e,n){var r=n(6);r(r.S,"Object",{is:n(46)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(6);r(r.S,"Object",{setPrototypeOf:n(48).set})},function(t,e,n){var r=n(5).getDesc,i=n(19),o=n(23),a=function(t,e){if(o(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(15)(Function.call,r(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){"use strict";var r=n(50),i={};i[n(34)("toStringTag")]="z",i+""!="[object z]"&&n(13)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(21),i=n(34)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[i])?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(19);n(52)("freeze",function(t){return function(e){return t&&r(e)?t(e):e}})},function(t,e,n){var r=n(6),i=n(8),o=n(12);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(19);n(52)("seal",function(t){return function(e){return t&&r(e)?t(e):e}})},function(t,e,n){var r=n(19);n(52)("preventExtensions",function(t){return function(e){return t&&r(e)?t(e):e}})},function(t,e,n){var r=n(19);n(52)("isFrozen",function(t){return function(e){return r(e)?t?t(e):!1:!0}})},function(t,e,n){var r=n(19);n(52)("isSealed",function(t){return function(e){return r(e)?t?t(e):!1:!0}})},function(t,e,n){var r=n(19);n(52)("isExtensible",function(t){return function(e){return r(e)?t?t(e):!0:!1}})},function(t,e,n){var r=n(26);n(52)("getOwnPropertyDescriptor",function(t){return function(e,n){return t(r(e),n)}})},function(t,e,n){var r=n(24);n(52)("getPrototypeOf",function(t){return function(e){return t(r(e))}})},function(t,e,n){var r=n(24);n(52)("keys",function(t){return function(e){return t(r(e))}})},function(t,e,n){n(52)("getOwnPropertyNames",function(){return n(40).get})},function(t,e,n){var r=n(5).setDesc,i=n(10),o=n(20),a=Function.prototype,u=/^\s*function ([^ (]*)/,l="name";l in a||n(11)&&r(a,l,{configurable:!0,get:function(){var t=(""+this).match(u),e=t?t[1]:"";return o(this,l)||r(this,l,i(5,e)),e}})},function(t,e,n){"use strict";var r=n(5),i=n(19),o=n(34)("hasInstance"),a=Function.prototype;o in a||r.setDesc(a,o,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=r.getProto(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){"use strict";var r=n(5),i=n(7),o=n(20),a=n(21),u=n(65),l=n(12),s=n(66).trim,c="Number",d=i[c],f=d,h=d.prototype,p=a(r.create(h))==c,v="trim"in String.prototype,y=function(t){var e=u(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():s(e,3);var n,r,i,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,l=e.slice(2),c=0,d=l.length;d>c;c++)if(a=l.charCodeAt(c),48>a||a>i)return NaN;return parseInt(l,r)}}return+e};d(" 0o1")&&d("0b1")&&!d("+0x1")||(d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(p?l(function(){h.valueOf.call(n)}):a(n)!=c)?new f(y(e)):y(e)},r.each.call(n(11)?r.getNames(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),function(t){o(f,t)&&!o(d,t)&&r.setDesc(d,t,r.getDesc(f,t))}),d.prototype=h,h.constructor=d,n(13)(i,c,d))},function(t,e,n){var r=n(19);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(6),i=n(25),o=n(12),a="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",u="["+a+"]",l="​",s=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),d=function(t,e){var n={};n[t]=e(f),r(r.P+r.F*o(function(){return!!a[t]()||l[t]()!=l}),"String",n)},f=d.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(s,"")),2&e&&(t=t.replace(c,"")),t};t.exports=d},function(t,e,n){var r=n(6);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(6),i=n(7).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(6);r(r.S,"Number",{isInteger:n(70)})},function(t,e,n){var r=n(19),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e,n){var r=n(6);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(6),i=n(70),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(6);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(6);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(6);r(r.S,"Number",{parseFloat:parseFloat})},function(t,e,n){var r=n(6);r(r.S,"Number",{parseInt:parseInt})},function(t,e,n){var r=n(6),i=n(78),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&1e-8>t?t-t*t/2:Math.log(1+t)}},function(t,e,n){function r(t){return isFinite(t=+t)&&0!=t?0>t?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=n(6);i(i.S,"Math",{asinh:r})},function(t,e,n){var r=n(6);r(r.S,"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(6),i=n(82);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:0>t?-1:1}},function(t,e,n){var r=n(6);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(6),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(6);r(r.S,"Math",{expm1:n(86)})},function(t,e){t.exports=Math.expm1||function(t){return 0==(t=+t)?t:t>-1e-6&&1e-6>t?t+t*t/2:Math.exp(t)-1}},function(t,e,n){var r=n(6),i=n(82),o=Math.pow,a=o(2,-52),u=o(2,-23),l=o(2,127)*(2-u),s=o(2,-126),c=function(t){return t+1/a-1/a};r(r.S,"Math",{fround:function(t){var e,n,r=Math.abs(t),o=i(t);return s>r?o*c(r/s/u)*s*u:(e=(1+u/a)*r,n=e-(e-r),n>l||n!=n?o*(1/0):o*n)}})},function(t,e,n){var r=n(6),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,u=arguments,l=u.length,s=0;l>a;)n=i(u[a++]),n>s?(r=s/n,o=o*r*r+1,s=n):n>0?(r=n/s,o+=r*r):o+=n;return s===1/0?1/0:s*Math.sqrt(o)}})},function(t,e,n){var r=n(6),i=Math.imul;r(r.S+r.F*n(12)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},function(t,e,n){var r=n(6);r(r.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,e,n){var r=n(6);r(r.S,"Math",{log1p:n(78)})},function(t,e,n){var r=n(6);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(6);r(r.S,"Math",{sign:n(82)})},function(t,e,n){var r=n(6),i=n(86),o=Math.exp;r(r.S+r.F*n(12)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(6),i=n(86),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(6);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(6),i=n(29),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments,a=r.length,u=0;a>u;){if(e=+r[u++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(65536>e?o(e):o(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(6),i=n(26),o=n(30);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments,a=r.length,u=[],l=0;n>l;)u.push(String(e[l++])),a>l&&u.push(String(r[l]));return u.join("")}})},function(t,e,n){"use strict";n(66)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(101)(!0);n(102)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(28),i=n(25);t.exports=function(t){return function(e,n){var o,a,u=String(i(e)),l=r(n),s=u.length;return 0>l||l>=s?t?"":void 0:(o=u.charCodeAt(l),55296>o||o>56319||l+1===s||(a=u.charCodeAt(l+1))<56320||a>57343?t?u.charAt(l):o:t?u.slice(l,l+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var r=n(42),i=n(6),o=n(13),a=n(9),u=n(20),l=n(103),s=n(104),c=n(38),d=n(5).getProto,f=n(34)("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",y="values",w=function(){return this};t.exports=function(t,e,n,g,m,b,x){s(n,e,g);var k,A,S=function(t){if(!h&&t in M)return M[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",W=m==y,O=!1,M=t.prototype,C=M[f]||M[p]||m&&M[m],_=C||S(m);if(C){var P=d(_.call(new t));c(P,E,!0),!r&&u(M,p)&&a(P,f,w),W&&C.name!==y&&(O=!0,_=function(){return C.call(this)})}if(r&&!x||!h&&!O&&M[f]||a(M,f,_),l[e]=_,l[E]=w,m)if(k={values:W?_:S(y),keys:b?_:S(v),entries:W?S("entries"):_},x)for(A in k)A in M||o(M,A,k[A]);else i(i.P+i.F*(h||O),e,k);return k}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(5),i=n(10),o=n(38),a={};n(9)(a,n(34)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r.create(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(6),i=n(101)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(6),i=n(30),o=n(107),a="endsWith",u=""[a];r(r.P+r.F*n(109)(a),"String",{endsWith:function(t){var e=o(this,t,a),n=arguments,r=n.length>1?n[1]:void 0,l=i(e.length),s=void 0===r?l:Math.min(i(r),l),c=String(t);return u?u.call(e,c,s):e.slice(s-c.length,s)===c}})},function(t,e,n){var r=n(108),i=n(25);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(19),i=n(21),o=n(34)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(34)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(i){}}return!0}},function(t,e,n){"use strict";var r=n(6),i=n(107),o="includes";r(r.P+r.F*n(109)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(6);r(r.P,"String",{repeat:n(112)})},function(t,e,n){"use strict";var r=n(28),i=n(25);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(0>o||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";var r=n(6),i=n(30),o=n(107),a="startsWith",u=""[a];r(r.P+r.F*n(109)(a),"String",{startsWith:function(t){var e=o(this,t,a),n=arguments,r=i(Math.min(n.length>1?n[1]:void 0,e.length)),l=String(t);return u?u.call(e,l,r):e.slice(r,r+l.length)===l}})},function(t,e,n){"use strict";var r=n(15),i=n(6),o=n(24),a=n(115),u=n(116),l=n(30),s=n(117);i(i.S+i.F*!n(118)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,c,d=o(t),f="function"==typeof this?this:Array,h=arguments,p=h.length,v=p>1?h[1]:void 0,y=void 0!==v,w=0,g=s(d);if(y&&(v=r(v,p>2?h[2]:void 0,2)),void 0==g||f==Array&&u(g))for(e=l(d.length),n=new f(e);e>w;w++)n[w]=y?v(d[w],w):d[w];else for(c=g.call(d),n=new f;!(i=c.next()).done;w++)n[w]=y?a(c,v,[i.value,w],!0):i.value;return n.length=w,n}})},function(t,e,n){var r=n(23);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t["return"];throw void 0!==a&&r(a.call(t)),o}}},function(t,e,n){var r=n(103),i=n(34)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(50),i=n(34)("iterator"),o=n(103);t.exports=n(8).getIteratorMethod=function(t){return void 0!=t?t[i]||t["@@iterator"]||o[r(t)]:void 0}},function(t,e,n){var r=n(34)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){n=!0},o[r]=function(){return a},t(o)}catch(u){}return n}},function(t,e,n){"use strict";var r=n(6);r(r.S+r.F*n(12)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments,n=e.length,r=new("function"==typeof this?this:Array)(n);n>t;)r[t]=e[t++];return r.length=n,r}})},function(t,e,n){"use strict";var r=n(121),i=n(122),o=n(103),a=n(26);t.exports=n(102)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(34)("unscopables"),i=Array.prototype;void 0==i[r]&&n(9)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(124)("Array")},function(t,e,n){"use strict";var r=n(7),i=n(5),o=n(11),a=n(34)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.setDesc(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(6);r(r.P,"Array",{copyWithin:n(126)}),n(121)("copyWithin")},function(t,e,n){"use strict";var r=n(24),i=n(29),o=n(30);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),u=i(t,a),l=i(e,a),s=arguments,c=s.length>2?s[2]:void 0,d=Math.min((void 0===c?a:i(c,a))-l,a-u),f=1;for(u>l&&l+d>u&&(f=-1,l+=d-1,u+=d-1);d-- >0;)l in n?n[u]=n[l]:delete n[u],u+=f,l+=f;return n}},function(t,e,n){var r=n(6);r(r.P,"Array",{fill:n(128)}),n(121)("fill")},function(t,e,n){"use strict";var r=n(24),i=n(29),o=n(30);t.exports=[].fill||function(t){for(var e=r(this),n=o(e.length),a=arguments,u=a.length,l=i(u>1?a[1]:void 0,n),s=u>2?a[2]:void 0,c=void 0===s?n:i(s,n);c>l;)e[l++]=t;return e}},function(t,e,n){"use strict";var r=n(6),i=n(31)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(121)(o)},function(t,e,n){"use strict";var r=n(6),i=n(31)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(121)(o)},function(t,e,n){var r=n(5),i=n(7),o=n(108),a=n(132),u=i.RegExp,l=u,s=u.prototype,c=/a/g,d=/a/g,f=new u(c)!==c;!n(11)||f&&!n(12)(function(){return d[n(34)("match")]=!1,u(c)!=c||u(d)==d||"/a/i"!=u(c,"i")})||(u=function(t,e){var n=o(t),r=void 0===e;return this instanceof u||!n||t.constructor!==u||!r?f?new l(n&&!r?t.source:t,e):l((n=t instanceof u)?t.source:t,n&&r?a.call(t):e):t},r.each.call(r.getNames(l),function(t){t in u||r.setDesc(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})}),s.constructor=u,u.prototype=s,n(13)(i,"RegExp",u)),n(124)("RegExp")},function(t,e,n){"use strict";var r=n(23);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(5);n(11)&&"g"!=/./g.flags&&r.setDesc(RegExp.prototype,"flags",{configurable:!0,get:n(132)})},function(t,e,n){n(135)("match",1,function(t,e){return function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))}})},function(t,e,n){"use strict";var r=n(9),i=n(13),o=n(12),a=n(25),u=n(34);t.exports=function(t,e,n){var l=u(t),s=""[t];o(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,n(a,l,s)),r(RegExp.prototype,l,2==e?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)}))}},function(t,e,n){n(135)("replace",2,function(t,e,n){return function(r,i){"use strict";var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)}})},function(t,e,n){n(135)("search",1,function(t,e){return function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))}})},function(t,e,n){n(135)("split",2,function(t,e,n){return function(r,i){"use strict";var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)}})},function(t,e,n){"use strict";var r,i=n(5),o=n(42),a=n(7),u=n(15),l=n(50),s=n(6),c=n(19),d=n(23),f=n(16),h=n(140),p=n(141),v=n(48).set,y=n(46),w=n(34)("species"),g=n(142),m=n(143),b="Promise",x=a.process,k="process"==l(x),A=a[b],S=function(t){var e=new A(function(){});return t&&(e.constructor=Object),A.resolve(e)===e},E=function(){function t(e){var n=new A(e);return v(n,t.prototype),
n}var e=!1;try{if(e=A&&A.resolve&&S(),v(t,A),t.prototype=i.create(A.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(11)){var r=!1;A.resolve(i.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(o){e=!1}return e}(),W=function(t,e){return o&&t===A&&e===r?!0:y(t,e)},O=function(t){var e=d(t)[w];return void 0!=e?e:t},M=function(t){var e;return c(t)&&"function"==typeof(e=t.then)?e:!1},C=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=f(e),this.reject=f(n)},_=function(t){try{t()}catch(e){return{error:e}}},P=function(t,e){if(!t.n){t.n=!0;var n=t.c;m(function(){for(var r=t.v,i=1==t.s,o=0,u=function(e){var n,o,a=i?e.ok:e.fail,u=e.resolve,l=e.reject;try{a?(i||(t.h=!0),n=a===!0?r:a(r),n===e.promise?l(TypeError("Promise-chain cycle")):(o=M(n))?o.call(n,u,l):u(n)):l(r)}catch(s){l(s)}};n.length>o;)u(n[o++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,i=t.p;T(i)&&(k?x.emit("unhandledRejection",r,i):(e=a.onunhandledrejection)?e({promise:i,reason:r}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",r)),t.a=void 0},1)})}},T=function(t){var e,n=t._d,r=n.a||n.c,i=0;if(n.h)return!1;for(;r.length>i;)if(e=r[i++],e.fail||!T(e.promise))return!1;return!0},j=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),P(e,!0))},L=function(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=M(t))?m(function(){var r={r:n,d:!1};try{e.call(t,u(L,r,1),u(j,r,1))}catch(i){j.call(r,i)}}):(n.v=t,n.s=1,P(n,!1))}catch(r){j.call({r:n,d:!1},r)}}};E||(A=function(t){f(t);var e=this._d={p:h(this,A,b),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(u(L,e,1),u(j,e,1))}catch(n){j.call(e,n)}},n(145)(A.prototype,{then:function(t,e){var n=new C(g(this,A)),r=n.promise,i=this._d;return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,i.c.push(n),i.a&&i.a.push(n),i.s&&P(i,!1),r},"catch":function(t){return this.then(void 0,t)}})),s(s.G+s.W+s.F*!E,{Promise:A}),n(38)(A,b),n(124)(b),r=n(8)[b],s(s.S+s.F*!E,b,{reject:function(t){var e=new C(this),n=e.reject;return n(t),e.promise}}),s(s.S+s.F*(!E||S(!0)),b,{resolve:function(t){if(t instanceof A&&W(t.constructor,this))return t;var e=new C(this),n=e.resolve;return n(t),e.promise}}),s(s.S+s.F*!(E&&n(118)(function(t){A.all(t)["catch"](function(){})})),b,{all:function(t){var e=O(this),n=new C(e),r=n.resolve,o=n.reject,a=[],u=_(function(){p(t,!1,a.push,a);var n=a.length,u=Array(n);n?i.each.call(a,function(t,i){var a=!1;e.resolve(t).then(function(t){a||(a=!0,u[i]=t,--n||r(u))},o)}):r(u)});return u&&o(u.error),n.promise},race:function(t){var e=O(this),n=new C(e),r=n.reject,i=_(function(){p(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){var r=n(15),i=n(115),o=n(116),a=n(23),u=n(30),l=n(117);t.exports=function(t,e,n,s){var c,d,f,h=l(t),p=r(n,s,e?2:1),v=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(o(h))for(c=u(t.length);c>v;v++)e?p(a(d=t[v])[0],d[1]):p(t[v]);else for(f=h.call(t);!(d=f.next()).done;)i(f,p,d.value,e)}},function(t,e,n){var r=n(23),i=n(16),o=n(34)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(7),u=n(144).set,l=a.MutationObserver||a.WebKitMutationObserver,s=a.process,c=a.Promise,d="process"==n(21)(s),f=function(){var t,e,n;for(d&&(t=s.domain)&&(s.domain=null,t.exit());r;)e=r.domain,n=r.fn,e&&e.enter(),n(),e&&e.exit(),r=r.next;i=void 0,t&&t.enter()};if(d)o=function(){s.nextTick(f)};else if(l){var h=1,p=document.createTextNode("");new l(f).observe(p,{characterData:!0}),o=function(){p.data=h=-h}}else o=c&&c.resolve?function(){c.resolve().then(f)}:function(){u.call(a,f)};t.exports=function(t){var e={fn:t,next:void 0,domain:d&&s.domain};i&&(i.next=e),r||(r=e,o()),i=e}},function(t,e,n){var r,i,o,a=n(15),u=n(22),l=n(17),s=n(18),c=n(7),d=c.process,f=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,v=0,y={},w="onreadystatechange",g=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},m=function(t){g.call(t.data)};f&&h||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++v]=function(){u("function"==typeof t?t:Function(t),e)},r(v),v},h=function(t){delete y[t]},"process"==n(21)(d)?r=function(t){d.nextTick(a(g,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",m,!1)):r=w in s("script")?function(t){l.appendChild(s("script"))[w]=function(){l.removeChild(this),g.call(t)}}:function(t){setTimeout(a(g,t,1),0)}),t.exports={set:f,clear:h}},function(t,e,n){var r=n(13);t.exports=function(t,e){for(var n in e)r(t,n,e[n]);return t}},function(t,e,n){"use strict";var r=n(147);n(148)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(5),i=n(9),o=n(145),a=n(15),u=n(140),l=n(25),s=n(141),c=n(102),d=n(122),f=n(14)("id"),h=n(20),p=n(19),v=n(124),y=n(11),w=Object.isExtensible||p,g=y?"_s":"size",m=0,b=function(t,e){if(!p(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!h(t,f)){if(!w(t))return"F";if(!e)return"E";i(t,f,++m)}return"O"+t[f]},x=function(t,e){var n,r=b(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,i){var c=t(function(t,o){u(t,c,e),t._i=r.create(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=o&&s(o,n,t[i],t)});return o(c.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[g]=0},"delete":function(t){var e=this,n=x(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[g]--}return!!n},forEach:function(t){for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!x(this,t)}}),y&&r.setDesc(c.prototype,"size",{get:function(){return l(this[g])}}),c},def:function(t,e,n){var r,i,o=x(t,e);return o?o.v=n:(t._l=o={i:i=b(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[g]++,"F"!==i&&(t._i[i]=o)),t},getEntry:x,setStrong:function(t,e,n){c(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?d(0,n.k):"values"==e?d(0,n.v):d(0,[n.k,n.v]):(t._t=void 0,d(1))},n?"entries":"values",!n,!0),v(e)}}},function(t,e,n){"use strict";var r=n(7),i=n(6),o=n(13),a=n(145),u=n(141),l=n(140),s=n(19),c=n(12),d=n(118),f=n(38);t.exports=function(t,e,n,h,p,v){var y=r[t],w=y,g=p?"set":"add",m=w&&w.prototype,b={},x=function(t){var e=m[t];o(m,t,"delete"==t?function(t){return v&&!s(t)?!1:e.call(this,0===t?0:t)}:"has"==t?function(t){return v&&!s(t)?!1:e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!s(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof w&&(v||m.forEach&&!c(function(){(new w).entries().next()}))){var k,A=new w,S=A[g](v?{}:-0,1)!=A,E=c(function(){A.has(1)}),W=d(function(t){new w(t)});W||(w=e(function(e,n){l(e,w,t);var r=new y;return void 0!=n&&u(n,p,r[g],r),r}),w.prototype=m,m.constructor=w),v||A.forEach(function(t,e){k=1/e===-(1/0)}),(E||k)&&(x("delete"),x("has"),p&&x("get")),(k||S)&&x(g),v&&m.clear&&delete m.clear}else w=h.getConstructor(e,t,p,g),a(w.prototype,n);return f(w,t),b[t]=w,i(i.G+i.W+i.F*(w!=y),b),v||h.setStrong(w,t,p),w}},function(t,e,n){"use strict";var r=n(147);n(148)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r=n(5),i=n(13),o=n(151),a=n(19),u=n(20),l=o.frozenStore,s=o.WEAK,c=Object.isExtensible||a,d={},f=n(148)("WeakMap",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){if(a(t)){if(!c(t))return l(this).get(t);if(u(t,s))return t[s][this._i]}},set:function(t,e){return o.def(this,t,e)}},o,!0,!0);7!=(new f).set((Object.freeze||Object)(d),7).get(d)&&r.each.call(["delete","has","get","set"],function(t){var e=f.prototype,n=e[t];i(e,t,function(e,r){if(a(e)&&!c(e)){var i=l(this)[t](e,r);return"set"==t?this:i}return n.call(this,e,r)})})},function(t,e,n){"use strict";var r=n(9),i=n(145),o=n(23),a=n(19),u=n(140),l=n(141),s=n(31),c=n(20),d=n(14)("weak"),f=Object.isExtensible||a,h=s(5),p=s(6),v=0,y=function(t){return t._l||(t._l=new w)},w=function(){this.a=[]},g=function(t,e){return h(t.a,function(t){return t[0]===e})};w.prototype={get:function(t){var e=g(this,t);return e?e[1]:void 0},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,r){var o=t(function(t,i){u(t,o,e),t._i=v++,t._l=void 0,void 0!=i&&l(i,n,t[r],t)});return i(o.prototype,{"delete":function(t){return a(t)?f(t)?c(t,d)&&c(t[d],this._i)&&delete t[d][this._i]:y(this)["delete"](t):!1},has:function(t){return a(t)?f(t)?c(t,d)&&c(t[d],this._i):y(this).has(t):!1}}),o},def:function(t,e,n){return f(o(e))?(c(e,d)||r(e,d,{}),e[d][t._i]=n):y(t).set(e,n),t},frozenStore:y,WEAK:d}},function(t,e,n){"use strict";var r=n(151);n(148)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t,!0)}},r,!1,!0)},function(t,e,n){var r=n(6),i=Function.apply;r(r.S,"Reflect",{apply:function(t,e,n){return i.call(t,e,n)}})},function(t,e,n){var r=n(5),i=n(6),o=n(16),a=n(23),u=n(19),l=Function.bind||n(8).Function.prototype.bind;i(i.S+i.F*n(12)(function(){function t(){}return!(Reflect.construct(function(){},[],t)instanceof t)}),"Reflect",{construct:function(t,e){o(t);var n=arguments.length<3?t:o(arguments[2]);if(t==n){if(void 0!=e)switch(a(e).length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(l.apply(t,i))}var s=n.prototype,c=r.create(u(s)?s:Object.prototype),d=Function.apply.call(t,c,e);return u(d)?d:c}})},function(t,e,n){var r=n(5),i=n(6),o=n(23);i(i.S+i.F*n(12)(function(){Reflect.defineProperty(r.setDesc({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t);try{return r.setDesc(t,e,n),!0}catch(i){return!1}}})},function(t,e,n){var r=n(6),i=n(5).getDesc,o=n(23);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return n&&!n.configurable?!1:delete t[e]}})},function(t,e,n){"use strict";var r=n(6),i=n(23),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(104)(o,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){function r(t,e){var n,a,s=arguments.length<3?t:arguments[2];return l(t)===s?t[e]:(n=i.getDesc(t,e))?o(n,"value")?n.value:void 0!==n.get?n.get.call(s):void 0:u(a=i.getProto(t))?r(a,e,s):void 0}var i=n(5),o=n(20),a=n(6),u=n(19),l=n(23);a(a.S,"Reflect",{get:r})},function(t,e,n){var r=n(5),i=n(6),o=n(23);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.getDesc(o(t),e)}})},function(t,e,n){var r=n(6),i=n(5).getProto,o=n(23);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(6);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(6),i=n(23),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),o?o(t):!0}})},function(t,e,n){var r=n(6);r(r.S,"Reflect",{ownKeys:n(164)})},function(t,e,n){var r=n(5),i=n(23),o=n(7).Reflect;t.exports=o&&o.ownKeys||function(t){var e=r.getNames(i(t)),n=r.getSymbols;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(6),i=n(23),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(e){return!1}}})},function(t,e,n){function r(t,e,n){var a,c,d=arguments.length<4?t:arguments[3],f=i.getDesc(l(t),e);if(!f){if(s(c=i.getProto(t)))return r(c,e,n,d);f=u(0)}return o(f,"value")?f.writable!==!1&&s(d)?(a=i.getDesc(d,e)||u(0),a.value=n,i.setDesc(d,e,a),!0):!1:void 0===f.set?!1:(f.set.call(d,n),!0)}var i=n(5),o=n(20),a=n(6),u=n(10),l=n(23),s=n(19);a(a.S,"Reflect",{set:r})},function(t,e,n){var r=n(6),i=n(48);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(n){return!1}}})},function(t,e,n){"use strict";var r=n(6),i=n(36)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(121)("includes")},function(t,e,n){"use strict";var r=n(6),i=n(101)(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(6),i=n(171);r(r.P,"String",{padLeft:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var r=n(30),i=n(112),o=n(25);t.exports=function(t,e,n,a){var u=String(o(t)),l=u.length,s=void 0===n?" ":String(n),c=r(e);if(l>=c)return u;""==s&&(s=" ");var d=c-l,f=i.call(s,Math.ceil(d/s.length));return f.length>d&&(f=f.slice(0,d)),a?f+u:u+f}},function(t,e,n){"use strict";var r=n(6),i=n(171);r(r.P,"String",{padRight:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(66)("trimLeft",function(t){return function(){return t(this,1)}})},function(t,e,n){"use strict";n(66)("trimRight",function(t){return function(){return t(this,2)}})},function(t,e,n){var r=n(6),i=n(176)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){var r=n(5),i=n(6),o=n(164),a=n(26),u=n(10);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=a(t),l=r.setDesc,s=r.getDesc,c=o(i),d={},f=0;c.length>f;)n=s(i,e=c[f++]),e in d?l(d,e,u(0,n)):d[e]=n;return d}})},function(t,e,n){var r=n(6),i=n(179)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(5),i=n(26),o=r.isEnum;t.exports=function(t){return function(e){for(var n,a=i(e),u=r.getKeys(a),l=u.length,s=0,c=[];l>s;)o.call(a,n=u[s++])&&c.push(t?[n,a[n]]:a[n]);return c}}},function(t,e,n){var r=n(6),i=n(179)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){var r=n(6);r(r.P,"Map",{toJSON:n(182)("Map")})},function(t,e,n){var r=n(141),i=n(50);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");var e=[];return r(this,!1,e.push,e),e}}},function(t,e,n){var r=n(6);r(r.P,"Set",{toJSON:n(182)("Set")})},function(t,e,n){var r=n(5),i=n(6),o=n(15),a=n(8).Array||Array,u={},l=function(t,e){r.each.call(t.split(","),function(t){void 0==e&&t in a?u[t]=a[t]:t in[]&&(u[t]=o(Function.call,[][t],e))})};l("pop,reverse,shift,keys,values,entries",1),l("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),l("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill"),i(i.S,"Array",u)},function(t,e,n){var r=n(7),i=n(6),o=n(22),a=n(186),u=r.navigator,l=!!u&&/MSIE .\./.test(u.userAgent),s=function(t){return l?function(e,n){return t(o(a,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};i(i.G+i.B+i.F*l,{setTimeout:s(r.setTimeout),setInterval:s(r.setInterval)})},function(t,e,n){"use strict";var r=n(187),i=n(22),o=n(16);t.exports=function(){for(var t=o(this),e=arguments.length,n=Array(e),a=0,u=r._,l=!1;e>a;)(n[a]=arguments[a++])===u&&(l=!0);return function(){var r,o=this,a=arguments,s=a.length,c=0,d=0;if(!l&&!s)return i(t,n,o);if(r=n.slice(),l)for(;e>c;c++)r[c]===u&&(r[c]=a[d++]);for(;s>d;)r.push(a[d++]);return i(t,r,o)}}},function(t,e,n){t.exports=n(7)},function(t,e,n){var r=n(6),i=n(144);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){n(120);var r=n(7),i=n(9),o=n(103),a=n(34)("iterator"),u=r.NodeList,l=r.HTMLCollection,s=u&&u.prototype,c=l&&l.prototype,d=o.NodeList=o.HTMLCollection=o.Array;s&&!s[a]&&i(s,a,d),c&&!c[a]&&i(c,a,d)},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var i=Object.create((e||o).prototype),a=new p(r||[]);return i._invoke=d(t,n,a),i}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function o(){}function a(){}function u(){}function l(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(t){this.arg=t}function c(t){function e(e,n){var r=t[e](n),i=r.value;return i instanceof s?Promise.resolve(i.arg).then(o,a):Promise.resolve(i).then(function(t){return r.value=t,r})}function r(t,n){function r(){return e(t,n)}return i=i?i.then(r,r):new Promise(function(t){t(r())})}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var i,o=e.bind(t,"next"),a=e.bind(t,"throw");e.bind(t,"return");this._invoke=r}function d(t,e,n){var r=k;return function(o,a){if(r===S)throw new Error("Generator is already running");if(r===E){if("throw"===o)throw a;return y()}for(;;){var u=n.delegate;if(u){if("return"===o||"throw"===o&&u.iterator[o]===w){n.delegate=null;var l=u.iterator["return"];if(l){var s=i(l,u.iterator,a);if("throw"===s.type){o="throw",a=s.arg;continue}}if("return"===o)continue}var s=i(u.iterator[o],u.iterator,a);if("throw"===s.type){n.delegate=null,o="throw",a=s.arg;continue}o="next",a=w;var c=s.arg;if(!c.done)return r=A,c;n[u.resultName]=c.value,n.next=u.nextLoc,n.delegate=null}if("next"===o)n._sent=a,r===A?n.sent=a:n.sent=w;else if("throw"===o){if(r===k)throw r=E,a;n.dispatchException(a)&&(o="next",a=w)}else"return"===o&&n.abrupt("return",a);r=S;var s=i(t,e,n);if("normal"===s.type){r=n.done?E:A;var c={value:s.arg,done:n.done};if(s.arg!==W)return c;n.delegate&&"next"===o&&(a=w)}else"throw"===s.type&&(r=E,o="throw",a=s.arg)}}}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function v(t){if(t){var e=t[m];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(g.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=w,i.done=!0,i};return r.next=r}}return{next:y}}function y(){return{value:w,done:!0}}var w,g=Object.prototype.hasOwnProperty,m="function"==typeof Symbol&&Symbol.iterator||"@@iterator",b="object"==typeof t,x=e.regeneratorRuntime;if(x)return void(b&&(t.exports=x));x=e.regeneratorRuntime=b?t.exports:{},x.wrap=r;var k="suspendedStart",A="suspendedYield",S="executing",E="completed",W={},O=u.prototype=o.prototype;a.prototype=O.constructor=u,u.constructor=a,a.displayName="GeneratorFunction",x.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return e?e===a||"GeneratorFunction"===(e.displayName||e.name):!1},x.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):t.__proto__=u,t.prototype=Object.create(O),t},x.awrap=function(t){return new s(t)},l(c.prototype),x.async=function(t,e,n,i){var o=new c(r(t,e,n,i));return x.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},l(O),O[m]=function(){return this},O.toString=function(){return"[object Generator]"},x.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},x.values=v,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=w,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=w)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),u=g.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?this.next=i.finallyLoc:this.complete(o),W},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),W}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},W}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(191))},function(t,e){function n(){s=!1,a.length?l=a.concat(l):c=-1,l.length&&r()}function r(){if(!s){var t=setTimeout(n);s=!0;for(var e=l.length;e;){for(a=l,l=[];++c<e;)a&&a[c].run();c=-1,e=l.length}a=null,s=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var a,u=t.exports={},l=[],s=!1,c=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new i(t,e)),1!==l.length||s||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),n(193);var i=n(198),o=r(i),a=n(217),u=r(a),l=n(220),s=r(l),c=n(221),d=r(c),f=n(227),h=r(f),p=n(228),v=r(p),y=n(233),w=r(y),g=n(234),m=r(g),b=n(236),x=r(b),k=n(237),A=r(k),S=n(238),E=r(S),W=n(239),O=r(W),M=n(240),C=r(M),_=n(218),P=r(_),T=n(241),j=r(T),L=n(242),I=r(L),B=n(223),q=r(B),F=n(243),N=r(F),U=n(247),R=r(U),D=n(251),G=r(D),z=n(255),Y=r(z),H=n(261),X=r(H),Q=n(265),V=r(Q),K=n(270),J=r(K),Z=n(274),$=r(Z),tt=n(278),et=r(tt),nt=n(282),rt=r(nt),it=n(286),ot=r(it),at=n(290),ut=r(at),lt=n(294),st=r(lt),ct=n(298),dt=r(ct),ft=n(302),ht=r(ft),pt=n(306),vt=r(pt),yt=n(310),wt=r(yt);o["default"].assign("Actor",u["default"]),o["default"].assign("ActorAlly",s["default"]),o["default"].assign("ActorHero",d["default"]),o["default"].assign("ActorMonster",h["default"]),o["default"].assign("ActorNPC",v["default"]),o["default"].assign("ActorPet",w["default"]),o["default"].assign("Archive",m["default"]),o["default"].assign("Area",x["default"]),o["default"].assign("Astar",A["default"]),o["default"].assign("Input",E["default"]),o["default"].assign("Item",O["default"]),o["default"].assign("Map",C["default"]),o["default"].assign("Quest",P["default"]),o["default"].assign("Register",j["default"]),o["default"].assign("Skill",I["default"]),o["default"].assign("Window",q["default"]),o["default"].windows.archive=N["default"],o["default"].windows.buy=R["default"],o["default"].windows.dialogue=G["default"],o["default"].windows["interface"]=Y["default"],o["default"].windows.inventory=X["default"],o["default"].windows.loading=V["default"],o["default"].windows.main=J["default"],o["default"].windows.map=$["default"],o["default"].windows.over=et["default"],o["default"].windows.pickup=rt["default"],o["default"].windows.quest=ot["default"],o["default"].windows.register=ut["default"],o["default"].windows.sell=st["default"],o["default"].windows.setting=dt["default"],o["default"].windows.skill=ht["default"],o["default"].windows.status=vt["default"],o["default"].windows.sysmenu=wt["default"],o["default"].init();var gt=q["default"].create("stageWindow");gt.appendChild(o["default"].stage.canvas),o["default"].windows.stage=gt,gt.show(),E["default"].init(),J["default"].show(),document.title="Elliorwis",window.Game=o["default"],e["default"]=o["default"]},function(t,e,n){var r=n(194);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,"body,html{overflow:hidden;margin:0;background-color:#000}*{cursor:url("+n(196)+"),auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}button{outline:0}button:active,button:focus,button:hover{outline:none}button::-moz-focus-inner{border:0}.game-window{position:fixed;top:0;left:0;display:none;width:800px;height:450px;z-index:10}.window-box{position:absolute;top:0;left:0;width:760px;height:390px;padding:10px;overflow-y:auto;background-color:hsla(30,61%,85%,.85);border:20px solid rgba(134,93,52,.85)}.brownButton{box-shadow:inset 0 1px 0 0 #a6827e;background:-webkit-gradient(linear,left top,left bottom,color-stop(.05,#7d5d3b),color-stop(1,#634b30));background:-webkit-linear-gradient(top,#7d5d3b 5%,#634b30);background:linear-gradient(180deg,#7d5d3b 5%,#634b30);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#7d5d3b',endColorstr='#634b30',GradientType=0);background-color:#7d5d3b;border-radius:3px;border:1px solid #54381e;display:inline-block;color:#fff;font-family:Arial;padding:2px 4px;text-decoration:none;text-shadow:0 1px 0 #4d3534}.brownButton:disabled{opacity:.4}.brownButton:hover{background:-webkit-gradient(linear,left top,left bottom,color-stop(.05,#634b30),color-stop(1,#7d5d3b));background:-webkit-linear-gradient(top,#634b30 5%,#7d5d3b);background:linear-gradient(180deg,#634b30 5%,#7d5d3b);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#634b30',endColorstr='#7d5d3b',GradientType=0);background-color:#634b30}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e){t.exports="data:image/gif;base64,R0lGODlhIAAgAPcAAAAAAP////v7/O3t7tnb3gIDBAQFBgUGBzEzNcfLz+Hk58LExmJjZNze4Orr7OPk5XuBhmpucaClqc7T19LW2QkMDgsOECksLqassLrAxLS6vsfKzOLl597h493g4trd39HU1mBrchMYG05ibSAnKzI7QCAlKERNUkBHS254fmFqb2RtckFGSXiBhoKLkJmip3V8gKKrsJ6nrJWcoKCnq3d8f3Z7fn6Dhr3EyLi/w7G4vJKXmqitsLq/wrS5vMrP0gsPERggJAYICUxgak1ha05hawgKC0JSWlNmcCMrLztITzxJUC44PUlYYHSMmERRWB8lKF9xelRkbF9weVZmbm2AikxZYGV1fR0hI298g2JudGVxd3eEi2lzeHF7gDM3OYiSl4yWm4WNkWhucWZsbyMlJpScoH6Eh4GHisDIzI6Ul5edoMPJzMHHyqCkplJUVba6vNXZ287S1MnNz9ba3Onr7Ojq6+bo6eXn6OPl5uLk5U1ibE5jbTA9QyIrL1ZsdiMsMC04PSUuMktdZURPVFNeY0NMUHmIj2p1eoOOk4CJjX+IjKCprau0uKqzt6avs6StsaOssK63uxwmKhQbHhUcHyErLzA+RCIsMDpJTyYwNCcxNSkzNzdDSCQrLkRQVT5ITGl5gFhkaTc+QVpkaGlwc52nq4SLjpWcn7G4u8jP0r7FyIyRk4qPkYeMjra7vdHW2NDV18/U1sjNzyArLzZDSERSV1NhZjlBRFZhZUlRVH+HipmhpKGprKmxtBYcHgsODzE9QTI+QhATFDxFSH+Ii5ukp6CprJ+lp8/V1+fq6+Pm5+Hk5eDj5N/i493g4dzf4Nve3zE4OoKJiwoOD8fLzNvf4Nre39fb3Nba2wECAgIDAzQ1NePm5vDy8vHy8u7v752env39/WBgYB0dHQEBAf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAOYALAAAAAAgACAAAAj/AH8BAPDLnMGDCBMqXAigS5cZbwqaA1Cu4sKLCQFAcThj4LYgokQZqzQxCACMDAV1UaWqI4AgQ1IYG9jJJEqFAATVAKGq0ZsKMBOZBNCp08mbCHPWQKUqnJBftGixOgMjDBgER5Ea1CbISxdDrdQoiAVrFQ4MMhJl1QoAmCBaTlz5WIMDhzgBNyClMKr14MBcu1ChieBmALgH35bx4ssWwLhyunbtQAVnwYABDdLw4iVqLUYA5KwQsSCNzI7AYlDpmCCOg6zObPkQ4QYACwpSpUqJafNDTzcHOv4Io4YUwB4iVYgVoATKho1XPaA565AtWRhhw28CwERkSCgauMqw/1jRoseca3mYsdHBpYkwICgB+Lk0ZMShVH6+hBiDCFuzDszMgQYXRwQzCRCeJWVJH5cUYQoDF3QSQjHIVDgHM8zQ0QsXhXRoRIIGyYdJJrfYokkno6igghQ8OOOBM9H40osxaHRYCIgTAWCCJwAY4AcJSkhxiiRxfHDHHdas0gsaTH6CY4gDASACFIFIYMYjPTRDAB51NHONI9OgUYsWT/oFwDCBXCGBJDlkeYcddjyzwTGLnDJImWYGIgUEjUTSQ5bKeGNHNb0o8gIheIZ4ACdKqOACIzH82YwycG6gyCYD9QXAJn5QEYULkGiQAQVy2PHCJptMkqhfmwhyggqfaj2gwSwJnIrpqn4l4QcTSyDxRBayoipCpn355YcfJZSwhQpToEpssUkBcmwgUT4LbVLV4nrtttx26+23FwUEADs="},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=h[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(s(r.parts[o],e))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(s(r.parts[o],e));h[r.id]={id:r.id,refs:1,parts:a}}}}function i(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],a=i[1],u=i[2],l=i[3],s={css:a,media:u,sourceMap:l};n[o]?n[o].parts.push(s):e.push(n[o]={id:o,parts:[s]})}return e}function o(t,e){var n=y(),r=m[m.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),m.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function a(t){t.parentNode.removeChild(t);var e=m.indexOf(t);e>=0&&m.splice(e,1)}function u(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function l(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function s(t,e){var n,r,i;if(e.singleton){var o=g++;n=w||(w=u(e)),r=c.bind(null,n,o,!1),i=c.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(e),r=f.bind(null,n),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=u(e),r=d.bind(null,n),i=function(){a(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function c(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function d(t,e){var n=e.css,r=e.media;e.sourceMap;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e){var n=e.css,r=(e.media,e.sourceMap);r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var h={},p=function(t){
var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},v=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),y=p(function(){return document.head||document.getElementsByTagName("head")[0]}),w=null,g=0,m=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=v()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=i(t);return r(n,e),function(t){for(var o=[],a=0;a<n.length;a++){var u=n[a],l=h[u.id];l.refs--,o.push(l)}if(t){var s=i(t);r(s,e)}for(var a=0;a<o.length;a++){var l=o[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete h[l.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(199),u=r(a),l=u["default"].Util.namespace(),s=function(){function t(){i(this,t);var e=l(this);e.items={},e.skills={},e.sounds={},e.layers={},e.windows={},e.config={width:800,height:450,scale:!0,fps:35},e.paused=!0,e.stage=null,window.require&&(e.config.scale=!0)}return o(t,[{key:"addBag",value:function(t,e){return new Promise(function(n,r){var i=!0,o=!1,a=void 0;try{for(var u,l=c.area.bags[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;if(s.hitTest(t,e))return n(s)}}catch(d){o=!0,a=d}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw a}}c.Item.load("bag").then(function(r){r.x=t,r.y=e,r.inner={},r.draw(),c.area.bags.add(r),n(r)})})}},{key:"assign",value:function(t,e){return Object.defineProperty(this,t,{enumerable:!1,configurable:!1,writable:!1,value:e}),this}},{key:"start",value:function(){l(this).paused=!1}},{key:"pause",value:function(){l(this).paused=!0}},{key:"clearStage",value:function(){if(c.area){var t=!0,e=!1,n=void 0;try{for(var r,i=c.area.actors[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.erase()}}catch(a){e=!0,n=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}var u=!0,l=!1,s=void 0;try{for(var d,f=c.area.bags[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var h=d.value;h.erase()}}catch(a){l=!0,s=a}finally{try{!u&&f["return"]&&f["return"]()}finally{if(l)throw s}}}this.layers.mapLayer.clear();var p=!0,v=!1,y=void 0;try{for(var w,g=this.stage.children[Symbol.iterator]();!(p=(w=g.next()).done);p=!0){var m=w.value;m.clear()}}catch(a){v=!0,y=a}finally{try{!p&&g["return"]&&g["return"]()}finally{if(v)throw y}}this.stage.releaseRenderer()}},{key:"init",value:function(){var t=this,e=l(this);e.stage=new u["default"].Stage(e.config.width,e.config.height),e.layers.mapLayer=new u["default"].Container,e.layers.mapLayer.name="mapLayer",e.layers.itemLayer=new u["default"].Container,e.layers.itemLayer.name="itemLayer",e.layers.actorLayer=new u["default"].Container,e.layers.actorLayer.name="actorLayer",e.layers.infoLayer=new u["default"].Container,e.layers.infoLayer.name="inforLayer",e.layers.skillLayer=new u["default"].Container,e.layers.skillLayer.name="skillLayer",e.layers.dialogueLayer=new u["default"].Container,e.layers.dialogueLayer.name="dialogueLayer",e.stage.appendChild(e.layers.mapLayer,e.layers.itemLayer,e.layers.actorLayer,e.layers.infoLayer,e.layers.skillLayer,e.layers.dialogueLayer),e.stage.on("beforeDraw",function(){c.hero&&c.layers.actorLayer.children.sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:0})}),u["default"].Ticker.on("tick",function(){0==t.paused&&t.stage.update()});var n=document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.top="0",n.style.color="white",n.style.zIndex=999999,document.body.appendChild(n);var r=0,i=Date.now();e.stage.on("afterDraw",function(){r++}),setInterval(function(){var t=Date.now(),e=r/((t-i)/1e3);r=0,i=t,n.textContent=e.toFixed(1)},1e3),console.log("Elliorwis 0.2.0 Flying!")}},{key:"paused",get:function(){return l(this).paused},set:function(t){throw new Error("Game.paused readonly, use Game.pause() instead")}},{key:"windows",get:function(){return l(this).windows},set:function(t){throw new Error("Game.windows readonly")}},{key:"config",get:function(){return l(this).config},set:function(t){throw new Error("Game.config readonly")}},{key:"items",get:function(){return l(this).items},set:function(t){throw new Error("Game.items readonly")}},{key:"skills",get:function(){return l(this).skills},set:function(t){throw new Error("Game.skills readonly")}},{key:"sounds",get:function(){return l(this).sounds},set:function(t){throw new Error("Game.sounds readonly")}},{key:"layers",get:function(){return l(this).layers},set:function(t){throw new Error("Game.layers readonly")}},{key:"stage",get:function(){return l(this).stage},set:function(t){throw new Error("Game.stage readonly")}}]),t}(),c=new s;console.log("Game Base Constructed"),e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(200),o=r(i),a=n(201),u=r(a),l=n(205),s=r(l),c=n(206),d=r(c),f=n(203),h=r(f),p=n(204),v=r(p),y=n(207),w=r(y),g=n(208),m=r(g),b=n(209),x=r(b),k=n(210),A=r(k),S=n(211),E=r(S),W=n(212),O=r(W),M=n(214),C=r(M),_=n(215),P=r(_),T=n(216),j=r(T),L=n(202),I=r(L),B=n(213),q=r(B);o["default"].assign("Bitmap",u["default"]),o["default"].assign("Canvas",s["default"]),o["default"].assign("Container",d["default"]),o["default"].assign("Display",h["default"]),o["default"].assign("Event",v["default"]),o["default"].assign("Frame",w["default"]),o["default"].assign("Input",m["default"]),o["default"].assign("Loader",x["default"]),o["default"].assign("Shape",A["default"]),o["default"].assign("Sheet",E["default"]),o["default"].assign("Stage",O["default"]),o["default"].assign("Text",C["default"]),o["default"].assign("Ticker",P["default"]),o["default"].assign("Tween",j["default"]),o["default"].assign("Util",I["default"]),o["default"].assign("Webgl",q["default"]),e["default"]=o["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){n(this,t)}return r(t,[{key:"assign",value:function(t,e){return Object.defineProperty(this,t,{enumerable:!1,configurable:!1,writable:!1,value:e}),this}}]),t}(),o=new i;e["default"]=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(202),s=r(l),c=n(203),d=r(c),f=s["default"].namespace(),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this));if(!(t instanceof Image||t.getContext&&t.getContext("2d")))throw console.error(t,n),new Error("SpriteBitmap got invalid image, not Image or Canvas");if(t.width<=0||!Number.isFinite(t.width)||t.height<=0||!Number.isFinite(t.height))throw console.error(t),new Error("SpriteBitmap got invalid image, invalid width or height");return f(n).image=t,n}return a(e,t),u(e,[{key:"clone",value:function(){var t=new e(f(this).image);return t.x=this.x,t.y=this.y,t.centerX=this.centerX,t.centerY=this.centerY,t.alpha=this.alpha,t.visible=this.visible,t}},{key:"draw",value:function(t){if(!(this.alpha<=.01||1!=this.visible)){var e=f(this).image;this.drawImage(t,e,0,0,e.width,e.height)}}},{key:"image",get:function(){return f(this).image},set:function(t){throw console.error(this),new Error("SpriteBitmap.image readonly")}},{key:"width",get:function(){return f(this).image.width},set:function(t){throw console.error(this),new Error("SpriteBitmap.width readonly")}},{key:"height",get:function(){return f(this).image.height},set:function(t){throw console.error(this),new Error("SpriteBitmap.height readonly")}}]),e}(d["default"]);e["default"]=h},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){n(this,t)}return r(t,null,[{key:"timeout",value:function(t){return new Promise(function(e,n){setTimeout(e,t)})}},{key:"namespace",value:function(){var t=new WeakMap;return function(e){return 0==t.has(e)&&t.set(e,{}),t.get(e)}}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/x|y/g,function(t){var e=Math.floor(16*Math.random());return"x"==t?e.toString(16):(3&e|8).toString(16)})}},{key:"copy",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"btoa",value:function(t){return window.btoa(unescape(encodeURIComponent(t)))}},{key:"atob",value:function(t){return decodeURIComponent(escape(window.atob(t)))}},{key:"rand",value:function(t,e){var n=e-t;return n*=Math.random(),t+Math.floor(n)}}]),t}();e["default"]=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(202),s=r(l),c=n(204),d=r(c),f=s["default"].namespace(),h=document.createElement("canvas");h.width=1,h.height=1;var p=h.getContext("2d");p.clearRect(0,0,1,1);var v=p.getImageData(0,0,1,1).data,y=function(t){function e(){i(this,e);var t=o(this,Object.getPrototypeOf(e).call(this)),n=f(t);return n.x=0,n.y=0,n.centerX=0,n.centerY=0,n.alpha=1,n.visible=!0,n.width=0,n.height=0,t}return a(e,t),u(e,[{key:"draw",value:function(t){throw console.error("sub-class should override this function"),new Error("Invalid call SpriteDisplay.draw")}},{key:"hitTest",value:function(t,e){p.clearRect(0,0,1,1),p.save(),p.translate(-t,-e),this.draw(p),p.restore();var n=p.getImageData(0,0,1,1).data;return v[0]!=n[0]||v[1]!=n[1]||v[2]!=n[2]?!0:!1}},{key:"drawPosition",value:function(){for(var t=this.centerX,e=this.centerY,n=this.x,r=this.y,i=this.alpha,o=this.parent;o;){if(t+=o.centerX,e+=o.centerY,n+=o.x,r+=o.y,i*=o.alpha,.001>=i)return null;if(0==o.visible)return null;o=o.parent}return{x:n-t,y:r-e,alpha:i}}},{key:"drawImage",value:function(t,e,n,r,i,o){if(!(1!=this.visible||this.alpha<.01)){var a=this.drawPosition();if(a){t.alpha=a.alpha;try{t.drawImage(e,n,r,i,o,a.x,a.y,i,o)}catch(u){throw console.error(e,n,r,i,o,a.x,a.y,i,o),u}}}}},{key:"width",get:function(){return f(this).width},set:function(t){f(this).width=t}},{key:"height",get:function(){return f(this).height},set:function(t){f(this).height=t}},{key:"x",get:function(){return f(this).x},set:function(t){var e=f(this);if(!Number.isFinite(t))throw console.error(t,this),new Error("SpriteDisplay.set x : invalid argument");t!=e.x&&(e.x=Math.floor(t),this.emit("change"))}},{key:"y",get:function(){return f(this).y},set:function(t){var e=f(this);if(!Number.isFinite(t))throw console.error(t,this),new Error("SpriteDisplay.set y : invalid argument");t!=e.y&&(e.y=Math.floor(t),this.emit("change"))}},{key:"centerX",get:function(){return f(this).centerX},set:function(t){var e=f(this);if(!Number.isFinite(t))throw console.error(t,this),new Error("SpriteDisplay.set centerX : invalid argument");t!=e.centerX&&(e.centerX=Math.floor(t),this.emit("change"))}},{key:"centerY",get:function(){return f(this).centerY},set:function(t){var e=f(this);if(!Number.isFinite(t))throw console.error(t,this),new Error("SpriteDisplay.set centerY : invalid argument");t!=e.centerY&&(e.centerY=Math.floor(t),this.emit("change"))}},{key:"alpha",get:function(){var t=f(this);return t.alpha},set:function(t){var e=f(this);if(!Number.isFinite(t)||!(t>=0||1>=t))throw console.error(t,this),new Error("SpriteDisplay.set alpha : invalid argument");t!=e.alpha&&(e.alpha=t,this.emit("change"))}},{key:"visible",get:function(){var t=f(this);return t.visible},set:function(t){var e=f(this);t!=e.visible&&(e.visible=t,this.emit("change"))}}]),e}(d["default"]);e["default"]=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(202),u=r(a),l=u["default"].namespace(),s=function(){function t(){i(this,t);var e=l(this);e.listeners=new Map,e.once=new Map,e.parent=null}return o(t,[{key:"on",value:function(t,e){var n=l(this);if(n.once.has(t))return e({type:t,target:this,data:n.once.get(t)}),null;0==n.listeners.has(t)&&n.listeners.set(t,new Map);var r=u["default"].uuid();return n.listeners.get(t).set(r,e),r}},{key:"off",value:function(t,e){var n=l(this);return n.listeners.has(t)&&n.listeners.get(t).has(e)?(n.listeners.get(t)["delete"](e),n.listeners.get(t).size<=0&&n.listeners["delete"](t),!0):!1}},{key:"emitBubble",value:function(t,e,n){var r=l(this),i=!0;if(r.listeners.has(t)){var o=!0,a=!1,u=void 0;try{for(var s,c=r.listeners.get(t).values()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value;d({type:t,target:e,data:n})===!1&&(i=!1)}}catch(f){a=!0,u=f}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw u}}}r.parent&&1==i&&r.parent.emitBubble(t,e,n)}},{key:"emit",value:function(t,e,n){var r=l(this);e&&("undefined"!=typeof n?r.once.set(t,n):r.once.set(t,null));var i=!0;if(r.listeners.has(t)){var o=!0,a=!1,u=void 0;try{for(var s,c=r.listeners.get(t).values()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value;d({type:t,target:this,data:n})===!1&&(i=!1)}}catch(f){a=!0,u=f}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw u}}}r.parent&&1==i&&r.parent.emitBubble(t,this,n)}},{key:"parent",get:function(){var t=l(this);return t.parent},set:function(t){var e=l(this);e.parent=t}}]),t}();e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(202),u=r(a),l=u["default"].namespace(),s=function(){function t(e,n){i(this,t);var r=l(this),o=document.createElement("canvas");o.width=e||640,o.height=n||480;var a=o.getContext("2d");if(!a)throw new Error("SpriteCanvas canvas is not supported");console.log("SpriteCanvas 2d inited"),r.color="#000000",r.canvas=o,r.context=a,r.alpha=1,r.filter=new Map,this.filter("brightness",0),this.filter("contrast",0)}return o(t,null,[{key:"support",value:function(){var t=document.createElement("canvas");return t.getContext("2d")?!0:!1}}]),o(t,[{key:"filter",value:function(t,e){var n=l(this);return Number.isFinite(e)?("brightness"==t&&(e+=1),"contrast"==t&&(e+=1),n.filter.get(t)!=e&&!function(){n.filter.set(t,e);var r=[];n.filter.forEach(function(t,e,n){r.push(e+"("+t+")")}),r=r.join(" "),n.canvas.style.filter=r,n.canvas.style.webkitFilter=r}(),void 0):n.filter.get(t)}},{key:"drawImage",value:function(){var t=l(this);t.context.globalAlpha=this.alpha,t.context.drawImage.apply(t.context,arguments)}},{key:"release",value:function(){}},{key:"clear",value:function(){var t=l(this);t.context.fillStyle=t.color,t.context.fillRect(0,0,this.width,this.height)}},{key:"color",get:function(){return l(this).color},set:function(t){if(!t.match(/^#([\da-fA-F][\da-fA-F])([\da-fA-F][\da-fA-F])([\da-fA-F][\da-fA-F])$/))throw console.error(t,this),new Error("SpriteCanvas invalid color value");l(this).color=t}},{key:"alpha",get:function(){return l(this).alpha},set:function(t){if(!(Number.isFinite(t)&&t>=0&&1>=t))throw console.error(t,this),new Error("SpriteCanvas got invalid alpha number");l(this).alpha=t}},{key:"width",get:function(){return l(this).canvas.width},set:function(t){if(!(Number.isFinite(t)&&t>0&&1e4>t))throw console.error(t,this),new Error("SpriteCanvas got invalid width number");l(this).canvas.width=t}},{key:"height",get:function(){return l(this).canvas.height},set:function(t){var e=l(this);if(!(Number.isFinite(t)&&t>0&&1e4>t))throw console.error(t,this),new Error("SpriteCanvas got invalid height number");t!=e.canvas.height&&(e.canvas.height=t)}},{key:"canvas",get:function(){return l(this).canvas},set:function(t){throw new Error("SpriteCanvas.canvas cannot write")}}]),t}();e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function v(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:v(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(202),c=r(s),d=n(203),f=r(d),h=c["default"].namespace(),p=function(t){function e(){i(this,e);var t=o(this,Object.getPrototypeOf(e).call(this)),n=h(t);return n.children=[],n.cacheCanvas=null,t}return a(e,t),u(e,[{key:"clearCache",value:function(){h(this).cacheCanvas=null}},{key:"cache",value:function(t,e){var n=h(this);n.cacheCanvas&&this.clearCache();var r=this.parent;this.parent=null;var i=document.createElement("canvas");i.width=t,i.height=e;var o=i.getContext("2d");this.draw(o),n.cacheCanvas=i,this.parent=r}},{key:"hitTest",value:function(t,n){h(this);if(this.cacheCanvas)return l(Object.getPrototypeOf(e.prototype),"hitTest",this).call(this,t,n);var r=[],i=!0,o=!1,a=void 0;try{for(var u,s=this.children[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,d=c.hitTest(t,n);d instanceof Array?r=r.concat(d):d===!0&&r.push(c)}}catch(f){o=!0,a=f}finally{try{!i&&s["return"]&&s["return"]()}finally{if(o)throw a}}return r}},{key:"draw",value:function(t){var e=h(this);if(!(this.alpha<.01||1!=this.visible))if(this.cacheCanvas){var n=this.x,r=this.y;this.x+=e.cacheX,this.y+=e.cacheY,this.drawImage(t,this.cacheCanvas,0,0,this.cacheCanvas.width,this.cacheCanvas.height),this.x=n,this.y=r}else if(this.children.length>0){var i=!0,o=!1,a=void 0;try{for(var u,l=this.children[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;1==s.visible&&s.alpha>=.01&&s.draw(t)}}catch(c){o=!0,a=c}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw a}}}}},{key:"hasChild",value:function(t){return-1!=this.children.indexOf(t)?!0:!1}},{key:"appendChild",value:function(){var t=Array.prototype.slice.call(arguments);if(t.length<=0)throw new Error("SpriteContainer.appendChild got an invalid arguments");var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(a instanceof f["default"]==0)throw console.error(a),new Error("SpriteContainer.appendChild only accept SpriteDisplay or it's sub-class");a.parent=this,this.children.push(a)}}catch(u){n=!0,r=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}this.emit("addedChildren")}},{key:"appendChildAt",value:function(){var t=Array.prototype.slice.call(arguments);if(t.length<=1)throw console.log(arguments,this),new TypeError("SpriteContainer.appendChildAt has an invalid arguments");for(var e=t[0],n=1,r=t.length;r>n;n++){if(t[n]instanceof f["default"]==0)throw console.error(t[n]),new Error("SpriteContainer.appendChildAt only can accept SpriteDisplay or it's sub-class");t[n].parent=this,this.children.splice(e,0,t[n])}this.emit("addedChildren")}},{key:"removeChild",value:function(t){var e=this.children.indexOf(t);return-1!=e?(this.children[e].parent=null,this.children.splice(e,1),this.emit("removedChildren"),!0):!1}},{key:"clear",value:function(){var t=h(this),e=!0,n=!1,r=void 0;try{for(var i,o=t.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.parent=null}}catch(u){n=!0,r=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}t.children=[],this.clearCache(),this.emit("removedChildren")}},{key:"children",get:function(){return h(this).children},set:function(t){throw new Error("SpriteContainer.children readonly")}},{key:"cacheCanvas",get:function(){return h(this).cacheCanvas},set:function(t){throw new Error("SpriteContainer.cacheCanvas readonly")}},{key:"cacheX",get:function(){return h(this).cacheX},set:function(t){throw new Error("SpriteContainer.cacheX readonly")}},{key:"cacheY",get:function(){return h(this).cacheY},set:function(t){throw new Error("SpriteContainer.cacheY readonly")}}]),e}(f["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(202),s=r(l),c=n(203),d=r(c),f=s["default"].namespace(),h=function(t){function e(t,n,r,a,u){i(this,e);var l=o(this,Object.getPrototypeOf(e).call(this)),s=f(l);return s.image=t,s.sx=n,s.sy=r,l.width=a,l.height=u,l}return a(e,t),u(e,[{key:"print",value:function(){console.log(f(this))}},{key:"clone",value:function(){var t=new e(this.image,this.sx,this.sy,this.width,this.height);return t.x=this.x,t.y=this.y,t.parent=this.parent,t}},{key:"draw",value:function(t){this.drawImage(t,this.image,this.sx,this.sy,this.width,this.height)}},{key:"image",get:function(){var t=f(this);return t.image},set:function(t){throw new Error("SpriteFrame.image readonly")}},{key:"sx",get:function(){var t=f(this);return t.sx},set:function(t){throw new Error("SpriteFrame.sx readonly")}},{key:"sy",get:function(){var t=f(this);return t.sy},set:function(t){throw new Error("SpriteFrame.sy readonly")}}]),e}(d["default"]);e["default"]=h},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i={tab:9,enter:13,shift:16,esc:27,space:32,left:37,up:38,right:39,down:40,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122},o=new Map;window.addEventListener("keydown",function(t){t=t||window.event;var e=t.keyCode;o.set(e,!0)}),window.addEventListener("keyup",function(t){t=t||window.event;var e=t.keyCode;o.has(e)&&o["delete"](e)});var a=function(){function t(){n(this,t)}return r(t,null,[{key:"isPressed",value:function(t){if(Number.isFinite(t))return o.has(t)?!0:!1;if("string"==typeof t)return t=i[t],o.has(t)?!0:!1;throw console.error(t),new Error("SpriteInput.isPressed got invalid argument")}},{key:"whenPress",value:function(t,e){if(!e)throw console.error(e),new Error("SpriteInput.whenPress got invalid arguments");window.addEventListener("keypress",function(n){n=n||window.event;var r=n.keyCode,o=!0,a=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,d=i[c];d&&d==r&&e(c)}}catch(f){a=!0,u=f}finally{try{!o&&s["return"]&&s["return"]()}finally{if(a)throw u}}})}},{key:"whenDown",value:function(t,e){if(!e)throw console.error(e),new Error("SpriteInput.whenDown got invalid arguments");window.addEventListener("keydown",function(n){n=n||window.event;var r=n.keyCode,o=!0,a=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,d=i[c];d&&d==r&&e(c)}}catch(f){a=!0,u=f}finally{try{!o&&s["return"]&&s["return"]()}finally{if(a)throw u}}})}},{key:"whenUp",value:function(t,e){if(!e)throw console.error(e),new Error("SpriteInput.whenUp got invalid arguments");window.addEventListener("keyup",function(n){n=n||window.event;var r=n.keyCode,o=!0,a=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,d=i[c];d&&d==r&&e(c)}}catch(f){a=!0,u=f}finally{try{!o&&s["return"]&&s["return"]()}finally{if(a)throw u}}})}}]),t}();e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=null;if(t.match(/js$/))r="js";else if(t.match(/jpg$|jpeg$|png$|bmp$|gif$/i))r="image";else if(t.match(/wav$|mp3$|ogg$/i))r="audio";else{if(!t.match(/json$/i))throw console.error(t),new Error("Fetch got an invalid url");r="json"}var i=function(n){if(s.set(t,n),"json"==r&&(n=l["default"].copy(n)),e&&e(n),c.has(t)){var i=c.get(t),o=!0,a=!1,u=void 0;try{for(var d,f=i[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){var h=d.value;h&&h(n)}}catch(p){a=!0,u=p}finally{try{!o&&f["return"]&&f["return"]()}finally{if(a)throw u}}c["delete"](t)}};if(s.has(t))return void i(s.get(t));if(!n){if(c.has(t))return void c.get(t).push(e);c.set(t,[])}var a=new XMLHttpRequest;switch(a.open("GET",t,!0),a.timeout=1e4,r){case"js":a.responseType="text";break;case"image":a.responseType="arraybuffer";break;case"audio":a.responseType="arraybuffer";break;case"json":a.responseType="json";break;default:throw console.error(r,t),new Error("Fetch something wrong")}"function"!=typeof e&&(e=function(){}),a.ontimeout=function(){if(n>=2)throw console.error(t),alert("资源"+t+"超时没有加载成功！"),new Error("SpriteLoader.Fetch timeout 3 times");console.error("SpriteLoader.Fetch timeout try again, ",n+1," ",t),setTimeout(function(){o(t,e,n+1)},50)};var u=!1;a.onreadystatechange=function(){if(4==a.readyState&&!u)if(u=!0,a.response){if("js"==r){var l=null;try{l=new Function(a.response)}catch(s){throw console.error(a.response,t),s}i(l)}else if("image"==r)!function(){var t=a.response,e=new Image;e.onload=function(){e.onload=null,i(e)},e.src=window.URL.createObjectURL(new window.Blob([t]))}();else if("audio"==r)!function(){var t=a.response,e=new Audio;e.oncanplay=function(){e.oncanplay=null,i(e)},e.src=window.URL.createObjectURL(new window.Blob([t]))}();else if("json"==r){var c=a.response;if(!c)throw console.error(t),new Error("SpriteLoader invalid json");i(c)}}else{if(console.error("url: ",t),console.error("response: ",a.response," readyState: ",a.readyState," status: ",a.status," statusText: ",a.statusText),n>=2)throw console.error(t),alert("资源"+t+"错误没有加载成功！"),new Error("SpriteLoader.Fetch error 3 times");console.error("SpriteLoader.Fetch error try again, ",n+1," ",t),setTimeout(function(){o(t,e,n+1)},50)}},a.send()}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var u=n(202),l=r(u),s=(l["default"].namespace(),new Map),c=new Map,d=function(){function t(){i(this,t)}return a(t,null,[{key:"load",value:function(){var t=Array.prototype.slice.call(arguments);return new Promise(function(e,n){var r=[],i=!0,a=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if("string"==typeof c)r.push(c);else{if(!(c instanceof Array))throw console.error(c,t),new Error("SpriteLoader.load got invalid argument");var d=!0,f=!1,h=void 0;try{for(var p,v=c[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var y=p.value;r.push(y)}}catch(w){f=!0,h=w}finally{try{!d&&v["return"]&&v["return"]()}finally{if(f)throw h}}}}}catch(w){a=!0,u=w}finally{try{!i&&s["return"]&&s["return"]()}finally{if(a)throw u}}var g=0,m=[];m.length=r.length;var b=function(){g++,g>=m.length&&e(m)};r.forEach(function(t,e){o(t,function(t){m[e]=t,b()})})})}}]),t}();e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e;
}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(202),s=r(l),c=n(203),d=r(c),f=s["default"].namespace(),h=function(t){function e(){i(this,e);var t=o(this,Object.getPrototypeOf(e).call(this)),n=f(t);return n.children=[],t.width=0,t.height=0,n.image=null,t}return a(e,t),u(e,[{key:"clone",value:function(){var t=f(this),n=new e;return f(n).children=t.children.slice(),f(n).image=t.image,n.width=this.width,n.height=this.height,n.x=this.x,n.y=this.y,n.centerX=this.centerX,n.centerY=this.centerY,n}},{key:"clear",value:function(){var t=f(this);return t.children=[],this.width=0,this.height=0,this.generate(),this}},{key:"makeConfig",value:function(t,e){if(e)for(var n in e)t[n]=e[n];var r=[];for(var n in t)r.push(n+'="'+t[n]+'"');return r.join(" ")}},{key:"rect",value:function(t){var e=f(this),n={x:0,y:0,width:10,height:10,stroke:"black","stroke-width":1,fill:"white","fill-opacity":1,"stroke-opacity":1,opacity:1};e.children.push("<rect "+this.makeConfig(n,t)+" />"),n.x+n.width>this.width&&(this.width=n.x+n.width),n.y+n.height>this.height&&(this.height=n.y+n.height),this.generate()}},{key:"circle",value:function(t){var e=f(this),n={cx:10,cy:10,r:10,stroke:"black","stroke-width":1,fill:"white","fill-opacity":1,"stroke-opacity":1,opacity:1};e.children.push("<circle "+this.makeConfig(n,t)+" />"),n.cx+n.r>this.width&&(this.width=n.cx+n.r),n.cy+n.r>this.height&&(this.height=n.cy+n.r),this.generate()}},{key:"ellipse",value:function(t){var e=f(this),n={cx:10,cy:10,rx:5,ry:10,stroke:"black","stroke-width":1,fill:"white","fill-opacity":1,"stroke-opacity":1,opacity:1};e.children.push("<ellipse "+this.makeConfig(n,t)+" />"),n.cx+n.rx>this.width&&(this.width=n.cx+n.rx),n.cy+n.ry>this.height&&(this.height=n.cy+n.ry),this.generate()}},{key:"line",value:function(t){var e=f(this),n={x1:10,y1:10,x2:20,y2:20,stroke:"black","stroke-width":1,"stroke-opacity":1,opacity:1};e.children.push("<line "+this.makeConfig(n,t)+" />"),Math.max(n.x1,n.x2)>this.width&&(this.width=Math.max(n.x1,n.x2)),Math.max(n.y1,n.y2)>this.height&&(this.height=Math.max(n.y1,n.y2)),this.generate()}},{key:"polyline",value:function(t){var e=f(this),n={points:"20, 20, 30, 20, 30, 30, 20, 30",stroke:"black","stroke-width":1,fill:"white","fill-opacity":1,"stroke-opacity":1,opacity:1};e.children.push("<polyline "+this.makeConfig(n,t)+" />");var r=-1;n.points.split(/, /).forEach(function(t){var e=parseInt(t);!isNaN(e)&&e>r&&(r=e)}),-1!=r&&r>this.width&&(this.width=r),-1!=r&&r>this.height&&(this.height=r),this.generate()}},{key:"polygon",value:function(t){var e=f(this),n={points:"20,20 30,20 30,30 20,30",stroke:"black","stroke-width":1,fill:"white","fill-opacity":1,"stroke-opacity":1,opacity:1};e.children.push("<polyline "+this.makeConfig(n,t)+" />");var r=-1,i=-1;n.points.split(/,| /).forEach(function(t,e){var n=parseInt(t);e%2==0?n>r&&(r=n):n>i&&(i=n)}),r>0&&r>this.width&&(this.width=r),i>0&&i>this.height&&(this.height=i),this.generate()}},{key:"generate",value:function(){var t=this,e=f(this),n='<?xml version="1.0"?>\n<svg width="'+this.width+'" height="'+this.height+'" '+('style="width: '+this.width+"px; height: "+this.height+'px;" ')+'xmlns="http://www.w3.org/2000/svg" version="1.1">\n',r=!0,i=!1,o=void 0;try{for(var a,u=e.children[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;n+="  "+l+"\n"}}catch(s){i=!0,o=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}n+="</svg>";var c=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),d=window.URL.createObjectURL(c),h=new Image;h.src=d;var p=function(){e.image=h,window.URL.revokeObjectURL(d),t.emit("change")};h.complete?p():h.onload=p}},{key:"draw",value:function(t){var e=f(this),n=e.image;n instanceof Image&&n.width>0&&n.height>0&&this.drawImage(t,n,0,0,n.width,n.height,0,0,n.width,n.height)}}]),e}(d["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(202),c=r(s),d=n(203),f=r(d),h=n(207),p=r(h),v=c["default"].namespace(),y=function(t){function e(t){o(this,e);var n=a(this,Object.getPrototypeOf(e).call(this)),r=v(n);if(!t.images||!t.images.length||!Number.isFinite(t.width)||t.width<=0||t.width>4096||!Number.isFinite(t.height)||t.height<=0||t.height>4096)throw console.error(t),new Error("SpriteSheet.constructor get invalid arguments");r.images=t.images,r.tilewidth=t.width,n.width=t.width,r.tileheight=t.height,n.height=t.height,r.animations=t.animations||{},r.currentAnimation=null,r.currentFrame=0,r.animationTimer=null,r.frameCount=0;var i=!0,u=!1,l=void 0;try{for(var s,c=r.images[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var d=s.value;if(!(d instanceof Image||d.getContext&&d.getContext("2d")))throw console.error(d,r,n),new Error("SpriteSheet got invalid image, not Image or Canvas");if(d.width<=0||!Number.isFinite(d.width)||d.height<=0||!Number.isFinite(d.height))throw console.error(d,r,n),new Error("SpriteSheet got invalid image, invalid width or height");var f=Math.floor(d.width/r.tilewidth),h=Math.floor(d.height/r.tileheight);r.frameCount+=f*h}}catch(p){u=!0,l=p}finally{try{!i&&c["return"]&&c["return"]()}finally{if(u)throw l}}return n}return u(e,t),l(e,[{key:"clone",value:function(){var t=v(this),n=new e({images:t.images,width:t.tilewidth,height:t.tileheight,animations:t.animations});return n.x=this.x,n.y=this.y,n.centerX=this.centerX,n.centerY=this.centerY,n.play(this.currentFrame),n.alpha=this.alpha,n.visible=this.visible,n}},{key:"play",value:function(t){var e=this,n=v(this);if(n.animationTimer&&(clearInterval(n.animationTimer),n.animationTimer=null),Number.isInteger(t))n.currentFrame=t,this.emit("change");else{if("string"!=typeof t)throw console.error(t,v(this).animations,this),new Error("SpriteSheet.play has an invalid argument");var r=function(){var r=n.animations[t];if(!r)throw console.error(r,n.animations,t),new Error("SpriteSheet.play invalid animation");if(Number.isFinite(r))return n.currentAnimation=t,{v:e.play(r)};var i=null,o=null,a=null,u=null;if(r instanceof Array?(i=r[0],o=r[1],a=r[2],u=r[3]):r.frames&&r.frames instanceof Array&&(i=r.frames[0],o=r.frames[r.frames.length-1],a=r.next,u=r.speed),!Number.isFinite(i)||0>i||i>=n.frameCount||!Number.isFinite(o)||0>o||o>=n.frameCount||!Number.isFinite(u)||0>=u)throw console.error(i,o,u,e),new Error("SpriteSheet.play Invalid animation data");n.currentAnimation=t,n.currentFrame=i,e.emit("change"),n.animationTimer=setInterval(function(){n.currentFrame++,n.currentFrame>o&&(clearInterval(n.animationTimer),n.animationTimer=null,a&&a.length&&n.animations[a]?e.play(a):n.currentFrame--,e.emit("animationend")),e.emit("change")},u)}();if("object"===("undefined"==typeof r?"undefined":i(r)))return r.v}}},{key:"getFrame",value:function(t){var e=v(this);if(Number.isInteger(t)||(t=e.currentFrame),0>t||t>=e.frameCount)throw console.error(t,e,this),new Error("SpriteSheet.getFrame index out of range");var n=null,r=!0,i=!1,o=void 0;try{for(var a,u=e.images[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value,s=Math.floor(l.width/e.tilewidth),c=Math.floor(l.height/e.tileheight);if(s*c>t){var d=Math.floor(t/s),f=t-s*d;n=new p["default"](l,f*e.tilewidth,d*e.tileheight,e.tilewidth,e.tileheight),n.parent=this;break}t-=s*c}}catch(h){i=!0,o=h}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}if(!n)throw console.error(t,e,this),new Error("SpriteSheet.getFrame unknown error");return n}},{key:"draw",value:function(t){if(!(0==this.visible||this.alpha<=.01)){var e=(v(this),this.getFrame(this.currentFrame));if(!e||!e.image)throw console.error(e,this.currentFrame,this),new Error("SpriteSheet.draw invalid frame");e.draw(t)}}},{key:"paused",get:function(){var t=v(this);return t.animationTimer?!1:!0},set:function(t){throw new Error("SpriteSheet.paused readonly")}},{key:"currentFrame",get:function(){var t=v(this);return t.currentFrame},set:function(t){throw new Error("SpriteSheet.currentFrame readonly")}},{key:"currentAnimation",get:function(){var t=v(this);return t.currentAnimation},set:function(t){throw new Error("SpriteSheet.currentAnimation readonly")}}]),e}(f["default"]);e["default"]=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(202),s=r(l),c=n(206),d=r(c),f=n(205),h=r(f),p=n(213),v=r(p),y=s["default"].namespace(),w=function(t){function e(t,n){i(this,e);var r=o(this,Object.getPrototypeOf(e).call(this)),a=y(r);if(!a.renderer&&v["default"].support()&&(a.renderer=new v["default"](t,n),a.rendererType="webgl"),!a.renderer&&h["default"].support()&&(a.renderer=new h["default"](t,n),a.rendererType="canvas"),!a.renderer)throw new Error("SpriteStage all renderer not support");return a.color="#000000",r}return a(e,t),u(e,[{key:"releaseRenderer",value:function(){y(this).renderer.release()}},{key:"filter",value:function(t,e){return y(this).renderer.filter(t,e)}},{key:"findHit",value:function(t){var e=this.hitTest(this.mouseX,this.mouseY);return e.reverse(),e.length?e:null}},{key:"clear",value:function(){y(this).renderer.clear()}},{key:"update",value:function(){this.emit("beforeDraw"),this.draw(this.renderer),this.emit("afterDraw")}},{key:"draw",value:function(t){if(this.children.length<=0)return!1;this.clear();var e=!0,n=!1,r=void 0;try{for(var i,o=this.children[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.draw(t)}}catch(u){n=!0,r=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},{key:"renderer",get:function(){return y(this).renderer},set:function(t){throw new Error("SpriteStage renderer readonly")}},{key:"rendererType",get:function(){return y(this).rendererType},set:function(t){throw new Error("SpriteStage.rendererType readonly")}},{key:"width",get:function(){return y(this).renderer.width},set:function(t){y(this).renderer.width=t}},{key:"height",get:function(){return y(this).renderer.height},set:function(t){y(this).renderer.height=t}},{key:"color",get:function(){return y(this).renderer.color},set:function(t){y(this).renderer.color=t}},{key:"canvas",get:function(){return this.renderer.canvas},set:function(t){throw new Error("SpriteStage.canvas readonly")}}]),e}(d["default"]);e["default"]=w},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){return t>0&&0===(t-1&t)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var u=n(202),l=r(u),s=l["default"].namespace(),c="\nprecision mediump float;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\n\nattribute vec2 aVertex;\nuniform vec2 resolution;\n\nuniform vec4 position;\n\nvoid main(void) {\n   vec2 a = aVertex * (position.zw / resolution) + (position.xy / resolution);\n   vec2 b = a * 2.0 - 1.0;\n\n   gl_Position = vec4(b * vec2(1.0, -1.0), 0.0, 1.0);\n   v_texCoord = a_texCoord;\n}",d="\nprecision mediump float;\n\nuniform vec4 crop;\nuniform float brightness;\nuniform float alpha;\nuniform float contrast;\n\nuniform sampler2D image;\n\n// the texCoords passed in from the vertex shader.\nvarying vec2 v_texCoord;\n\nvoid main(void) {\n\n  vec2 t = v_texCoord;\n  t.x *= crop.z;\n  t.y *= crop.w;\n  t += crop.xy;\n\n   vec4 color = texture2D(image, t).rgba;\n\n   if (contrast != 0.0) {\n     if (contrast > 0.0) {\n       color.xyz = (color.xyz - 0.5) / (1.0 - contrast) + 0.5;\n     } else {\n       color.xyz = (color.xyz - 0.5) * (1.0 + contrast) + 0.5;\n     }\n   }\n\n   if (brightness != 0.0) {\n     color.xyz += brightness;\n   }\n\n   if (alpha != 1.0) {\n     color.a *=  alpha;\n   }\n\n   gl_FragColor = color;\n}",f=function(){function t(e,n){i(this,t);var r=s(this),o=document.createElement("canvas");o.width=e||640,o.height=n||480;var a={antialias:!1,preserveDrawingBuffer:!0},u=o.getContext("webgl",a);if(u||(u=o.getContext("experimental-webgl",a)),r.gl=u,!u)throw new Error("SpriteWebgl webgl is not supported");r.color=[0,0,0],r.filter=new Map,r.textureCache=new Map,r.canvas=o,r.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),u.viewport(0,0,o.width,o.height);var l=u.createShader(u.VERTEX_SHADER),f=u.createShader(u.FRAGMENT_SHADER);u.shaderSource(l,c),u.shaderSource(f,d),u.compileShader(l),u.compileShader(f);var h=u.createProgram();u.attachShader(h,l),u.attachShader(h,f),u.linkProgram(h),u.useProgram(h),u.cullFace(u.BACK),u.frontFace(u.CW),u.enable(u.CULL_FACE),u.enable(u.BLEND),u.disable(u.DEPTH_TEST),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),r.cropLoc=u.getUniformLocation(h,"crop"),r.brightnessLoc=u.getUniformLocation(h,"brightness"),r.contrastLoc=u.getUniformLocation(h,"contrast"),r.alphaLoc=u.getUniformLocation(h,"alpha"),r.resolutionLoc=u.getUniformLocation(h,"resolution"),u.uniform2f(r.resolutionLoc,o.width,o.height),r.positionLoc=u.getUniformLocation(h,"position"),r.tLoc=u.getAttribLocation(h,"a_texCoord"),u.enableVertexAttribArray(r.tLoc),r.texCoordBuffer=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,r.texCoordBuffer),u.vertexAttribPointer(r.tLoc,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),u.STATIC_DRAW),r.vLoc=u.getAttribLocation(h,"aVertex"),u.enableVertexAttribArray(r.vLoc),r.vertexBuff=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,r.vertexBuff),u.bufferData(u.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),u.STATIC_DRAW),u.enableVertexAttribArray(r.vLoc),u.vertexAttribPointer(r.vLoc,2,u.FLOAT,!1,0,0),r.currentTexture=null,this.filter("brightness",0),this.filter("contrast",0),this.alpha=1,console.log("SpriteWebgl inited, max texture size: %d",u.getParameter(u.MAX_TEXTURE_SIZE))}return a(t,null,[{key:"support",value:function(){var t=document.createElement("canvas");return t.getContext("webgl")||t.getContext("experimental-webgl")?!0:!1}}]),a(t,[{key:"drawImage9",value:function(t,e,n,r,i,o,a,u,l){var c=s(this),d=c.gl,f=this.createTexture(d,t);c.currentTexture!=f&&(d.bindTexture(d.TEXTURE_2D,f),c.currentTexture=f),d.uniform4f(c.cropLoc,e/t.width,n/t.height,r/t.width,i/t.height),d.uniform4f(c.positionLoc,o,a,u,l),d.drawArrays(d.TRIANGLE_FAN,0,4)}},{key:"release",value:function(){var t=s(this),e=!0,n=!1,r=void 0;try{for(var i,o=t.textureCache.values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;t.gl.deleteTexture(a)}}catch(u){n=!0,r=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}t.textureCache=new Map}},{key:"createTexture",value:function(t,e){var n=s(this);if(n.textureCache.has(e))return n.textureCache.get(e);t.activeTexture(t.TEXTURE0);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),o(e.width)&&o(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,null),n.textureCache.set(e,r),r}},{key:"drawImage",value:function(t,e,n,r,i,o,a,u,l){if(9==arguments.length);else if(5==arguments.length)o=e,a=n,u=r,l=i,e=0,n=0,r=t.width,i=t.height;else{if(3!=arguments.length)throw console.error(arguments,this),new Error("SpriteWebgl.drawImage invalid arguments");o=e,a=n,u=t.width,l=t.height,e=0,n=0,r=t.width,i=t.height}this.drawImage9(t,e,n,r,i,o,a,u,l)}},{key:"filter",value:function(t,e){var n=s(this),r=n.gl;return Number.isFinite(e)?(n.filter.set(t,e),r.uniform1f(n.brightnessLoc,n.filter.get("brightness")),r.uniform1f(n.contrastLoc,n.filter.get("contrast")),void 0):n.get(t)}},{key:"clear",value:function(){var t=s(this),e=t.gl,n=t.color;e.clearColor(n[0],n[1],n[2],1),e.clear(e.COLOR_BUFFER_BIT)}},{key:"alpha",get:function(){var t=s(this);return t.alpha},set:function(t){var e=s(this),n=e.gl;if(!(Number.isFinite(t)&&!isNaN(t)&&t>=0&&1>=t))throw console.error(t,this),new Error("SpriteWebgl got invalid alpha number");t!=e.alpha&&(e.alpha=t,n.uniform1f(e.alphaLoc,e.alpha))}},{key:"color",get:function(){var t=s(this),e=t.color,n=e[0].toString(16),r=e[1].toString(16),i=e[2].toString(16);return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),"#"+n+r+i},set:function(t){var e=s(this),n=t.match(/^#([\da-fA-F][\da-fA-F])([\da-fA-F][\da-fA-F])([\da-fA-F][\da-fA-F])$/);if(!n)throw console.error(t,this),new Error("SpriteWebgl.color invalid color format");var r=n[1],i=n[2],o=n[3];e.color[0]=parseInt(r,16),e.color[1]=parseInt(i,16),e.color[2]=parseInt(o,16)}},{key:"width",get:function(){var t=s(this);return t.canvas.width},set:function(t){var e=s(this);if(!(Number.isFinite(t)&&!isNaN(t)&&t>0&&4096>=t))throw console.error(t,this),new Error("SpriteWebgl got invalid width number");t!=e.canvas.width&&(e.canvas.width=t,e.gl.viewport(0,0,e.canvas.width,e.canvas.height),e.gl.uniform2f(e.resolutionLoc,e.canvas.width,e.canvas.height))}},{key:"height",get:function(){var t=s(this);return t.canvas.height},set:function(t){var e=s(this);if(!(Number.isFinite(t)&&!isNaN(t)&&t>0&&4096>=t))throw console.error(t,this),new Error("SpriteWebgl got invalid height number");t!=e.canvas.height&&(e.canvas.height=t,e.gl.viewport(0,0,e.canvas.width,e.canvas.height),e.gl.uniform2f(resolutionLoc,e.canvas.width,e.canvas.height))}},{key:"canvas",get:function(){return s(this).canvas},set:function(t){throw console.error(t,this),new Error("SpriteWebgl.canvas cannot write")}}]),t}();e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(202),s=r(l),c=n(203),d=r(c),f=s["default"].namespace(),h=document.createElement("canvas");h.width=1,h.height=1;var p=h.getContext("2d"),v=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this)),r=f(n);return r.text=t.text||"Invalid Text",r.maxWidth=t.maxWidth||1e3,r.color=t.color||"black",r.fontSize=t.fontSize||14,r.fontFamily=t.fontFamily||"Ariel",r.image=null,n.generate(),n}return a(e,t),u(e,[{key:"clone",value:function(){var t=f(this),n=new e({text:t.text,maxWidth:t.maxWidth,color:t.color,fontSize:t.fontSize,fontFamily:t.fontFamily});return n.x=this.x,n.y=this.y,n.centerX=this.centerX,n.centerY=this.centerY,n.alpha=this.alpha,n.visible=this.visible,n}},{key:"generate",value:function(){var t=f(this);p.font=this.fontSize+"px "+t.fontFamily;var e=Math.ceil(1.2*p.measureText("龍").width);this.width=0;for(var n=[],r="",i=0,o=this.text.length;o>i;i++)p.measureText(r+this.text[i]).width>this.maxWidth?(n.push(r),r=this.text[i]):r+=this.text[i],p.measureText(r).width>this.width&&(this.width=Math.ceil(p.measureText(r).width));r.length&&n.push(r),this.height=n.length*e;var a=document.createElement("canvas");a.width=this.width,a.height=this.height;var u=a.getContext("2d");u.font=this.fontSize+"px "+this.fontFamily,u.fillStyle=this.color,u.textAlign="center",u.textBaseline="top",n.forEach(function(t,n){u.fillText(t,a.width/2,n*e)}),t.image=null,t.image=a}},{key:"draw",value:function(t){var e=f(this),n=e.image;n&&n.width>0&&n.height>0&&this.drawImage(t,n,0,0,n.width,n.height)}},{key:"text",get:function(){var t=f(this);return t.text},set:function(t){var e=f(this);t!=this.text&&(e.text=t,this.generate())}},{key:"color",get:function(){var t=f(this);return t.color},set:function(t){var e=f(this);t!=this.color&&(e.color=t,this.generate())}},{key:"fontSize",get:function(){var t=f(this);return t.fontSize},set:function(t){var e=f(this);t!=this.fontSize&&(e.fontSize=t,this.generate())}},{key:"fontFamily",get:function(){return f(this).fontFamily},set:function(t){var e=f(this);t!=e.fontFamily&&(e.fontFamily=t,this.generate())}}]),e}(d["default"]);e["default"]=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(202),s=r(l),c=n(204),d=r(c),f=(s["default"].namespace(),0),h=function(t){function e(){i(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));return t.tick(),t}return a(e,t),u(e,[{key:"tick",value:function(){var t=this;f++,this.emit("tick",!1,f),window.requestAnimationFrame(function(){t.tick()})}},{key:"after",value:function(t,e){var n=this,r=0,i=this.on("tick",function(){r++,r>=t&&(n.off("tick",i),e&&e())});return i}},{key:"clearAfter",value:function(t){this.off("tick",t)}},{key:"whiles",value:function(t,e){var n=this,r=0,i=this.on("tick",function(){r++,r>=t?(e&&e(!0),n.off("tick",i)):e&&e(!1)});return i}},{key:"clearWhiles",value:function(t){this.off("tick",t)}}]),e}(d["default"]),p=new h;e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(202),s=r(l),c=n(204),d=r(c),f=s["default"].namespace(),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this)),r=f(n);return r.object=t,r.callback=null,r.action=[],r.doing=!1,n}return a(e,t),u(e,null,[{key:"get",value:function(t){return new e(t)}}]),u(e,[{key:"nextAction",value:function(){var t=f(this);if(0==t.doing&&t.action.length>0){var e=t.action[0];switch(t.action.splice(0,1),e.type){case"to":this.toAction(e.attributes,e.time);break;case"wait":this.waitAction(e.time);break;case"call":this.callAction(e.callback);break;case"promise":this.promiseAction(e.callback);break;default:throw console.error(e),new Error("SpriteTween got invalid action")}}}},{key:"toAction",value:function(t,e){var n=this,r=f(this);r.doing=!0;var i=Math.min(100,e),o=e/i,a={};for(var u in t)Number.isFinite(t[u])&&(a[u]=t[u]-r.object[u],a[u]/=i);var l=0,s=setInterval(function(){if(l++,l>=i){for(var e in t)r.object[e]=t[e];clearInterval(s),r.doing=!1,n.nextAction()}else for(var e in a)r.object[e]+=a[e]},o)}},{key:"to",value:function(t,e){return f(this).action.push({type:"to",attributes:t,time:e}),this.nextAction(),this}},{key:"promiseAction",value:function(t){var e=this;this.doing=!0,t().then(function(){e.doing=!1,e.nextAction()})}},{key:"promise",value:function(t){return f(this).action.push({type:"promise",callback:t}),this.nextAction(),this}},{key:"callAction",value:function(t){this.doing=!0,t(),this.doing=!1,this.nextAction()}},{key:"call",value:function(t){return f(this).action.push({type:"call",callback:t}),this.nextAction(),this}},{key:"waitAction",value:function(t){var e=this,n=f(this);n.doing=!0,setTimeout(function(){n.doing=!1,e.nextAction()},t)}},{key:"wait",value:function(t){return f(this).action.push({type:"wait",time:t}),this.nextAction(),this}}]),e}(d["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(199),s=r(l),c=n(198),d=r(c),f=n(218),h=r(f),p=n(219),v=r(p),y=s["default"].Util.namespace(),w=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this)),r=y(n);if(r.data=t,n.makeInfoBox(),n.data.image instanceof Array)n.init(n.data.image);else{if("string"!=typeof n.data.image)throw console.error(n.id,n.data,n.data.image,n),new Error("Invalid Actor Image");s["default"].Loader.load("actor/"+n.data.image).then(function(t){n.init(t)})}return n}return a(e,t),u(e,null,[{key:"load",value:function(t){return new Promise(function(e,n){s["default"].Loader.load("actor/"+t+".js").then(function(n){var r=n[0]();r.id=t;var i=null;if("npc"==r.type)i=new d["default"].ActorNPC(r);else if("monster"==r.type)i=new d["default"].ActorMonster(r);else if("ally"==r.type)i=new d["default"].ActorAlly(r);else{if("pet"!=r.type)throw console.error(r.type,r),new Error("Game.Actor.load invalid actor type");i=new d["default"].ActorPet(r)}i.on("complete",function(){e(i)})})})}}]),u(e,[{key:"init",value:function(t){var e=this,n=y(this),r=n.data,i=!0,o=!1,a=void 0;try{for(var u,l=t[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value;if(!(c instanceof Image||c.getContext&&c.getContext("2d")))throw console.error(c,t,this),new Error("Game.Actor got invalid image, not Image or Canvas")}}catch(f){o=!0,a=f}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw a}}var p=new s["default"].Sheet({images:t,width:r.tilewidth,height:r.tileheight,animations:r.animations});if(!Number.isInteger(r.centerX)||!Number.isInteger(r.centerY))throw console.log(r),new Error("Game.Actor invalid centerX/centerY");p.centerX=r.centerX,p.centerY=r.centerY,p.play("facedown"),n.sprite=p,p.on("change",function(){n.infoBox.x=p.x,n.infoBox.y=p.y-p.centerY-20});var v=-1,w=function(){v++,v>=0&&(e.calculate(),e.refreshBar(),e.emit("complete",!0))};if(r.quest&&(n.quest=[],n.quest.length=r.quest.length,r.quest.forEach(function(t,e){v--,h["default"].load(t).then(function(t){n.quest.push(t),w()})})),r.skills&&r.skills.forEach(function(t){v--,d["default"].Skill.load(t).then(function(){w()})}),r.equipment)for(var g in r.equipment){var m=r.equipment[g];m&&(v--,d["default"].Item.load(m).then(function(){w()}))}if(r.items)for(var m in r.items)v--,d["default"].Item.load(m).then(function(){w()});w()}},{key:"popup",value:function(t){(0,v["default"])(this.sprite,t,0,-50)}},{key:"makeInfoBox",value:function(){var t=y(this),e=new s["default"].Text({text:t.data.name,maxWidth:200,color:"white",fontSize:12});if(e.centerY=Math.floor(e.height/2),e.centerX=Math.floor(e.width/2),e.x=0,e.y=0,t.infoBox=new s["default"].Container,"hero"!=t.data.type){var n=new s["default"].Shape;n.centerX=15,n.centerY=2,n.x=0,n.y=9;var r=new s["default"].Shape;r.centerX=15,r.centerY=2,r.x=0,r.y=12,n.rect({x:0,y:0,width:30,height:3,"fill-opacity":0}),r.rect({x:0,y:0,width:30,height:3,"fill-opacity":0}),t.hpbar=new s["default"].Shape,t.hpbar.centerX=15,t.hpbar.centerY=2,t.hpbar.x=0,t.hpbar.y=9,t.mpbar=new s["default"].Shape,t.mpbar.centerX=15,t.mpbar.centerY=2,t.mpbar.x=0,t.mpbar.y=12,t.infoBox.appendChild(e,n,r,t.hpbar,t.mpbar)}}},{key:"calculate",value:function(){var t=y(this).data;t.$str&&t.$dex&&t.$con&&t.$int&&t.$cha&&(t.str=t.$str,t.dex=t.$dex,t.con=t.$con,t["int"]=t.$int,t.cha=t.$cha,t.$hp=5*t.con,t.$sp=5*t["int"],t.atk=Math.floor(.25*t.str),t.matk=Math.floor(.25*t["int"]),t.def=0,t.mdef=0,t.critical=.005*t.dex,t.dodge=.005*t.dex,t.hp=t.$hp,t.sp=t.$sp,t.buff&&t.nerf&&(t.buff.forEach(function(t){}),t.nerf.forEach(function(t){})));
}},{key:"refreshBar",value:function(){var t=y(this);if(t.hpbar&&t.mpbar){var e="green";this.data.hp/this.data.$hp<.25?e="red":this.data.hp/this.data.$hp<.5&&(e="yellow"),t.hpbar.clear().rect({x:1,y:1,width:Math.floor(this.data.hp/this.data.$hp*28),height:2,fill:e,"stroke-width":0}),t.mpbar.clear().rect({x:1,y:1,width:Math.floor(this.data.sp/this.data.$sp*28),height:2,fill:"blue","stroke-width":0})}}},{key:"distance",value:function(){var t=null,e=null;if(2==arguments.length&&Number.isFinite(arguments[0])&&Number.isFinite(arguments[1]))t=arguments[0],e=arguments[1];else{if(1!=arguments.length||!Number.isFinite(arguments[0].x)||!Number.isFinite(arguments[0].y))throw console.error(arguments),new Error("Game.Actor.distance Invalid arguments");t=arguments[0].x,e=arguments[0].y}var n=0;return n+=Math.pow(this.x-t,2),n+=Math.pow(this.y-e,2),n=Math.sqrt(n)}},{key:"decreaseHP",value:function(t){this.data.hp-=t,this.refreshBar()}},{key:"decreaseSP",value:function(t){this.data.sp-=t,this.refreshBar()}},{key:"dead",value:function(t){var e=this;this.data.hp<=0&&("hero"==this.data.type?d["default"].windows.over.open("你被"+t.data.name+"打死了"):!function(){e.erase(),d["default"].area.actors["delete"](e);var n=e.data.items||{gold:1};d["default"].addBag(e.x,e.y).then(function(t){for(var e in n)t.inner.hasOwnProperty(e)?t.inner[e]+=n[e]:t.inner[e]=n[e]}),t.emit("kill",!1,e)}())}},{key:"flash",value:function(){var t=this;this.sprite.alpha=.5,s["default"].Ticker.after(10,function(){t.sprite.alpha=1})}},{key:"damage",value:function(t,e){this.emit("damaged");var n=e.power,r=e.type,i="white";"hero"==this.data.type&&(i="red"),"normal"==r?(n+=t.data.atk,n-=this.data.def,n=Math.max(0,n)):(n+=t.data.matk,n-this.data.mdef,n=Math.max(0,n));var o=null,a=null;Math.random()<this.data.dodge?(a="dodge",o=new s["default"].Text({text:"miss",color:i,fontSize:16})):Math.random()<t.data.critical?(a="critical",n*=2,o=new s["default"].Text({text:"-"+n,color:i,fontSize:32}),this.flash(),this.decreaseHP(n)):(a="hit",o=new s["default"].Text({text:"-"+n,color:i,fontSize:16}),this.flash(),this.decreaseHP(n)),"dodge"!=a&&this!=d["default"].hero&&d["default"].sounds.hurt&&(d["default"].sounds.hurt.load(),d["default"].sounds.hurt.volume=.2,d["default"].sounds.hurt.play()),o.centerX=Math.floor(o.width/2),o.centerY=Math.floor(o.height),o.x=this.sprite.x,o.y=this.sprite.y,o.x+=s["default"].Util.rand(-10,10),d["default"].layers.actorLayer.appendChild(o);var u=s["default"].Util.rand(1,3);s["default"].Ticker.whiles(100,function(t){o.y-=u,t&&d["default"].layers.actorLayer.removeChild(o)}),this.dead(t)}},{key:"play",value:function(t,e){Number.isFinite(e)||(e=0),("undefined"==typeof this.animationPriority||1==this.sprite.paused)&&(this.animationPriority=-1),this.data.animations.hasOwnProperty(t)&&e>=this.animationPriority&&t!=this.sprite.currentAnimation&&(this.animationPriority=e,this.sprite.play(t))}},{key:"stop",value:function(){if(this.sprite.currentAnimation&&(this.sprite.paused&&!this.sprite.currentAnimation.match(/face/)||this.sprite.currentAnimation.match(/walk|run/)))switch(this.direction){case"up":this.sprite.play("faceup");break;case"down":this.sprite.play("facedown");break;case"left":this.sprite.play("faceleft");break;case"right":this.sprite.play("faceright")}}},{key:"fire",value:function(t,e){var n=this;if(this.attacking)return 0;var r=d["default"].skills[t];if(!r)return 0;var i=Date.now();return Number.isFinite(this.lastAttack)&&Number.isFinite(this.lastAttackCooldown)&&i-this.lastAttack<this.lastAttackCooldown?0:r.data.cost>this.data.sp?0:(e||(e=this.direction),"hero"==this.type&&r.data.condition&&0==r.data.condition()?0:(this.lastAttack=i,this.lastAttackCooldown=r.data.cooldown,this.attacking=!0,this.going&&(this.going=!1),d["default"].Input.clearDest(),this.data.sp-=r.data.cost,this.refreshBar(),r.fire(this,e,function(t){n.attacking=!1,t.length>0&&t[0].damage(n,r),n.emit("change")}),r.data.cooldown))}},{key:"goto",value:function(t,e,n){var r=this;return new Promise(function(i,o){if(r.going)return r.goingNext=function(){r["goto"](t,e,n).then(i)},!1;var a=r.checkCollision(t,e);if(a)if(r.x==t){if(r.y-e==-1)return r.stop(),r.face("down"),i(),!1;if(r.y-e==1)return r.stop(),r.face("up"),i(),!1}else if(r.y==e){if(r.x-t==-1)return r.stop(),r.face("right"),i(),!1;if(r.x-t==1)return r.stop(),r.face("left"),i(),!1}var u=[];0==r.checkCollision(t,e-1)&&u.push({x:t,y:e-1,after:"down"}),0==r.checkCollision(t,e+1)&&u.push({x:t,y:e+1,after:"up"}),0==r.checkCollision(t-1,e)&&u.push({x:t-1,y:e,after:"right"}),0==r.checkCollision(t+1,e)&&u.push({x:t+1,y:e,after:"left"});var l=!0,s=!1,c=void 0;try{for(var f,h=u[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var p=f.value;p.distance=r.distance(p.x,p.y)}}catch(v){s=!0,c=v}finally{try{!l&&h["return"]&&h["return"]()}finally{if(s)throw c}}u.sort(function(t,e){return t.distance-e.distance}),0==r.checkCollision(t,e)&&u.splice(0,0,{x:t,y:e});var y=0,w=!1,g=function m(){if(y<u.length)!function(){var t=u[y];y++,d["default"].Astar.getPath({x:r.x,y:r.y},t).then(function(e){if(r.gettingPath=!1,r.goingNext){var o=r.goingNext;return r.goingNext=null,r.going=!1,r==d["default"].hero&&d["default"].Input.clearDest(),void o()}if(!r.going){if(e){if(r==d["default"].hero)d["default"].Input.setDest(t.x,t.y);else if(e.length>30)return;return void r.gotoPath(e,n,t.after).then(i)}return m()}})}();else if(0==w){w=!0;var o=[];0==r.checkCollision(t-1,e-1)&&o.push({x:t-1,y:e-1,after:"right"}),0==r.checkCollision(t+1,e-1)&&o.push({x:t+1,y:e-1,after:"left"}),0==r.checkCollision(t-1,e+1)&&o.push({x:t-1,y:e+1,after:"right"}),0==r.checkCollision(t+1,e+1)&&o.push({x:t+1,y:e+1,after:"left"}),0==r.checkCollision(t,e-2)&&o.push({x:t,y:e-2,after:"down"}),0==r.checkCollision(t,e+2)&&o.push({x:t,y:e+2,after:"up"}),0==r.checkCollision(t-2,e)&&o.push({x:t-2,y:e,after:"right"}),0==r.checkCollision(t+2,e)&&o.push({x:t+2,y:e,after:"left"});var a=!0,l=!1,s=void 0;try{for(var c,f=o[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var h=c.value;h.distance=r.distance(h.x,h.y)}}catch(p){l=!0,s=p}finally{try{!a&&f["return"]&&f["return"]()}finally{if(l)throw s}}o.sort(function(t,e){return t.distance-e.distance}),o.length&&(y=0,u=o,m())}};return g()})}},{key:"gotoPath",value:function(t,e,n){var r=this;return new Promise(function(i,o){r.going=!0;var a=1,u=function l(){if(d["default"].paused)return r.stop(),r.going=!1,void(r==d["default"].hero&&d["default"].Input.clearDest());if(r.goingNext){var o=r.goingNext;return r.goingNext=null,r.going=!1,r==d["default"].hero&&d["default"].Input.clearDest(),void o()}if(a<t.length){var u={x:r.x,y:r.y},s=t[a],c=null;if(s.x==u.x?s.y>u.y?c="down":s.y<u.y&&(c="up"):s.y==u.y&&(s.x>u.x?c="right":s.x<u.x&&(c="left")),c){var f=r.direction;c!=f&&(r.stop(),r.face(c)),r.go(e,c).then(function(){l()}),a++}}else n&&(r.stop(),r.face(n)),r==d["default"].hero&&d["default"].Input.clearDest(),r.going=!1,i()};u()})}},{key:"face",value:function(t){var e="face"+t;this.animation!=e&&(this.sprite.play(e),this.emit("change"))}},{key:"checkCollision",value:function(t,e){if(0>t||0>e||t>=d["default"].area.map.data.width||e>=d["default"].area.map.data.height)return!0;if(d["default"].area.map.hitTest(t,e))return!0;if(d["default"].area.actors){var n=!0,r=!1,i=void 0;try{for(var o,a=d["default"].area.actors[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u!=this&&u.hitTest(t,e))return!0}}catch(l){r=!0,i=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}}if(d["default"].area.items){var s=!0,c=!1,f=void 0;try{for(var h,p=d["default"].area.items[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var v=h.value;if(v.hitTest(t,e))return!0}}catch(l){c=!0,f=l}finally{try{!s&&p["return"]&&p["return"]()}finally{if(c)throw f}}}return!1}},{key:"hitTest",value:function(t,e){if(this.data.hitArea&&this.data.hitArea instanceof Array){var n=!0,r=!1,i=void 0;try{for(var o,a=this.data.hitArea[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(t==this.x+u[0]&&e==this.y+u[1])return!0}}catch(l){r=!0,i=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return!1}throw console.error(this.data),new Error("Game.Actor.hitTest invalid data")}},{key:"go",value:function(t,e){var n=this;return new Promise(function(r,i){if(!d["default"].paused&&!(0==n.sprite.paused&&n.sprite.currentAnimation.match(/skillcast|thrust|slash|shoot/)||n.walking||n.attacking)){if(n.direction!=e)return n.walking=!0,n.stop(),n.face(e),void s["default"].Ticker.after(4,function(){n.walking=!1});var o=n.facePosition;0==n.checkCollision(o.x,o.y)&&!function(){n.walking=!0;var i=n.data.x,a=n.data.y;n.data.x=o.x,n.data.y=o.y;var u=[3,3,2,3,3,2,3,3,2,3,3,2];"run"==t&&(u=[4,4,4,4,4,4,4,4]);var l=s["default"].Ticker.whiles(u.length,function(t){if(d["default"].paused)return n.data.x=i,n.data.y=a,n.walking=!1,n.emit("change"),s["default"].Ticker.clearWhiles(l),void r();if(t)n.x=o.x,n.y=o.y,n.walking=!1,n.emit("change"),r();else switch(e){case"up":n.sprite.y-=u.pop();break;case"down":n.sprite.y+=u.pop();break;case"left":n.sprite.x-=u.pop();break;case"right":n.sprite.x+=u.pop()}});n.play(t+e,1)}()}})}},{key:"erase",value:function(){var t=y(this);d["default"].layers.actorLayer.removeChild(this.sprite),d["default"].layers.infoLayer.removeChild(t.infoBox)}},{key:"draw",value:function(){var t=y(this);if(!Number.isInteger(this.x)||!Number.isInteger(this.y))throw console.error(this.data.x,this.data.y,this.data),new Error("Game.Actor.draw invalid data.x/data.y");this.x=this.data.x,this.y=this.data.y,y(this).infoBox.x=this.sprite.x,y(this).infoBox.y=this.sprite.y-this.sprite.centerY-20,d["default"].layers.actorLayer.appendChild(this.sprite),d["default"].layers.infoLayer.appendChild(t.infoBox)}},{key:"focus",value:function(){var t=y(this);t.infoBox.x=this.sprite.x,t.infoBox.y=this.sprite.y-this.sprite.centerY-20,d["default"].stage.centerX=Math.round(this.sprite.x-d["default"].config.width/2),d["default"].stage.centerY=Math.round(this.sprite.y-d["default"].config.height/2)}},{key:"data",get:function(){var t=y(this);return t.data},set:function(t){throw new Error("Game.Actor.data readonly")}},{key:"id",get:function(){return y(this).data.id},set:function(t){throw new Error("Game.Actor.id readonly")}},{key:"type",get:function(){return y(this).data.type},set:function(t){throw new Error("Game.Actor.type readonly")}},{key:"sprite",get:function(){var t=y(this);return t.sprite},set:function(t){throw new Error("Game.Actor.sprite readonly")}},{key:"quest",get:function(){var t=y(this);return t.quest?t.quest:null},set:function(t){throw new Error("Game.Actor.quests readonly")}},{key:"x",get:function(){return this.data.x},set:function(t){if(!Number.isFinite(t)||!Number.isInteger(t))throw console.error(t,y(this),this),new Error("Game.Actor got invalid x, x has to be a number and integer");this.data.x=t,this.sprite.x=32*t+16}},{key:"y",get:function(){return this.data.y},set:function(t){if(!Number.isFinite(t)||!Number.isInteger(t))throw console.error(t,y(this),this),new Error("Game.Actor got invalid y, y has to be a number and integer");this.data.y=t,this.sprite.y=32*t+16}},{key:"visible",get:function(){return this.sprite.visible},set:function(t){this.sprite.visible=t,y(this).infoBox.visible=t}},{key:"alpha",get:function(){return this.sprite.alpha},set:function(t){if(!(Number.isFinite(t)&&t>=0&&1>=t))throw console.error(t,this),new Error("Game.Actor.alpha got invalid value");this.sprite.alpha=t,y(this).infoBox.alpha=t}},{key:"position",get:function(){return{x:this.x,y:this.y}},set:function(t){throw new Error("Game.Actor.position readonly")}},{key:"direction",get:function(){return this.sprite.currentAnimation.match(/up|left|down|right/)[0]},set:function(t){throw new Error("Game.Actor.direction readonly")}},{key:"facePosition",get:function(){var t=this.position;switch(this.direction){case"up":t.y-=1;break;case"down":t.y+=1;break;case"left":t.x-=1;break;case"right":t.x+=1}return t},set:function(t){throw new Error("Game.Actor.facePosition readonly")}}]),e}(s["default"].Event);e["default"]=w},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(199),u=r(a),l=n(198),s=(r(l),u["default"].Util.namespace(),function(){function t(){i(this,t)}return o(t,null,[{key:"load",value:function(t){return new Promise(function(e,n){u["default"].Loader.load("quest/"+t+".js").then(function(n){var r=n[0]();r.id=t,e(r)})})}},{key:"isComplete",value:function(t){if(t.target&&t.target.kill){var e=!0,n=!1,r=void 0;try{for(var i,o=t.target.kill[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(a.current<a.need)return!1}}catch(u){n=!0,r=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}return!0}}]),t}());e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(s.has(t)){var i=s.get(t);l["default"].layers.dialogueLayer.removeChild(i.container),clearInterval(i.timer),s["delete"](t)}var o=new a["default"].Text({text:e,maxWidth:200}),u=o.width,c=o.height,d=Math.round((u+10)/2),f=new a["default"].Shape;f.polygon({points:"0,0 "+(u+10)+",0 "+(u+10)+","+(c+10)+" "+(d+5)+","+(c+10)+" "+d+","+(c+15)+" "+(d-5)+","+(c+10)+" 0,"+(c+10)+" 0,0",fill:"white"});var h=new a["default"].Container;h.appendChild(f,o),o.x=5,o.y=5,h.x=t.x+n,h.y=t.y+r,h.centerX=d,h.centerY=c+15,l["default"].layers.dialogueLayer.appendChild(h),t instanceof a["default"].Event&&t.on("change",function(){h.x=t.x+n,h.y=t.y+r});var p=setTimeout(function(){if(s.has(t)){var e=s.get(t);l["default"].layers.dialogueLayer.removeChild(e.container),s["delete"](t)}},3e3);s.set(t,{container:h,timer:p})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var o=n(199),a=r(o),u=n(198),l=r(u),s=(a["default"].Util.namespace(),new Map)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(199),l=r(u),s=n(198),c=(r(s),n(217)),d=r(c),f=(l["default"].Util.namespace(),function(t){function e(t){return i(this,e),o(this,Object.getPrototypeOf(e).call(this,t))}return a(e,t),e}(d["default"]));e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function m(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:m(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(199),c=r(s),d=n(198),f=r(d),h=n(217),p=r(h),v=n(222),y=r(v),w=c["default"].Util.namespace(),g=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t)),r=w(n);return r.ai=null,r.beAttacking=new Set,n.on("kill",function(t){var e=t.data;n.beAttacking.has(e)&&n.beAttacking["delete"](e),e.data.exp?n.data.exp+=e.data.exp:n.data.exp+=1;var r=!0,i=!1,o=void 0;try{for(var a,u=n.data.currentQuest[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;if(l.target&&l.target.kill){var s=!0,c=!1,d=void 0;try{for(var f,h=l.target.kill[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;e.id==p.id&&p.current<p.need&&p.current++}}catch(v){c=!0,d=v}finally{try{!s&&h["return"]&&h["return"]()}finally{if(c)throw d}}}}}catch(v){i=!0,o=v}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}}),n.on("change",function(){n.whenOnto(),n.whenTouch()}),setInterval(function(){f["default"].paused||(n.whenOnto(),n.whenTouch())},500),n}return a(e,t),u(e,[{key:"hasItem",value:function(t,e){(0==Number.isFinite(e)||0>=e)&&(e=1);for(var n in this.data.items)if(n==t)return this.data.items[n]>=e?!0:!1;return!1}},{key:"hasQuest",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.data.currentQuest[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(t==a.id)return!0}}catch(u){n=!0,r=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}var l=!0,s=!1,c=void 0;try{for(var d,f=this.data.completeQuest[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var a=d.value;if(t==a.id)return!0}}catch(u){s=!0,c=u}finally{try{!l&&f["return"]&&f["return"]()}finally{if(s)throw c}}return!1}},{key:"damage",value:function(t,n){var r=this;l(Object.getPrototypeOf(e.prototype),"damage",this).call(this,t,n);var i=[],o=!0,a=!1,u=void 0;try{for(var s,c=f["default"].area.actors[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value;d!=this&&"monster"==d.data.type&&1==d.distance(this)&&i.push(d)}}catch(h){a=!0,u=h}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw u}}i.length&&!function(){var t=!1,e=r.facePosition;i.forEach(function(n){n.hitTest(e.x,e.y)&&(t=!0)}),0==t&&r["goto"](i[0].x,i[0].y)}()}},{key:"erase",value:function(){var t=w(this);l(Object.getPrototypeOf(e.prototype),"erase",this).call(this),t.ai&&(c["default"].Ticker.off("tick",t.ai),t.ai=null)}},{key:"refreshBar",value:function(){l(Object.getPrototypeOf(e.prototype),"refreshBar",this).call(this),f["default"].windows["interface"].status(this.data.hp/this.data.$hp,this.data.sp/this.data.$sp)}},{key:"draw",value:function(){var t=this,n=w(this);l(Object.getPrototypeOf(e.prototype),"draw",this).call(this),n.ai=c["default"].Ticker.on("tick",function(e){var n=e.data;if(n%16==0){var r=!1;t.data.hp<t.data.$hp&&t.beAttacking.size<=0&&(t.data.hp++,r=!0),t.data.sp<t.data.$sp&&(t.data.sp++,r=!0),r&&(t.refreshBar(),f["default"].windows.status.atop&&f["default"].windows.status.update())}})}},{key:"gotoArea",value:function(t,e,n){var r=w(this);r.beAttacking=new Set,c["default"].Util.timeout(5).then(function(){return f["default"].pause(),f["default"].windows["interface"].hide(),f["default"].windows.stage.hide(),f["default"].windows.loading.begin(),f["default"].windows.loading.update("30%"),c["default"].Util.timeout(5)}).then(function(){return f["default"].clearStage(),f["default"].Area.load(t)}).then(function(t){return f["default"].area=t,f["default"].windows.loading.update("50%"),c["default"].Util.timeout(5)}).then(function(){return f["default"].hero.data.area=t,f["default"].hero.draw(),f["default"].hero.x=e,f["default"].hero.y=n,f["default"].area.actors.add(f["default"].hero),f["default"].area.map.draw(),f["default"].windows.loading.update("80%"),c["default"].Util.timeout(5)}).then(function(){return f["default"].hero.x=e,f["default"].hero.y=n,f["default"].hero.data.time+=60,f["default"].windows.loading.end(),f["default"].windows["interface"].datetime(),f["default"].windows["interface"].refresh(),f["default"].start(),f["default"].windows.loading.update("100%"),c["default"].Util.timeout(5)}).then(function(){f["default"].stage.update(),f["default"].windows.stage.show(),f["default"].windows["interface"].show()})}},{key:"findUnder",value:function(t){var e=this.position,n=null;if(t instanceof Array||t instanceof Set)n=t;else if(t instanceof Map)n=t.values();else{n=[];for(var r in t)n.push(t[r])}var i=!0,o=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;if(s!=this){if(s.hitTest&&s.hitTest(e.x,e.y))return s;if(s.points){var c=!0,d=!1,f=void 0;try{for(var h,p=s.points[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var v=h.value;if(v.x==e.x&&v.y==e.y)return s}}catch(y){d=!0,f=y}finally{try{!c&&p["return"]&&p["return"]()}finally{if(d)throw f}}}else if(Number.isFinite(s.x)&&Number.isFinite(s.y)&&s.x==e.x&&s.y==e.y)return s}}}catch(y){o=!0,a=y}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw a}}return null}},{key:"findFace",value:function(t){var e=this.facePosition,n=null;if(t instanceof Array||t instanceof Set)n=t;else if(t instanceof Map)n=t.values();else{n=[];for(var r in t)n.push(t[r])}var i=!0,o=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;if(s!=this&&s.heroUse){if(s.hitTest&&s.hitTest(e.x,e.y))return s;if(s.points){var c=!0,d=!1,f=void 0;try{for(var h,p=s.points[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var v=h.value;if(v.x==e.x&&v.y==e.y)return s}}catch(y){d=!0,f=y}finally{try{!c&&p["return"]&&p["return"]()}finally{if(d)throw f}}}else if(Number.isFinite(s.x)&&Number.isFinite(s.y)&&s.x==e.x&&s.y==e.y)return s}}}catch(y){o=!0,a=y}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw a}}return null}},{key:"whenOnto",value:function(){if(f["default"].area&&f["default"].area.onto){var t=this.findUnder(f["default"].area.onto);t&&t.execute&&t.execute()}}},{key:"whenTouch",value:function(){if(f["default"].area&&f["default"].area.touch){var t=f["default"].hero.facePosition,e=this.findUnder(f["default"].area.actors)||this.findUnder(f["default"].area.bags)||this.findUnder(f["default"].area.items)||this.findUnder(f["default"].area.touch)||this.findFace(f["default"].area.actors)||this.findFace(f["default"].area.bags)||this.findFace(f["default"].area.items)||this.findFace(f["default"].area.touch);!e&&f["default"].area.map.hitWater(t.x,t.y)&&(e={type:"water",heroUse:function(){(0,y["default"])({"喝水":"drink","钓鱼":"fish"}).then(function(t){switch(t){case"drink":f["default"].hero.popup("drink");break;case"fish":f["default"].hero.popup("fish")}})}}),e?(f["default"].hintObject=e,f["default"].windows["interface"].showUse()):(f["default"].hintObject=null,f["default"].windows["interface"].hideUse())}}},{key:"beAttacking",get:function(){return w(this).beAttacking},set:function(t){throw new Error("Game.hero.beAttacking readonly")}}]),e}(p["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){return new Promise(function(e,n){var r=a["default"].create("choiceWindow");r.css=l["default"],r.html=c["default"],r.show();var i=r.querySelector("#choiceWindowButtonContainer"),o=r.querySelector("#choiceWindowNo"),u=[];Object.keys(t).forEach(function(n){var o=t[n],a=document.createElement("button");a.textContent=u.length+1+". "+n,a.classList.add("brownButton"),i.appendChild(a),u.push(a),a.addEventListener("click",function(){r.hide(),r.destroy(),e(o)})}),o.addEventListener("click",function(){r.hide(),r.destroy(),e(null)}),r.whenUp(["esc"],function(){setTimeout(function(){o.click()},20)}),r.whenUp(["1","2","3","4","5","6","7","8","9"],function(t){var e=parseInt(t)-1,n=u[e];n&&n.click()})})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var o=n(223),a=r(o),u=n(224),l=r(u),s=n(226),c=r(s)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(){var t=window.innerWidth,e=window.innerHeight,n=1,r=0,i=0;if(0==f["default"].config.scale)r=Math.floor((t-f["default"].config.width)/2),i=Math.floor((e-f["default"].config.height)/2);else{var o=f["default"].config.width/f["default"].config.height,a=t,u=a/o;u>e&&(u=e,a=u*o),a=Math.floor(a),u=Math.floor(u),r=Math.floor((t-a)/2),i=Math.floor((e-u)/2),n=Math.min(a/f["default"].config.width,u/f["default"].config.height)}var l=y.style;l.left=r+"px",l.top=i+"px",l.transformOrigin="left top 0",l.webkitTransformOrigin="left top 0",l.transform="scale("+n+", "+n+") translateZ(0)",l.webkitTransform="scale("+n+", "+n+") translateZ(0)",l.filter="none",l.webkitFilter="blur(0px)"}var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(199),c=r(s),d=n(198),f=r(d),h=c["default"].Util.namespace(),p=new Set,v=227,y=document.createElement("div");y.style.width=f["default"].config.width+"px",y.style.height=f["default"].config.height+"px",y.style.position="fixed",document.body.appendChild(y);var w=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this)),r=h(n);return r.id=t,r.css=document.createElement("style"),r.html=document.createElement("div"),r.index=-1,r.elements={},r.html.id="GW"+Math.random().toString(16).substr(2),r.html.classList.add(t),r.html.classList.add("game-window"),r.html.style.display="none",y.appendChild(r.html),document.head.appendChild(r.css),r.html.addEventListener("mousedown",function(t){var e=t.clientX,r=t.clientY,i=null,o=null,a=null;if(y.style.left){var u=y.style.left.match(/(\d+)px/);u&&(i=parseInt(u[1]))}if(y.style.top){var u=y.style.top.match(/(\d+)px/);u&&(o=parseInt(u[1]))}if(y.style.transform){var u=y.style.transform.match(/scale\(([\d\.]+), ([\d\.]+)\)/);a=u?parseFloat(u[1]):1}else a=1;Number.isFinite(i)&&Number.isFinite(o)&&Number.isFinite(a)&&(e-=i,r-=o,e/=a,r/=a,n.emit("mousedown",!1,{x:e,y:r}))}),p.add(n),n}return a(e,t),l(e,null,[{key:"create",value:function(t){var n=new e(t);return n}}]),l(e,[{key:"destroy",value:function(){var t=h(this);this.showing&&this.hide(),t.html&&(t.html.parentNode.removeChild(t.html),t.html=null),t.css&&(document.head.removeChild(t.css),t.css=null),p.has(this)&&p["delete"](this)}},{key:"whenPress",value:function(t,e){var n=this;return c["default"].Input.whenPress(t,function(t){n.atop&&e(t)}),this}},{key:"whenUp",value:function(t,e){var n=this;return c["default"].Input.whenUp(t,function(t){n.atop&&e(t)}),this}},{key:"whenDown",value:function(t,e){var n=this;return c["default"].Input.whenDown(t,function(t){n.atop&&e(t)}),this}},{key:"assign",value:function(t,e){return Object.defineProperty(this,t,{enumerable:!1,configurable:!1,writable:!1,value:e}),this}},{key:"show",value:function(){var t=h(this);if(u(),0==this.showing&&t.html){this.emit("beforeShow");var e=!0,n=!1,r=void 0;try{for(var i,o=p[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.atop&&a.emit("deactive")}}catch(l){n=!0,r=l}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}t.index=v,t.html.style.zIndex=t.index,t.html.style.display="block",v++,this.emit("afterShow"),this.emit("active")}return this}},{key:"hide",value:function(){var t=h(this);if(t.html){this.emit("beforeHide"),t.index=-1,this.emit("afterHide"),this.emit("deactive"),t&&t.html&&(t.html.style.zIndex=t.index,t.html.style.display="none");var e=!0,n=!1,r=void 0;try{for(var i,o=p[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.atop&&a.emit("active")}}catch(u){n=!0,r=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}return this}},{key:"querySelector",value:function(t){return h(this).html.querySelector(t)}},{key:"querySelectorAll",value:function(t){return h(this).html.querySelectorAll(t)}},{key:"appendChild",value:function(t){return h(this).html.appendChild(t),this}},{key:"removeChild",value:function(t){return h(this).html.removeChild(t),this}},{key:"index",get:function(){return h(this).index},set:function(t){throw console.error(this),new Error("GameWindow.index readonly")}},{key:"showing",get:function(){var t=h(this);return t.html&&"none"!=t.html.style.display?!0:!1},set:function(t){throw new Error("GameWindow.showing readonly")}},{key:"atop",get:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=p[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;if(o.showing&&o.index>this.index)return!1}}catch(a){e=!0,n=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}return!0},set:function(t){throw new Error("GameWindow.atop readonly")}},{key:"html",get:function(){return h(this).html.innerHTML},set:function(t){h(this).html.innerHTML=t}},{key:"css",get:function(){return h(this).css.innerHTML},set:function(t){h(this).css.innerHTML=t}},{key:"elements",get:function(){return h(this).elements},set:function(t){throw new Error("GameWindow.elements readonly")}}]),e}(c["default"].Event);e["default"]=w,u(),window.addEventListener("resize",function(){u()})},function(t,e,n){var r=n(225);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".choiceWindow,.choiceWindow div{text-align:center}.choiceWindow button#choiceWindowNo{position:absolute;right:100px;top:50px;width:100px;height:60px;font-size:30px}.choiceWindow #choiceWindowTable button{margin:5px auto;min-width:300px;min-height:60px;font-size:30px;display:block}",""])},function(t,e){t.exports='<div class=window-box><button id=choiceWindowNo class=brownButton>取消</button><div style="width: 100%; height: 100%"><div style="height: 370px; overflow-y: auto; text-align: center"><table id=choiceWindowTable style="width: 100%; height: 370px"><tbody><tr><td id=choiceWindowButtonContainer></table></div></div></div>'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function w(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:w(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(199),c=r(s),d=n(198),f=r(d),h=n(217),p=r(h),v=c["default"].Util.namespace(),y=function(t){
function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t)),r=v(n);return r.ai=null,r.attacking=!1,n}return a(e,t),u(e,[{key:"damage",value:function(t,n){l(Object.getPrototypeOf(e.prototype),"damage",this).call(this,t,n);var r=v(this);0==r.attacking&&this["goto"](t.x,t.y,"walk")}},{key:"erase",value:function(){var t=v(this);l(Object.getPrototypeOf(e.prototype),"erase",this).call(this),t.ai&&(c["default"].Ticker.off("tick",t.ai),t.ai=null)}},{key:"draw",value:function(){var t=this,n=v(this);l(Object.getPrototypeOf(e.prototype),"draw",this).call(this);var r=c["default"].Util.rand(30,60);n.ai=c["default"].Ticker.on("tick",function(e){if(!f["default"].paused){var i=e.data;if(i%20==0){var o=!1;t.data.hp<t.data.$hp&&0==n.attacking&&(t.data.hp++,o=!0),t.data.sp<t.data.$sp&&(t.data.sp++,o=!0),o&&t.refreshBar()}if(n.attacking)i%r==0?f["default"].hero&&t.facePosition.x==f["default"].hero.x&&t.facePosition.y==f["default"].hero.y&&(t.y==f["default"].hero.y?t.x<f["default"].hero.x?t.fire(t.data.skills[0],"right"):t.fire(t.data.skills[0],"left"):t.y<f["default"].hero.y?t.fire(t.data.skills[0],"down"):t.fire(t.data.skills[0],"up")):f["default"].hero&&f["default"].hero.distance(t)<12?t["goto"](f["default"].hero.x,f["default"].hero.y,"walk"):(n.attacking=!1,f["default"].hero.beAttacking.has(t)&&f["default"].hero.beAttacking["delete"](t));else if(i%r==0)if(f["default"].hero&&f["default"].hero.distance(t)<8)t["goto"](f["default"].hero.x,f["default"].hero.y,"walk"),n.attacking=!0,f["default"].hero.beAttacking.add(t);else if("patrol"==t.data.mode){if(Math.random()>.3)return void t.stop();var a=["down","left","right","up"];t.go("walk",a[Math.floor(Math.random()*a.length)]).then(function(){t.stop()})}}})}}]),e}(p["default"]);e["default"]=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(199),s=r(l),c=n(198),d=r(c),f=n(217),h=r(f),p=n(229),v=r(p),y=n(222),w=r(y),g=(s["default"].Util.namespace(),function(t){function e(t){return i(this,e),o(this,Object.getPrototypeOf(e).call(this,t))}return a(e,t),u(e,[{key:"heroUse",value:function(){var t=this,e=this.data,n={},r={};if(e.contact){var i=!0,o=!1,a=void 0;try{for(var u,l=e.contact[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value,c=!0;if("function"==typeof s.condition)try{c=s.condition()}catch(f){throw console.error(this.id,this.data),console.error(s.condition),console.error(s.condition.toString()),f}c&&(n[s.name]=s.name,r[s.name]=s)}}catch(h){o=!0,a=h}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw a}}}var p=null;this.quest&&(p=this.quest.filter(function(t){return d["default"].hero.hasQuest(t.id)?!1:!0}),p&&p.length&&(n["任务"]="quest"));var y=null;if(d["default"].hero.data.currentQuest.length){y=[];var g=!0,m=!1,b=void 0;try{for(var x,k=d["default"].hero.data.currentQuest[Symbol.iterator]();!(g=(x=k.next()).done);g=!0){var A=x.value;console.log(d["default"].Quest.isComplete(A),A.to,this.id),A.to==this.id&&d["default"].Quest.isComplete(A)&&y.push(A)}}catch(h){m=!0,b=h}finally{try{!g&&k["return"]&&k["return"]()}finally{if(m)throw b}}y.length>0&&(n["完成任务"]="completeQuest")}e.trade&&e.items&&(n["交易"]="trade"),Object.keys(n).length<=0||(0,w["default"])(n).then(function(n){switch(n){case"trade":t.heroUse(),d["default"].windows.buy.open(e.items);break;case"quest":var i={};p.forEach(function(t,e){i[t.name]=e}),(0,w["default"])(i).then(function(e){Number.isInteger(e)?!function(){var n=p[e];(0,v["default"])({message:n.before,yes:"接受任务",no:"拒绝"}).then(function(){d["default"].hero.data.currentQuest.push(n),t.heroUse()})["catch"](function(){t.heroUse()})}():t.heroUse()});break;case"completeQuest":var o={};y.forEach(function(t,e){o[t.name]=e}),(0,w["default"])(o).then(function(n){if(Number.isInteger(n)){var r=y[n];d["default"].hero.data.currentQuest.splice(d["default"].hero.data.currentQuest.indexOf(r),1),d["default"].hero.data.completeQuest.push(r),t.heroUse(),d["default"].dialogue([r.finish],e.name),r.reward&&(r.reward.gold&&(d["default"].hero.data.gold+=r.reward.gold),r.reward.exp&&(d["default"].hero.data.exp+=r.reward.exp))}});break;default:r[n]&&(t.heroUse(),d["default"].dialogue(r[n].content,e.name))}})}}]),e}(h["default"]));e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){return new Promise(function(e,n){var r=a["default"].create("confirmWindow");r.css=l["default"],r.html=c["default"],r.show();var i=r.querySelector("#confirmWindowMessage"),o=r.querySelector("#confirmWindowYes"),u=r.querySelector("#confirmWindowNo");if("string"==typeof t)i.textContent=t;else{if(!t.message)throw new Error("Confirm got invalid arguments");i.textContent=t.message,t.yes&&(o.textContent=t.yes),t.no&&(u.textContent=t.no)}r.whenUp(["esc"],function(){setTimeout(function(){u.click()},20)}),r.whenUp(["y","Y"],function(){o.click()}),r.whenUp(["n","N"],function(){u.click()}),o.addEventListener("click",function(){r.destroy(),e()}),u.addEventListener("click",function(){r.destroy(),n()})})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var o=n(223),a=r(o),u=n(230),l=r(u),s=n(232),c=r(s)},function(t,e,n){var r=n(231);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".confirmWindow{text-align:center}.confirmWindow table{width:100%;height:100%}.confirmWindow span{font-size:16px}.confirmWindow button{width:100px;height:60px;font-size:16px;margin:20px}.confirmWindow #confirmWindowMessage{color:#000;font-size:20px}",""])},function(t,e){t.exports='<div class=window-box><div style="width: 100%; height: 100%"><table><tr><td><span id=confirmWindowMessage></span><tr><td><button id=confirmWindowYes class=brownButton>确定</button> <button id=confirmWindowNo class=brownButton>取消</button></table></div></div>'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(199),l=r(u),s=n(198),c=(r(s),n(217)),d=r(c),f=(l["default"].Util.namespace(),function(t){function e(t){return i(this,e),o(this,Object.getPrototypeOf(e).call(this,t))}return a(e,t),e}(d["default"]));e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var a=n(199),u=r(a),l=n(198),s=r(l),c=n(235),d=r(c),f=(u["default"].Util.namespace(),function(){function t(){i(this,t)}return o(t,null,[{key:"remove",value:function(t){window.localStorage.getItem(t)&&window.localStorage.removeItem(t)}},{key:"list",value:function(){var t=[];for(var e in window.localStorage)e.match(/^SAVE_(\d+)$/)&&t.push(parseInt(e.match(/^SAVE_(\d+)$/)[1]));return t.sort(),t.reverse(),t}},{key:"last",value:function(){var e=t.list();if(e.length>0){var n=e[0];return JSON.parse(window.localStorage.getItem("SAVE_"+n))}return null}},{key:"clear",value:function(){for(var t in window.localStorage)t.match(/^SAVE_(\d+)$/)&&window.localStorage.removeItem(t)}},{key:"save",value:function(t){var e=new Date,n=e.getTime();t.id=n,t.name=t.hero.name,t.date=e.toLocaleString(),window.localStorage.setItem("SAVE_"+n,JSON.stringify(t))}},{key:"get",value:function(t){return t&&window.localStorage.getItem(t)?JSON.parse(window.localStorage.getItem(t)):null}},{key:"load",value:function(e){var n=t.get(e);if(n||(n=t.last()),!n)throw console.error("id:",e),new Error("Invalid id, GameArchive.load");s["default"].windows["interface"].showing&&s["default"].windows["interface"].hide(),s["default"].windows.main.hide(),s["default"].windows.loading.begin(),setTimeout(function(){var t=n.hero;(0,d["default"])(t.custom).then(function(e){t.image=e,s["default"].hero=new s["default"].ActorHero(t),s["default"].hero.on("complete",function(){s["default"].hero.gotoArea(t.area,t.x,t.y)})})},20)}}]),t}());e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){return new Promise(function(r,i){var o=document.createElement("canvas");o.height=n,o.width=e;var a=o.getContext("2d");a.clearRect(0,0,e,n);for(var u=t.length-1,l=0;u>l;l++){var s=t[l];a.drawImage(s,0,0,s.width,s.height,0,0,e,n)}var c=null,d=null,f=new Set;c=new Image,c.src=o.toDataURL("image/png"),f.add(new Promise(function(t,e){c.complete?t():c.onload=function(){t()}})),a.drawImage(t[u],0,0,t[u].width,t[u].height,0,0,e,n),d=new Image,d.src=o.toDataURL("image/png"),f.add(new Promise(function(t,e){d.complete?t():d.onload=function(){t()}})),Promise.all(f).then(function(){r([c,d])})})}function o(t){return"string"==typeof t&&t.length>0?!0:!1}function a(t){return new Promise(function(e,n){var r="hero",a=[];o(t.sex)&&o(t.body)&&(a.push(r+"/body/"+t.sex+"/"+t.body+".png"),o(t.eyes)&&a.push(r+"/body/"+t.sex+"/eyes/"+t.eyes+".png"),o(t.shirts)&&a.push(r+"/shirts/"+t.sex+"/"+t.shirts+".png"),o(t.pants)&&a.push(r+"/pants/"+t.sex+"/"+t.pants+".png"),o(t.shoes)&&a.push(r+"/shoes/"+t.sex+"/"+t.shoes+".png"),o(t.armorchest)&&a.push(r+"/armor/chest/"+t.sex+"/"+t.armorchest+".png"),o(t.armorarm)&&a.push(r+"/armor/arm/"+t.sex+"/"+t.armorarm+".png"),o(t.armorlegs)&&a.push(r+"/armor/legs/"+t.sex+"/"+t.armorlegs+".png"),o(t.armorfeet)&&a.push(r+"/armor/feet/"+t.sex+"/"+t.armorfeet+".png"),o(t.hair)&&o(t.haircolor)&&a.push(r+"/hair/"+t.sex+"/"+t.hair+"/"+t.haircolor+".png"),o(t.head)&&a.push(r+"/head/"+t.sex+"/"+t.head+".png"),o(t.armorhelms)&&a.push(r+"/armor/helms/"+t.sex+"/"+t.armorhelms+".png"),a.push(r+"/weapons/"+t.sex+"/weapons.png")),l["default"].Loader.load(a).then(function(n){i(n,t.width,t.height).then(function(t){e(t)})})})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a;var u=n(199),l=r(u);l["default"].Util.namespace()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){return new Promise(function(t,e){var n=new Set,r={hurt:"sound/effect/hurt.ogg"};for(var i in r)n.add(function(t,e){return new Promise(function(n,r){d["default"].sounds&&d["default"].sounds[t]?n():s["default"].Loader.load(e).then(function(e){d["default"].sounds[t]=e[0],n()})})}(i,r[i]));var o=["bag","gold"];o.forEach(function(t){n.add(new Promise(function(e,n){d["default"].items&&d["default"].items[t]?e():d["default"].Item.load(t).then(function(t){e()})}))}),Promise.all(n).then(t,e)})}var a=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(199),s=r(l),c=n(198),d=r(c),f=(s["default"].Util.namespace(),function(){function t(){i(this,t)}return u(t,null,[{key:"load",value:function(t){return new Promise(function(e,n){Promise.all([d["default"].Map.load(t),o()]).then(function(t){var e=a(t,1),n=e[0];return{actors:new Set,bags:new Set,items:new Set,touch:[],onto:[],map:n}}).then(function(t){var n=new Set;if(t.map.data.actors&&t.map.data.actors.forEach(function(e){n.add(d["default"].Actor.load(e.id).then(function(n){for(var r in e)n.data[r]=e[r];t.actors.add(n),n.draw()}))}),t.map.spawnMonster&&t.map.spawnMonster.list&&t.map.spawnMonster.count)for(var r in t.map.spawnMonster.list)n.add(d["default"].Actor.load(r));if(t.map.spawnItem&&t.map.spawnItem.list&&t.map.spawnItem.count)for(var i in t.map.spawnItem.list)n.add(d["default"].Item.load(i));t.map.data.onto&&t.map.data.onto.forEach(function(e){t.onto.push(e)}),t.map.data.touch&&t.map.data.touch.forEach(function(e){t.touch.push(e)}),Promise.all(n).then(function(){e(t)})})})}}]),t}());e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n,r){return Math.abs(t-n)+Math.abs(e-r)}function a(t,e,n,r,i){var a={key:1e4*t+e,x:t,y:e,g:r.g+i,h:o(t,e,n.x,n.y),front:[]};a.f=a.g+a.h;var u=r.front.length;a.front.length=u;for(var l=0;u>l;l++)a.front[l]=r.front[l];return a.front.push(r.x),a.front.push(r.y),a}function u(t,e,n){var r=new p(function(t){return t.f}),i=new Set,u=new Set,l={key:1e4*e.x+e.y,x:e.x,y:e.y,f:0,g:0,h:o(e.x,e.y,n.x,n.y),front:[]};i.add(l.key),r.push(l);for(var s=function(e,n,o,l){if(!t(e,n)){var s=1e4*e+n;i.has(s)||u.has(s)||(i.add(s),r.push(a(e,n,o,l,10)))}};r.size;){var c=r.pop();if(r["delete"](c),i["delete"](c.key),u.add(c.key),c.x==n.x&&c.y==n.y){for(var d=[],f=0,h=c.front.length;h>f;f+=2)d.push({x:c.front[f],y:c.front[f+1]});return d.push({x:n.x,y:n.y}),d}s(c.x,c.y-1,n,c),s(c.x,c.y+1,n,c),s(c.x-1,c.y,n,c),s(c.x+1,c.y,n,c)}return null}var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(199),c=r(s),d=n(198),f=r(d),h=(c["default"].Util.namespace(),function(){function t(){i(this,t)}return l(t,null,[{key:"getPath",value:function(t,e){return new Promise(function(n,r){var i={},o=!0,a=!1,l=void 0;try{for(var s,c=f["default"].area.actors[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value;(d.x!=t.x||d.y!=t.y)&&(i[1e4*d.x+d.y]=!0)}}catch(h){a=!0,l=h}finally{try{!o&&c["return"]&&c["return"]()}finally{if(a)throw l}}var p=u(function(t,e){if(0>t||t>=f["default"].area.map.col)return!0;if(0>e||e>=f["default"].area.map.row)return!0;var n=1e4*t+e;return f["default"].area.map.blockedMap[n]?!0:i[n]?!0:!1},t,e);n(p)})}}]),t}());e["default"]=h;var p=function(){function t(e){i(this,t),this.content=[],this.scoreFunction=e,this.scores=new Map}return l(t,[{key:"push",value:function(t){this.scores.set(t,this.scoreFunction(t)),this.content.push(t),this.bubbleUp(this.content.length-1)}},{key:"pop",value:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),t}},{key:"delete",value:function(t){for(var e=0,n=this.content.length;n>e;e++)if(this.content[e]==t){this.scores["delete"](this.content[e]);var r=this.content.pop();if(e==n-1)break;this.content[e]=r,this.bubbleUp(e),this.sinkDown(e);break}}},{key:"bubbleUp",value:function(t){for(var e=this.content[t],n=this.scores.get(e);t>0;){var r=Math.floor((t+1)/2)-1,i=this.content[r];if(n>=this.scores.get(i))break;this.content[r]=e,this.content[t]=i,t=r}}},{key:"sinkDown",value:function(t){for(var e=this.content.length,n=this.content[t],r=this.scores.get(n);;){var i=2*(t+1),o=i-1,a=null,u=void 0,l=void 0;if(e>o){var s=this.content[o];u=this.scores.get(s),r>u&&(a=o)}if(e>i){var c=this.content[i];l=this.scores.get(c),(null==a?r:u)>l&&(a=i)}if(null==a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},{key:"size",get:function(){return this.content.length},set:function(t){throw new Error("BinaryHeap.size readonly")}}]),t}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){if(!c["default"].paused){var t="run";l["default"].Input.isPressed("shift")&&(t="walk"),l["default"].Input.isPressed("left")?c["default"].hero.go(t,"left").then(o):l["default"].Input.isPressed("up")?c["default"].hero.go(t,"up").then(o):l["default"].Input.isPressed("right")?c["default"].hero.go(t,"right").then(o):l["default"].Input.isPressed("down")&&c["default"].hero.go(t,"down").then(o)}}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var u=n(199),l=r(u),s=n(198),c=r(s),d=(l["default"].Util.namespace(),null),f=function(){function t(){i(this,t)}return a(t,null,[{key:"clearDest",value:function(){d.visible=!1}},{key:"setDest",value:function(t,e){d.x=32*t+16,d.y=32*e+16,d.visible=!0}},{key:"init",value:function(){d=new l["default"].Shape,d.circle({cx:5,cy:5,r:5,stroke:"red",fill:"green"}),d.visible=!1,d.centerX=5,d.centerY=5,c["default"].windows.stage.on("mousedown",function(t){var e=t.data;e.x+=c["default"].stage.centerX,e.y+=c["default"].stage.centerY,e.x=Math.floor(e.x/32),e.y=Math.floor(e.y/32),c["default"].layers.infoLayer.hasChild(d)||c["default"].layers.infoLayer.appendChild(d),(c["default"].hero.x!=e.x||c["default"].hero.y!=e.y)&&c["default"].hero["goto"](e.x,e.y,"run").then(function(){d.visible=!1,c["default"].hintObject&&c["default"].hintObject.heroUse&&c["default"].hintObject.heroUse()})}),l["default"].Ticker.on("tick",function(){c["default"].paused||c["default"].hero&&c["default"].area&&c["default"].area.map&&(o(),c["default"].hero.walking||c["default"].hero.stop(),c["default"].hero.focus())})}}]),t}();e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(199),s=r(l),c=n(198),d=r(c),f=s["default"].Util.namespace(),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this)),r=f(n);return r.data=t,r.inner=null,n.data.x&&n.data.y||(n.data.x=0,n.data.y=0),n.data.image?s["default"].Loader.load("item/"+n.data.image).then(function(t){var e=t[0];if(r.icon=e,r.bitmap=new s["default"].Bitmap(e),r.bitmap.x=32*n.data.x+16,r.bitmap.y=32*n.data.y+16,r.bitmap.name=n.id,!Number.isInteger(n.data.centerX)||!Number.isInteger(n.data.centerY))throw console.log(n.data),new Error("Game.Item invalid centerX/centerY");r.bitmap.centerX=n.data.centerX,r.bitmap.centerY=n.data.centerY,n.emit("complete",!0)}):n.emit("complete",!0),n}return a(e,t),u(e,null,[{key:"load",value:function(t){return new Promise(function(e,n){s["default"].Loader.load("item/"+t+".js").then(function(n){var r=n[0]();r.id=t;var i=new d["default"].Item(r);d["default"].items[t]=i,i.on("complete",function(){e(i)})})})}}]),u(e,[{key:"hitTest",value:function(t,e){if(this.data.hitArea&&this.data.hitArea instanceof Array){var n=!0,r=!1,i=void 0;try{for(var o,a=this.data.hitArea[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(t==this.x+u[0]&&e==this.y+u[1])return!0}}catch(l){r=!0,i=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return!1}throw console.error(this.data),new Error("Game.Actor.hitTest invalid data")}},{key:"heroUse",value:function(){if(this.inner&&(this.data.pickupCondition?this.data.pickupCondition()&&d["default"].windows.pickup.open(this):d["default"].windows.pickup.open(this)),"function"==typeof this.data.use&&this.data.use(),"potion"==this.data.type){for(var t in this.data.potion){var e=this.data.potion[t];"hp"==t&&!function(){d["default"].hero.data.hp=Math.min(d["default"].hero.data.hp+e,d["default"].hero.data.$hp);var t=new s["default"].Text({text:"hp+"+e,color:"black",fontSize:20});t.centerX=Math.floor(t.width/2),t.centerY=Math.floor(t.height),t.x=d["default"].hero.sprite.x,t.y=d["default"].hero.sprite.y,d["default"].layers.actorLayer.appendChild(t),s["default"].Ticker.whiles(100,function(e){t.y-=3,e&&d["default"].layers.actorLayer.removeChild(t)})}()}d["default"].hero.data.items[this.id]--,d["default"].hero.data.items[this.id]<=0&&delete d["default"].hero.data.items[this.id]}}},{key:"erase",value:function(t){d["default"].layers.itemLayer.removeChild(f(this).bitmap)}},{key:"draw",value:function(){d["default"].layers.itemLayer.appendChild(f(this).bitmap)}},{key:"id",get:function(){return f(this).data.id},set:function(t){throw new Error("Game.Item.id readonly")}},{key:"icon",get:function(){return f(this).bitmap?f(this).bitmap.image:null},set:function(t){throw new Error("Game.Item.icon readonly")}},{key:"data",get:function(){return f(this).data},set:function(t){throw console.error(this),new Error("Game.Item.data readonly")}},{key:"inner",get:function(){return f(this).inner},set:function(t){f(this).inner=t}},{key:"x",get:function(){return f(this).data.x},set:function(t){var e=f(this);e.data.x=t,e.bitmap.x=32*t+16}},{key:"y",get:function(){return f(this).data.y},set:function(t){var e=f(this);e.data.y=t,e.bitmap.y=32*t+16}},{key:"visible",get:function(){return f(this).bitmap.visible},set:function(t){f(this).bitmap.visible=t}},{key:"alpha",get:function(){return f(this).bitmap.alpha},set:function(t){if(!(Number.isFinite(t)&&t>=0&&1>=t))throw console.error(t,this),new Error("Game.Item.alpha got invalid value");f(this).bitmap.alpha=t}},{key:"position",get:function(){return{x:this.x,y:this.y}},set:function(t){throw console.error(this.data),new Error("Game.Item.position readonly")}}]),e}(s["default"].Event);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(199),c=r(s),d=n(198),f=r(d),h=c["default"].Util.namespace(),p=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this)),r=h(n);r.data=t;var a=[],u=!0,l=!1,s=void 0;try{for(var d,f=r.data.tilesets[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var p=d.value;a.push("map/"+p.image)}}catch(v){l=!0,s=v}finally{try{!u&&f["return"]&&f["return"]()}finally{if(l)throw s}}return c["default"].Loader.load(a).then(function(t){r.data.tilesets=null,r.sheet=new c["default"].Sheet({images:t,width:r.data.tilewidth,height:r.data.tileheight}),r.waterMap={},r.blockedMap={},r.layers=[];var e=!0,i=!1,o=void 0;try{for(var a,u=r.data.layers[Symbol.iterator]();!(e=(a=u.next()).done);e=!0){var l=a.value,s=null;"block"!=l.name&&(s=new c["default"].Container,s.name=l.name,r.layers.push(s));for(var d=n.col,f=n.row,h=0;f>h;h++)for(var p=0;d>p;p++){var v=p+h*d,y=1e4*p+h,w=l.data[v]-1;if(w>=0)if("block"==l.name)r.blockedMap[y]=!0;else{var g=r.sheet.getFrame(w);g.x=p*r.data.tilewidth,g.y=h*r.data.tileheight,s.appendChild(g),"water"==l.name&&(r.waterMap[y]=!0)}}}}catch(m){i=!0,o=m}finally{try{!e&&u["return"]&&u["return"]()}finally{if(i)throw o}}n.emit("complete",!0)}),n}return a(e,t),l(e,[{key:"hitTest",value:function(t,e){return h(this).blockedMap[1e4*t+e]?!0:!1}},{key:"hitWater",value:function(t,e){return h(this).waterMap[1e4*t+e]?!0:!1}},{key:"blockedMap",get:function(){return h(this).blockedMap},set:function(t){throw new Error("Game.Map.blockedMap readonly")}}],[{key:"load",value:function(t){return new Promise(function(e,n){c["default"].Loader.load("map/"+t+".json","map/"+t+".js").then(function(n){var r=u(n,2),i=r[0],o=r[1];o=o(),i.id=t;for(var a in o){if(i.hasOwnProperty(a))throw console.error(a,"map/"+t+".json","map/"+t+".js"),new Error("Map.load Conflict key");i[a]=o[a]}var l=new f["default"].Map(i);l.on("complete",function(){e(l)})})})}}]),l(e,[{key:"tile",value:function(t,e){if(Number.isFinite(t)&&Number.isFinite(e))return{x:Math.floor(t/this.data.tilewidth),y:Math.floor(e/this.data.tileheight)};throw console.error(t,e,this.data),new Error("Game.Map.tile got invalid arguments")}},{key:"draw",value:function(){var t=this,e=h(this);f["default"].layers.mapLayer.clear(),e.layers.forEach(function(t,n){var r=e.data.layers[n];Number.isFinite(r.opacity)&&(t.alpha=r.opacity),f["default"].layers.mapLayer.appendChild(t)}),e.layers=null,e.data.layers=null,f["default"].layers.mapLayer.cache(this.width,this.height);var n=new c["default"].Bitmap(f["default"].layers.mapLayer.cacheCanvas);f["default"].layers.mapLayer.clear(),f["default"].layers.mapLayer.appendChild(n);var r=document.createElement("canvas");r.width=8*this.col,r.height=8*this.row;var i=r.getContext("2d");i.drawImage(n.image,0,0,n.width,n.height,0,0,r.width,r.height),e.minimap=r,e.data.bgm;var o={};if(e.data.actors){var a=!0,u=!1,l=void 0;try{for(var s,d=e.data.actors[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var p=s.value;o[1e4*p.x+p.y]=!0}}catch(v){u=!0,l=v}finally{try{!a&&d["return"]&&d["return"]()}finally{if(u)throw l}}}if(e.data.spawnMonster&&e.data.spawnMonster.list&&e.data.spawnMonster.count)for(var y=0,w=e.data.spawnMonster.count;w>y;y++){var g=null,m=0,b=Math.random();for(var x in e.data.spawnMonster.list)if(m+=e.data.spawnMonster.list[x],m>b){g=x;break}g||(g=Object.keys(e.data.spawnMonster.list)[0]),f["default"].Actor.load(g).then(function(e){for(var n=void 0,r=void 0;;)if(n=c["default"].Util.rand(0,t.col),r=c["default"].Util.rand(0,t.row),!t.hitTest(n,r)&&!o[1e4*n+r])break;o[1e4*n+r]=!0,e.x=n,e.y=r,f["default"].area.actors.add(e),e.draw()})}if(e.data.spawnItem&&e.data.spawnItem.list&&e.data.spawnItem.count)for(var k=function(n,r){var i=null,a=0,u=Math.random();for(var l in e.data.spawnItem.list)if(a+=e.data.spawnItem.list[l],a>u){i=l;break}i||(i=Object.keys(e.data.spawnItem.list)[0]),f["default"].Item.load(i).then(function(e){for(var n=void 0,r=void 0;;)if(n=c["default"].Util.rand(0,t.col),r=c["default"].Util.rand(0,t.row),!t.hitTest(n,r)&&!o[1e4*n+r])break;o[1e4*n+r]=!0,e.x=n,e.y=r,e.inner={},e.inner[i]=1,f["default"].area.items.add(e),e.draw()})},y=0,w=e.data.spawnItem.count;w>y;y++)k(y,w)}},{key:"data",get:function(){return h(this).data},set:function(t){throw new Error("Game.Map.data readonly")}},{key:"id",get:function(){return h(this).id},set:function(t){throw new Error("Game.Map.id readonly")}},{key:"width",get:function(){return this.data.width*this.data.tilewidth},set:function(t){throw new Error("Game.Map.width readonly")}},{key:"height",get:function(){return this.data.height*this.data.tileheight},set:function(t){throw new Error("Game.Map.height readonly")}},{key:"col",get:function(){return this.data.width},set:function(t){throw new Error("Game.Map.col readonly")}},{key:"row",get:function(){return this.data.height},set:function(t){throw new Error("Game.Map.row readonly")}},{key:"minimap",get:function(){return h(this).minimap},set:function(t){throw new Error("Game.Map.minimap readonly")}}]),e}(c["default"].Event);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){Array.from(document.querySelectorAll(".registerWindow #registerWindowDisplaySelect select")).forEach(function(t){var e=t.getAttribute("data-type"),n=t.value;"malehair"==e||"femalehair"==e?"male"==w.sex&&"malehair"==e?w.hair=n:"female"==w.sex&&"femalehair"==e&&(w.hair=n):w.hasOwnProperty(e)&&(w[e]=n)}),"male"==w.sex?(document.getElementById("customMaleHair").style.display="block",document.getElementById("customFemaleHair").style.display="none"):(document.getElementById("customMaleHair").style.display="none",document.getElementById("customFemaleHair").style.display="block"),u()}function a(){Array.from(document.querySelectorAll(".registerWindow #registerWindowPersonal select")).forEach(function(t){var e=t.value,n=t.getAttribute("data-type");g[n]=e});var t=f["default"].windows.register.querySelector("#registerWindowBelief"),e=f["default"].windows.register.querySelector("#registerWindowClass");t.textContent=m[g.belief],e.textContent=b[g["class"]]}function u(){var t=document.querySelector(".registerWindow canvas"),e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),document.getElementById("loading").innerHTML="Loading",(0,p["default"])(w).then(function(t){var n=t[0];e.drawImage(n,0,0,n.width,n.height),document.getElementById("loading").innerHTML=""})}var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var s=n(199),c=r(s),d=n(198),f=r(d),h=n(235),p=r(h),v=(c["default"].Util.namespace(),
!1),y=function(){function t(){i(this,t)}return l(t,null,[{key:"reg",value:function(){v||(v=!0,Array.from(f["default"].windows.register.querySelectorAll("#registerWindowDisplaySelect select")).forEach(function(t){t.addEventListener("change",function(){o()})}),Array.from(f["default"].windows.register.querySelectorAll("#registerWindowPersonal select")).forEach(function(t){t.addEventListener("change",function(){a()})})),Array.from(f["default"].windows.register.querySelectorAll("select")).forEach(function(t){t.selectedIndex=0}),o(),a(),document.querySelector("#registerHeroName").value="",f["default"].windows.register.show()}},{key:"submit",value:function(){var t=document.getElementById("registerHeroName").value;return t.trim().length<=0?void alert("Invalid Name"):(g.id="hero_"+t,g.name=t,g.custom=w,g.tilewidth=w.tilewidth,g.tileheight=w.tileheight,f["default"].Archive.save({hero:g}),f["default"].windows.register.hide(),void f["default"].Archive.load())}}]),t}();e["default"]=y;var w={sex:"male",body:"light",eyes:"blue",hair:"",haircolor:"black",head:"",shirts:"",pants:"",shoes:"",armorchest:"",armorarm:"",armorlegs:"",armorhelms:"",armorfeet:""};w.width=832,w.height=1344,w.width*=.8125,w.height*=.9375,w.tilewidth=w.width/13,w.tileheight=w.height/21;var g=null,m={None:"信仰决定了神对你的祝福，当然没有信仰也是一种信仰，但你将无法享受神的祝福",Elen:"艾琳 - 知识女神",Enlon:"恩朗 - 死亡主宰",Minare:"密娜 - 丰收女神",Achiel:"阿切奥 - 保护之神",Racha:"拉克 - 魔法女神",Aestor:"阿斯托 - 盗贼之神",Hielach:"赫拉克 - 财富之神",Alik:"阿丽克 - 治愈女神",Amarien:"阿玛恩 - 力量之神"},b={warrior:"战士是艾利韦斯最常见的冒险职业，擅长使用剑和枪",archer:"弓箭手擅长远程攻击，一般使用弓箭作为武器",wizard:"魔法师擅长使用魔法进行远程攻击",priest:"牧师擅长治疗，也会使用神术",bard:"吟游诗人的表演可以鼓舞士气或者削弱敌人的士气",thief:"盗贼总是躲藏在阴影中",business:"商人擅长交易和说服，帮助你更快的获得资金"};g={level:1,exp:0,type:"hero",belief:"None","class":"warrior",time:120868410,$str:10,$dex:10,$con:10,$int:10,$cha:10,str:0,dex:0,"int":0,con:0,cha:0,$hp:0,$sp:0,critical:0,dodge:0,hp:0,sp:0,$atk:0,$def:0,$matk:0,$mdef:0,atk:0,def:0,matk:0,mdef:0,buff:[],nerf:[],currentQuest:[],completeQuest:[],area:"fystone",x:18,y:15,centerX:26,centerY:55,hitArea:[[0,0]],skills:["fist.l1","sword.l1","spear.l1","bow.l1","fire.l1"],bar:[{id:"sword.l1",type:"skill"},{id:"bow.l1",type:"skill"},null,null,null,null,null,{id:"potion.healWeak",type:"item"}],equipment:{head:null,body:"cloth.normal",feet:"shoes.normal",weapon:"sword.iron",neck:null,ring:null},items:{"sword.iron":1,"spear.iron":1,"bow.wood":1,"cloth.normal":1,"shoes.normal":1,"potion.healWeak":5,"book.gameAdventure":1,"book.elliorwisHistory":1},gold:0,animations:{spellcastup:[0,6,"",40],spellcastleft:[13,19,"",40],spellcastdown:[26,32,"",40],spellcastright:[39,45,"",40],walkup:[104,112,"walkup",70],walkleft:[117,125,"walkleft",70],walkdown:[130,138,"walkdown",70],walkright:[143,151,"walkright",70],meleeup:[156,161,"",40],meleeleft:[169,174,"",40],meleedown:[182,187,"",40],meleeright:[195,200,"",40],thrustup:[325,332,"",40],thrustleft:[338,345,"",40],thrustdown:[351,358,"",40],thrustright:[364,371,"",40],runup:[378,385,"runup",30],runleft:[391,398,"runleft",30],rundown:[404,411,"rundown",30],runright:[417,424,"runright",30],slashup:[429,434,"",40],slashleft:[442,447,"",40],slashdown:[455,460,"",40],slashright:[468,473,"",40],shootup:[481,493,"",40],shootleft:[494,506,"",40],shootdown:[507,519,"",40],shootright:[520,532,"",40],hurt:[260,265,"",60],dead:265,faceup:104,faceleft:117,facedown:130,faceright:143}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var l=n(199),s=r(l),c=n(198),d=r(c),f=s["default"].Util.namespace(),h=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this)),r=f(n);return r.data=t,s["default"].Loader.load("skill/"+n.data.image,"skill/"+n.data.icon,"skill/"+n.data.sound).then(function(t){var e=t[0];r.icon=t[1],r.sound=t[2];var i=new s["default"].Sheet({images:[e],width:n.data.tilewidth,height:n.data.tileheight,animations:n.data.animations});i.centerX=Math.floor(n.data.tilewidth/2),i.centerY=Math.floor(n.data.tileheight/2),n.data.alpha&&(i.alpha=n.data.alpha),r.sprite=i,n.emit("complete",!0)}),n}return a(e,t),u(e,null,[{key:"load",value:function(t){return new Promise(function(e,n){s["default"].Loader.load("skill/"+t+".js").then(function(n){var r=n[0](),i=new d["default"].Skill(r);d["default"].skills[t]=i,i.on("complete",function(){e(i)})})})}}]),u(e,[{key:"fire",value:function(t,e,n){var r=this,i=f(this);i.sound&&(i.sound.load(),i.sound.play());var o="attack"+e,a=this.data.animations[o],u=i.sprite.clone();if(u.x=32*t.facePosition.x+16,u.y=32*t.facePosition.y+16,!Number.isFinite(a.centerX)||!Number.isFinite(a.centerY))throw console.error(a,this.data),new Error("Game.Skill.fire invalid centerX/centerY");u.centerX=a.centerX,u.centerY=a.centerY;var l=0,c=[],h=function(){var e=d["default"].area.map.tile(u.x,u.y),n=!0,r=!1,i=void 0;try{for(var o,a=d["default"].area.actors[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l!=t&&c.length<=0&&l.hitTest(e.x,e.y)&&c.push(l)}}catch(s){r=!0,i=s}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}},p=s["default"].Ticker.on("tick",function(){switch(r.data.distance>0&&(l+=4),o){case"attackdown":u.y+=l;break;case"attackleft":u.x-=l;break;case"attackright":u.x+=l;break;case"attackup":u.y-=l}h();var t=d["default"].area.map.tile(u.x,u.y);d["default"].area.map.hitTest(t.x,t.y)&&v(),c.length>0&&v(),r.data.distance>0&&l>=r.data.distance&&v()}),v=function(){if(s["default"].Ticker.off("tick",p),c.length>0&&r.data.animations.hitted){var t=c[0];u.x=t.sprite.x,u.y=t.sprite.y,u.play("hitted"),1==u.paused?d["default"].layers.skillLayer.removeChild(u):u.on("animationend",function(){d["default"].layers.skillLayer.removeChild(u)})}else 1==u.paused?d["default"].layers.skillLayer.removeChild(u):u.on("animationend",function(){d["default"].layers.skillLayer.removeChild(u)});n&&n(c)};d["default"].layers.skillLayer.appendChild(u),u.play(o),this.data.animations[o].actor&&t.data.animations[this.data.animations[o].actor]?t.play(this.data.animations[o].actor,3):(t.play("face"+e,0),t.play("attack"+e,3))}},{key:"id",get:function(){return f(this).data.id},set:function(t){throw new Error("Game.Skill.id readonly")}},{key:"icon",get:function(){return f(this).icon},set:function(t){throw new Error("Game.Skill.icon readonly")}},{key:"data",get:function(){return f(this).data},set:function(t){throw console.error(this),new Error("Game.Skill.data readonly")}},{key:"power",get:function(){if(Number.isFinite(this.data.power))return this.data.power;if("string"==typeof this.data.power){var t=this.data.power.match(/(\d+)d(\d+)/);if(!t)throw console.error(this.data.power,this.data),new Error("Sprite.Skill got invalid power data");for(var e=parseInt(t[1]),n=parseInt(t[2]),r=0,i=0;e>i;i++)r+=s["default"].Util.rand(0,n)+1;return r}throw console.error(this.data.power,this.data),new Error("Game.Skill.power invalid power")},set:function(t){throw new Error("Game.Skill.power readonly")}},{key:"type",get:function(){return this.data.type},set:function(t){throw new Error("Game.Skill.type readonly")}}]),e}(s["default"].Event);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(244),s=r(l),c=n(246),d=r(c),f=u["default"].create("archiveWindow"),h=f;e["default"]=h,f.css=s["default"],f.html=d["default"];var p=f.querySelector("button#archiveWindowSave"),v=f.querySelector("button#archiveWindowClose"),y=f.querySelector("#archiveWindowTable");p.addEventListener("click",function(){var t=document.createElement("canvas");t.width=80,t.height=45;var e=t.getContext("2d");e.drawImage(o["default"].stage.canvas,0,0,o["default"].stage.canvas.width,o["default"].stage.canvas.height,0,0,80,45),o["default"].Archive.save({hero:o["default"].hero.data,screenshot:t.toDataURL("image/jpeg")}),f.open()}),v.addEventListener("click",function(){f.hide(),o["default"].windows["interface"].showing||o["default"].windows.main.show()}),f.whenUp(["esc"],function(t){setTimeout(function(){v.click()},20)}),f.assign("open",function(){o["default"].windows["interface"].showing&&o["default"].hero?p.style.visibility="visible":p.style.visibility="hidden";var t="",e=o["default"].Archive.list();e.forEach(function(e){var n='<div class="archiveWindowItem">\n',r=o["default"].Archive.get("SAVE_"+e);n+='  <button data-type="remove" data-id="SAVE_'+e+'" class="brownButton" style="float: right;">删除</button>\n',n+='  <button data-type="load" data-id="SAVE_'+e+'" class="brownButton" style="float: right;">读取</button>\n',n+='  <img alt="" src="'+(r.screenshot||"")+'" width="80" height="45" style="display: inline-block; margin: 5px;">\n',n+='  <label style="font-size: 20px; margin: 10px;">'+r.name+"</label>\n",n+='  <label style="margin: 10px;">'+r.date+"</label>\n",n+="</div>\n",t+=n}),y.innerHTML=t,o["default"].windows.archive.show()}),y.addEventListener("click",function(t){var e=t.target.getAttribute("data-type"),n=t.target.getAttribute("data-id");e&&n&&("remove"==e?(o["default"].Archive.remove(n),f.open()):"load"==e&&(o["default"].Archive.load(n),f.hide()))})},function(t,e,n){var r=n(245);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".archiveWindow #archiveWindowTable{width:100%;overflow-y:auto;height:320px}.archiveWindow .archiveWindowItem{border:1px solid gray;border-radius:10px;margin:10px}.archiveWindow .archiveWindowItem>button{width:100px;height:40px;border-radius:5px}.archiveWindow #archiveWindowItemBar button{width:100px;height:30px;font-size:16px;display:block;margin-bottom:5px}.archiveWindow #archiveWindowClose{float:right}",""])},function(t,e){t.exports="<div class=window-box><div id=archiveWindowItemBar><button id=archiveWindowClose class=brownButton>关闭</button> <button id=archiveWindowSave class=brownButton>保存</button></div><div id=archiveWindowTable></div></div>"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(248),s=r(l),c=n(250),d=r(c),f=u["default"].create("buyWindow"),h=f;e["default"]=h,f.css=s["default"],f.html=d["default"];var p=f.querySelector("button#buyWindowClose"),v=f.querySelector("button#buyWindowSell"),y=f.querySelector("button#buyWindowAll"),w=f.querySelector("button#buyWindowWeapon"),g=f.querySelector("button#buyWindowArmor"),m=f.querySelector("button#buyWindowPotion"),b=f.querySelector("button#buyWindowMaterial"),x=f.querySelector("button#buyWindowBook"),k=f.querySelector("button#buyWindowMisc"),A=f.querySelector("span#buyWindowGold"),S=f.querySelector("#buyWindowTable"),E=null,W=null,O=-1;p.addEventListener("click",function(){f.hide()}),v.addEventListener("click",function(){f.hide(),o["default"].windows.sell.open(E)}),f.whenUp(["tab"],function(){setTimeout(function(){f.hide(),o["default"].windows.sell.open(E)},20)}),y.addEventListener("click",function(t){f.open(E,null)}),w.addEventListener("click",function(t){f.open(E,"sword|spear|bow")}),g.addEventListener("click",function(t){f.open(E,"head|body|feet")}),m.addEventListener("click",function(t){f.open(E,"potion")}),b.addEventListener("click",function(t){f.open(E,"material")}),x.addEventListener("click",function(t){f.open(E,"book|scroll|letter")}),k.addEventListener("click",function(t){f.open(E,"misc")}),f.assign("open",function(t,e,n){"undefined"==typeof n&&(n=-1),E=t,W=e,O=n,A.textContent=o["default"].hero.data.gold+"G";var r="white",i="yellow";y.style.color=r,w.style.color=r,g.style.color=r,m.style.color=r,b.style.color=r,x.style.color=r,k.style.color=r,null==e?y.style.color=i:e.match(/sword/)?w.style.color=i:e.match(/head/)?g.style.color=i:e.match(/potion/)?m.style.color=i:e.match(/material/)?b.style.color=i:e.match(/book/)?x.style.color=i:e.match(/misc/)&&(k.style.color=i);var a=0,u="";Object.keys(t).forEach(function(r){var i=t[r],l=o["default"].items[r];if(!e||-1!=e.indexOf(l.data.type)){var s="";s+=n==a?'<tr style="background-color: green;">\n':"<tr>\n",s+=l.icon?'  <td style="text-align: center;"><img alt="" src="'+l.icon.src+'"></td>\n':"  <td> </td>\n",s+="  <td>"+l.data.name+"</td>\n",s+='  <td style="text-align: center;">'+Math.ceil(1.2*l.data.value)+"G</td>\n",s+='  <td style="text-align: center;">'+i+"</td>\n",s+="  <td>"+l.data.description+"</td>\n",s+=Math.ceil(1.2*l.data.value)>o["default"].hero.data.gold||t[r]<=0?'  <td><button disabled style="Opacity: 0.5;" class="brownButton">买入</button></td>\n':'  <td><button data-id="'+r+'" class="brownButton">买入</button></td>\n',s+="</tr>\n",u+=s,a++}}),S.innerHTML=u,f.show()}),f.whenUp(["enter"],function(){var t=S.querySelectorAll("button");O>=0&&O<t.length&&t[O].click()}),f.whenUp(["up","down"],function(t){var e=S.querySelectorAll("button").length;if(!(0>=e))if(-1==O)"down"==t?f.open(E,W,0):"up"==t&&f.open(E,W,e-1);else if("down"==t){var n=O+1;n>=e&&(n=0),f.open(E,W,n)}else if("up"==t){var n=O-1;0>n&&(n=e-1),f.open(E,W,n)}}),f.whenUp(["esc"],function(){setTimeout(function(){f.hide()},20)}),f.whenUp(["left","right"],function(t){if("right"==t){var e=W;null==e?e="sword|spear|bow":e.match(/sword/)?e="head|body|feet":e.match(/head/)?e="potion":e.match(/potion/)?e="material":e.match(/material/)?e="book|scroll|letter":e.match(/book/)?e="misc":e.match(/misc/)&&(e=null),f.open(E,e)}else if("left"==t){var e=W;null==e?e="misc":e.match(/sword/)?e=null:e.match(/head/)?e="sword|spear|bow":e.match(/potion/)?e="head|body|feet":e.match(/material/)?e="potion":e.match(/book/)?e="material":e.match(/misc/)&&(e="book|scroll|letter"),f.open(E,e)}}),S.addEventListener("click",function(t){var e=t.target.getAttribute("data-id");if(e&&E.hasOwnProperty(e)){var n=o["default"].items[e];o["default"].hero.data.gold-=Math.ceil(1.2*n.data.value),o["default"].hero.data.items[e]?o["default"].hero.data.items[e]++:o["default"].hero.data.items[e]=1,E[e]--,0==E[e]&&delete E[e],f.open(E,W)}})},function(t,e,n){var r=n(249);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".buyWindow table{width:100%}.buyWindow table button{width:60px;height:40px;font-size:16px}.buyWindow #buyWindowTable tr:nth-child(odd){background-color:hsla(0,0%,75%,.6)}.buyWindow #buyWindowItemBar>button{width:60px;height:40px;font-size:16px;margin:0 5px 5px}.buyWindow #buyWindowClose,.buyWindow #buyWindowStatus{float:right}.buyWindow #buyWindowGold{position:absolute;right:100px;bottom:30px;font-size:20px;color:#000}",""])},function(t,e){t.exports='<div class=window-box><div id=buyWindowItemBar><button id=buyWindowClose class=brownButton>关闭</button> <button id=buyWindowSell class=brownButton>卖出</button> <button id=buyWindowAll class=brownButton>全部</button> <button id=buyWindowWeapon class=brownButton>武器</button> <button id=buyWindowArmor class=brownButton>护甲</button> <button id=buyWindowPotion class=brownButton>药水</button> <button id=buyWindowMaterial class=brownButton>材料</button> <button id=buyWindowBook class=brownButton>书籍</button> <button id=buyWindowMisc class=brownButton>其他</button></div><span id=buyWindowGold></span><div style="overflow: auto; height: 300px"><table border=0><thead><tr><td style="width: 40px"><td style="width: 120px"><td style="width: 30px"><td style="width: 30px"><td><td style="width: 60px"><tbody id=buyWindowTable></table></div></div>'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(){b.textContent=y[w],w++,w>=y.length&&(g.style.display="none",m.style.display="block")}Object.defineProperty(e,"__esModule",{value:!0});var o=n(198),a=r(o),u=n(223),l=r(u),s=n(252),c=r(s),d=n(254),f=r(d),h=l["default"].create("dialogueWindow"),p=h;e["default"]=p,h.css=c["default"],h.html=f["default"];var v=h.querySelector("#dialogueWindowSpeaker"),y=[],w=0,g=document.getElementById("dialogueWindowNext"),m=document.getElementById("dialogueWindowClose"),b=document.getElementById("dialogueWindowContent");g.addEventListener("click",function(){i()}),m.addEventListener("click",function(){setTimeout(function(){a["default"].windows.dialogue.hide(),y=[],w=0},20)}),a["default"].dialogue=function(t,e){g.style.display="block",m.style.display="none",e&&e.length?v.textContent=e+"：":v.textContent="",y=t,w=0,i(),a["default"].windows.dialogue.show()},h.whenUp(["enter","space","esc"],function(){a["default"].windows.dialogue.showing&&("none"!=g.style.display?g.click():"none"!=m.style.display&&m.click())})},function(t,e,n){var r=n(253);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".dialogueWindow table,.dialogueWindow tbody,.dialogueWindow td,.dialogueWindow tr{margin:0;padding:0;width:100%;height:100%;text-align:center}.dialogueWindow button{width:120px;height:60px;font-size:16px;position:absolute}.dialogueWindow #dialogueWindowSpeaker{position:absolute;left:50px;top:50px;font-size:30px;font-weight:700}.dialogueWindow #dialogueWindowClose,.dialogueWindow #dialogueWindowNext{bottom:50px;right:100px}.dialogueWindow #dialogueWindowContent{margin-left:50px;margin-right:50px;max-width:600px;font-size:24px;text-align:center}",""])},function(t,e){t.exports='<div class=window-box><div style="width: 100%; height: 100%"><span id=dialogueWindowSpeaker></span><table><tbody><tr><td><div id=dialogueWindowContent></div></table><button id=dialogueWindowNext style="display: block" class=brownButton>继续</button> <button id=dialogueWindowClose style="display: none" class=brownButton>结束</button></div></div>'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(){for(var t=8,e="",n=0;t>n;n++){var r="";r+='<button data-index="'+n+'" class="interfaceWindowButton">',r+='<label data-index="'+n+'" class="interfaceWindowButtonText"></label>',r+="</button>\n",e+=r}y.innerHTML=e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(198),a=r(o),u=n(223),l=r(u),s=n(256),c=r(s),d=n(260),f=r(d),h=l["default"].create("interfaceWindow"),p=h;e["default"]=p,h.css=c["default"],h.html=f["default"];var v=h.querySelector("button#interfaceWindowUse"),y=h.querySelector("div#interfaceWindowBar"),w=h.querySelector("#interfaceWindowMap"),g=h.querySelector("button#interfaceWindowMenu"),m=h.querySelector("#interfaceWindowHP"),b=h.querySelector("#interfaceWindowSP");h.assign("hideUse",function(){v.style.visibility="hidden"}),h.assign("showUse",function(){v.style.visibility="visible"}),h.on("active",function(){a["default"].start()}),h.on("deactive",function(){a["default"].pause()}),h.whenUp(["esc"],function(t){a["default"].windows["interface"].atop&&setTimeout(function(){g.click()},20)}),setInterval(function(){a["default"].hero&&0==a["default"].paused&&(a["default"].hero.data.time++,a["default"].windows["interface"].datetime())},1e3),i();var x=h.querySelectorAll(".interfaceWindowButton"),k=h.querySelectorAll(".interfaceWindowButtonText");y.addEventListener("click",function(t){var e=t.target.getAttribute("data-index");if(e){var n=a["default"].hero.data.bar[e];if(n)if("skill"==n.type){var r=a["default"].hero.fire(n.id);r&&(t.target.disabled=!0,setTimeout(function(){t.target.disabled=!1},r))}else if("item"==n.type){var i=n.id,o=a["default"].items[i];o.heroUse(),a["default"].windows["interface"].refresh()}}}),h.whenUp(["1","2","3","4","5","6","7","8"],function(t){var e=parseInt(t);Number.isInteger(e)&&e>=0&&e<x.length&&x[e-1].click()}),h.whenUp(["e","E","space","enter"],function(t){a["default"].windows["interface"].showing&&a["default"].hintObject&&a["default"].hintObject.heroUse&&a["default"].hintObject.heroUse()}),v.addEventListener("click",function(t){a["default"].hintObject&&a["default"].hintObject.heroUse&&a["default"].hintObject.heroUse()}),h.assign("status",function(){if(a["default"].hero){var t=a["default"].hero.data.hp/a["default"].hero.data.$hp,e=a["default"].hero.data.sp/a["default"].hero.data.$sp;m.style.width=100*t+"%",b.style.width=100*e+"%",t>=.5?m.style.backgroundColor="green":t>=.25?m.style.backgroundColor="yellow":m.style.backgroundColor="red"}}),h.assign("datetime",function(){if(a["default"].hero&&a["default"].hero.data&&Number.isInteger(a["default"].hero.data.time)){var t=518400,e=43200,n=1440,r=60,i=h.querySelector("#interfaceWindowDatetime"),o=a["default"].hero.data.time,u=Math.floor(o/t);o%=t;var l=Math.floor(o/e);o%=e;var s=Math.floor(o/n);o%=n;var c=Math.floor(o/r);o%=r;var d=o;for(u++,l++,s++,c=c.toString();c.length<2;)c="0"+c;for(d=d.toString();d.length<2;)d="0"+d;i.textContent=l+"月"+s+"日 "+c+":"+d;var f=a["default"].area.map.data.type;"indoor"==f?a["default"].stage.filter("brightness",0):"outdoor"==f?c>=20||4>c?a["default"].stage.filter("brightness",-.15):c>=4&&6>c?a["default"].stage.filter("brightness",-.1):c>=6&&8>c?a["default"].stage.filter("brightness",-.05):c>=8&&10>c?a["default"].stage.filter("brightness",0):c>=10&&12>c?a["default"].stage.filter("brightness",.05):c>=12&&14>c?a["default"].stage.filter("brightness",0):c>=14&&16>c?a["default"].stage.filter("brightness",0):c>=16&&18>c?a["default"].stage.filter("brightness",-.05):c>=18&&20>c&&a["default"].stage.filter("brightness",-.1):"cave"==f&&a["default"].stage.filter("brightness",-.15)}}),h.assign("refresh",function(){for(var t=0;8>t;t++){var e=a["default"].hero.data.bar[t],n=x[t],r=k[t];if(n.disabled=!1,r.disabled=!1,e){var i=e.id,o=e.type;if("skill"==o){var u=a["default"].skills[i];n.style.backgroundImage='url("'+u.icon.src+'")',r.textContent=u.data.cost}else if("item"==o){var l=a["default"].items[i];n.style.backgroundImage='url("'+l.icon.src+'")',a["default"].hero.data.items[i]?r.textContent=a["default"].hero.data.items[i]:(r.textContent="0",n.disabled=!0,r.disabled=!0)}}else r.textContent="",n.style.backgroundImage=""}w.textContent=a["default"].area.map.data.name}),g.addEventListener("click",function(t){a["default"].windows.sysmenu.show()})},function(t,e,n){var r=n(257);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".interfaceWindow{pointer-events:none}.interfaceWindow .interfaceWindowButton{margin-left:3px;margin-right:3px;width:60px;height:60px;border:4px solid gray;border-radius:10px;background-color:hsla(0,0%,39%,.5);display:inline-block;pointer-events:auto;background-repeat:no-repeat;background-size:cover}.interfaceWindow .interfaceWindowButton:hover{filter:brightness(1.2)}.interfaceWindow .interfaceWindowButton:disabled{filter:brightness(.8);cursor:default;pointer-events:none;background-color:gray}.interfaceWindow .interfaceWindowButton img{width:100%;height:100%}.interfaceWindow .interfaceWindowButtonText{position:absolute;background-color:#fff;margin-left:-26px;margin-top:12px}.interfaceWindow #interfaceWindowBar{text-align:center;position:absolute;bottom:10px;width:100%;height:60px}.interfaceWindow #interfaceWindowMap{position:absolute;top:35px;left:5px;background-color:hsla(0,0%,39%,.7);padding:2px}.interfaceWindow #interfaceWindowDatetime{position:absolute;top:10px;left:5px;background-color:hsla(0,0%,39%,.7);padding:2px}.interfaceWindow #interfaceWindowUse{position:absolute;top:5px;right:85px;visibility:hidden;background-image:url("+n(258)+")}.interfaceWindow #interfaceWindowMenu{position:absolute;top:5px;right:5px;background-image:url("+n(259)+")}",""])},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wUcCQAzTZI5lAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAADASURBVFjD7ZbJDsMwCEQzyP//y9NLFbmtF8A49GDOCW9YNOa6TiQHnP8xKicCgEsMWMHkXAsANQsacA9agzTftJhlBNdUO53dO0clhLUI2QkfdJEtAdvgIxHiWbJAEbcAJvkQJdsJj4ASuVArHUBSAz58ktbqNFY8sWZIz6M7D8piufh5EyToPnDBH1lCz2vYTG6Zt+UeKI72WffDdBHxu8LO7MJuwuJZnMhlheL43GpSsjK/3QIesWfJhJ/4i3gBSiBGOyDB6kMAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQffBR0IFQhyUjv2AAABRElEQVRYw+1XwQrCMAxtwi6ePXiQOS/+/weJoA4RD/5C5kEDJTZt09UxcIEdrGnymvdIU+cWq2in/o5yDRFhUhCIOCDicOrv8AG14rUpQcAHxMDJxe+dNWZjqQARgXPOEdGA+GbleLl9+RLR1dt3JqJ9NSASTK5/ri/kBuSTH7qtWgk26XPoti51ALCAGGMpMJAqawxEu1l/rfWPZ7JSIUCqRogINI4ZQChp7D8NRBE17WYdPbXml6IGLTznguCKhKjLBuI3qFpCZa3J2FFqtOSWauTsk1RhSEys7l9ZSC/oZmLzBVJToCnhJsUqN5UKNtRLtOYWFKv/1RIuC9T/ijViaVLW6kHJzVt618TafFMy1HAS6+0bG67mP4/MbkKTVHFArVJ+UrmnWme1DM5W/2ZsUL/PKE+L3778QjPF5C+9xf7KXmSZECb9GPh+AAAAAElFTkSuQmCC"},function(t,e){t.exports='<div id=interfaceWindowBar></div><div style="position: absolute; bottom: 10px; left: 20px; width: 100px; height: 60px"><div style="width: 100px; height: 20px; margin: 5px 0; border: 1px solid gray; background-color: white"><div id=interfaceWindowHP style="width: 100%; height: 100%; background-color: green"></div></div><div style="width: 100px; height: 20px; margin: 5px 0; border: 1px solid gray; background-color: white"><div id=interfaceWindowSP style="width: 100%; height: 100%; background-color: blue"></div></div></div><span id=interfaceWindowDatetime></span> <span id=interfaceWindowMap></span> <button id=interfaceWindowUse class=interfaceWindowButton></button> <button id=interfaceWindowMenu class=interfaceWindowButton></button>'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(222),s=r(l),c=n(262),d=r(c),f=n(264),h=r(f),p=u["default"].create("inventoryWindow"),v=p;e["default"]=v,p.css=d["default"],p.html=h["default"];var y=p.querySelector("button#inventoryWindowClose"),w=p.querySelector("button#inventoryWindowStatus"),g=p.querySelector("button#inventoryWindowAll"),m=p.querySelector("button#inventoryWindowWeapon"),b=p.querySelector("button#inventoryWindowArmor"),x=p.querySelector("button#inventoryWindowPotion"),k=p.querySelector("button#inventoryWindowMaterial"),A=p.querySelector("button#inventoryWindowBook"),S=p.querySelector("button#inventoryWindowMisc"),E=p.querySelector("span#inventoryWindowGold"),W=p.querySelector("#inventoryWindowTable");y.addEventListener("click",function(t){p.hide()}),w.addEventListener("click",function(t){p.hide(),o["default"].windows.status.open()}),p.whenUp(["tab"],function(){setTimeout(function(){p.hide(),o["default"].windows.status.open()},20)}),g.addEventListener("click",function(t){p.open()}),m.addEventListener("click",function(t){p.open("sword|spear|bow")}),b.addEventListener("click",function(t){p.open("head|body|feet")}),x.addEventListener("click",function(t){p.open("potion")}),k.addEventListener("click",function(t){p.open("material")}),A.addEventListener("click",function(t){p.open("book|scroll|letter")}),S.addEventListener("click",function(t){p.open("misc")});var O=null,M=-1;p.assign("open",function(t,e){"undefined"==typeof e&&(e=-1),O=t,M=e;var n="white",r="yellow";g.style.color=n,m.style.color=n,b.style.color=n,x.style.color=n,k.style.color=n,A.style.color=n,S.style.color=n,null==t?g.style.color=r:t.match(/sword/)?m.style.color=r:t.match(/head/)?b.style.color=r:t.match(/potion/)?x.style.color=r:t.match(/material/)?k.style.color=r:t.match(/book/)?A.style.color=r:t.match(/misc/)&&(S.style.color=r),E.textContent=o["default"].hero.data.gold+"G";var i="",a=0,u=Object.keys(o["default"].hero.data.items);u.sort(),u.forEach(function(n){var r=o["default"].hero.data.items[n],u=o["default"].items[n],l=null;if(Object.keys(o["default"].hero.data.equipment).forEach(function(t){var e=o["default"].hero.data.equipment[t];e==u.id&&(l=t)}),!t||-1!=t.indexOf(u.data.type)){var s="";s+=e==a?'<tr style="background-color: green;">\n':"<tr>\n",
s+=u.icon?'  <td style="text-align: center;"><img alt="" src="'+u.icon.src+'"></td>\n':"  <td> </td>\n",s+="  <td>"+(l?"*":"")+u.data.name+"</td>\n",s+='  <td style="text-align: center;">'+u.data.value+"G</td>\n",s+='  <td style="text-align: center;">'+r+"</td>\n",s+="  <td>"+u.data.description+"</td>\n",s+='  <td><button data-id="'+n+'" class="brownButton">操作</button></td>\n',s+="</tr>\n",i+=s,a++}}),W.innerHTML=i,p.show()}),p.whenUp(["enter"],function(){var t=W.querySelectorAll("button");M>=0&&M<t.length&&t[M].click()}),p.whenUp(["up","down"],function(t){var e=W.querySelectorAll("button").length;if(-1==M)"down"==t?p.open(O,0):"up"==t&&p.open(O,e-1);else if("down"==t){var n=M+1;n>=e&&(n=0),p.open(O,n)}else if("up"==t){var n=M-1;0>n&&(n=e-1),p.open(O,n)}}),W.addEventListener("click",function(t){var e=t.target.getAttribute("data-id");e&&o["default"].hero.data.items.hasOwnProperty(e)&&!function(){var t=o["default"].items[e],n=o["default"].hero.data.items[e],r=null;Object.keys(o["default"].hero.data.equipment).forEach(function(e){var n=o["default"].hero.data.equipment[e];n==t.id&&(r=e)});var i={};t.data.type.match(/potion/)?(i["使用"]="use",i["快捷键"]="shortcut"):t.data.type.match(/sword|spear|bow|head|body|feet|neck|ring/)?r?i["卸下"]="takeoff":i["装备"]="puton":t.data.type.match(/book/)&&(i["阅读"]="read"),i["丢弃"]="drop",(0,s["default"])(i).then(function(i){switch(i){case"puton":var a=t.data.type;return a.match(/sword|spear|bow/)&&(a="weapon"),o["default"].hero.data.equipment[a]=t.id,p.open(O);case"takeoff":return t.data.type.match(/sword|spear|bow/)?o["default"].hero.data.equipment.weapon=null:o["default"].hero.data.equipment[t.data.type]=null,p.open(O);case"use":t.heroUse&&t.heroUse();break;case"read":t.heroUse&&t.heroUse();break;case"drop":return r&&(o["default"].hero.data.equipment[r]=null),o["default"].addBag(o["default"].hero.x,o["default"].hero.y).then(function(t){t.inner.hasOwnProperty(e)?t.inner[e]+=n:t.inner[e]=n}),delete o["default"].hero.data.items[e],o["default"].hero.data.bar.forEach(function(t,n,r){t&&t.id==e&&(r[n]=null)}),o["default"].windows["interface"].refresh(),p.open(O);case"shortcut":(0,s["default"])({1:0,2:1,3:2,4:3,5:4,6:5,7:6,8:7},function(e){Number.isFinite(e)&&e>=0&&(o["default"].hero.data.bar[e]={id:t.id,type:"item"},o["default"].windows["interface"].refresh())})}})}()}),p.whenUp(["esc"],function(){setTimeout(function(){p.hide()},20)}),p.whenUp(["left","right"],function(t){if("right"==t){var e=O;null==e?e="sword|spear|bow":e.match(/sword/)?e="head|body|feet":e.match(/head/)?e="potion":e.match(/potion/)?e="material":e.match(/material/)?e="book|scroll|letter":e.match(/book/)?e="misc":e.match(/misc/)&&(e=null),p.open(e,-1)}else if("left"==t){var e=O;null==e?e="misc":e.match(/sword/)?e=null:e.match(/head/)?e="sword|spear|bow":e.match(/potion/)?e="head|body|feet":e.match(/material/)?e="potion":e.match(/book/)?e="material":e.match(/misc/)&&(e="book|scroll|letter"),p.open(e,-1)}})},function(t,e,n){var r=n(263);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".inventoryWindow table{width:100%}.inventoryWindow table button{width:60px;height:40px;font-size:16px}.inventoryWindow #inventoryWindowItemBar{height:50px}.inventoryWindow #inventoryWindowItemBar>button{width:60px;height:40px;font-size:16px;margin:0 5px 5px}.inventoryWindow #inventoryWindowClose,.inventoryWindow #inventoryWindowStatus{float:right}.inventoryWindow #inventoryWindowTable tr:nth-child(odd){background-color:hsla(0,0%,75%,.6)}.inventoryWindow #inventoryWindowGold{position:absolute;right:100px;bottom:10px;font-size:20px;color:#000;font-weight:700}",""])},function(t,e){t.exports='<div class=window-box><div id=inventoryWindowItemBar><button id=inventoryWindowClose class=brownButton>关闭</button> <button id=inventoryWindowStatus class=brownButton>状态</button> <button id=inventoryWindowAll class=brownButton>全部</button> <button id=inventoryWindowWeapon class=brownButton>武器</button> <button id=inventoryWindowArmor class=brownButton>护甲</button> <button id=inventoryWindowPotion class=brownButton>药水</button> <button id=inventoryWindowMaterial class=brownButton>材料</button> <button id=inventoryWindowBook class=brownButton>书籍</button> <button id=inventoryWindowMisc class=brownButton>其他</button></div><span id=inventoryWindowGold></span><div style="overflow: auto; height: 310px"><table border=0><thead><tr><td style="width: 40px; text-align: center"><td style="width: 120px"><td style="width: 30px"><td style="width: 30px"><td><td style="width: 60px"><tbody id=inventoryWindowTable></table></div></div>'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=(r(i),n(223)),a=r(o),u=n(266),l=r(u),s=n(268),c=r(s),d=a["default"].create("loadingWindow"),f=d;e["default"]=f,d.css=l["default"],d.html=c["default"];var h=d.querySelector("#loadingWindowProgress"),p=d.querySelector("#loadingWindowText"),v=["打开游戏菜单之后，游戏是暂停的，你可以在这时思考下战斗策略","记得出门带着矿工锄和采药铲，或许能从其中赚点小钱","职业、信仰、技能，都可以任意改变，但是必须付出代价","你的信仰决定了神对你的祝福，还有某些人或者组织对你的看法","信仰是可以改变的，不过艾利韦斯的居民并不喜欢总是改变自己信仰的人","艾利韦斯信仰自由，没有信仰也是一种信仰，但是你享受不到任何神的祝福"];d.assign("begin",function(){h.innerHTML="",p.textContent=v[Math.floor(Math.random()*v.length)],d.show()}),d.assign("update",function(t){h.innerHTML=t}),d.assign("end",function(){d.hide()})},function(t,e,n){var r=n(267);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".loadingWindow{text-align:center}.loadingWindow label{color:#fff;font-size:48px}.loadingWindow #loadingWindowLoadingIcon{width:50px;height:50px;margin-top:15px;margin-bottom:10px;animation:loadingAnimation 1s linear infinite}@keyframes loadingAnimation{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.loadingWindow #loadingWindowBox{width:500px;height:300px;border-radius:25px;position:fixed;top:75px;left:150px;background-color:gray}.loadingWindow #loadingWindowText{color:#fff}",""])},function(t,e,n){t.exports="<div id=loadingWindowBox><img id=loadingWindowLoadingIcon src="+n(269)+" alt=loading><br><label>请稍等...<small id=loadingWindowProgress></small></label><br><h5 id=loadingWindowText></h5></div>"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0ibG9hZGluZ0ljb24iIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjUwIiBmaWxsPSIjODA4MDgwIiAvPgogIDxwYXRoIGQ9Ik01MCw1MCBoLTQwIGE0MCw0MCAwIDEsMCA0MCwtNDAgeiIgZmlsbD0id2hpdGUiIC8+CiAgPHBhdGggZD0iTTQ5LDQ5IGgtMzAgYTMwLDMwIDAgMSwwIDMwLC0zMCB6IiBmaWxsPSIjODA4MDgwIiAvPgo8L3N2Zz4K"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(271),s=r(l),c=n(273),d=r(c),f=u["default"].create("mainWindow"),h=f;e["default"]=h,f.css=s["default"],f.html=d["default"];var p=f.querySelector("#mainWindowContinue"),v=f.querySelector("#mainWindowNew"),y=f.querySelector("#mainWindowLoad"),w=f.querySelector("#mainWindowFullscreen");w.addEventListener("click",function(t){o["default"].windows.setting.toggle()}),f.on("beforeShow",function(){o["default"].Archive.last()?p.style.visibility="visible":p.style.visibility="hidden"}),p.addEventListener("click",function(t){f.hide(),setTimeout(function(){o["default"].Archive.load()},20)}),v.addEventListener("click",function(t){f.hide(),o["default"].Register.reg()}),y.addEventListener("click",function(t){f.hide(),o["default"].windows.archive.open()})},function(t,e,n){var r=n(272);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".mainWindow h1{font-size:60px}.mainWindow h1,.mainWindow h4{margin-bottom:0}.mainWindow button{width:120px;height:60px;margin-top:10px}.mainWindow #mainWindowBox{text-align:center;height:412px;background-color:hsla(30,61%,85%,.85);border:20px solid rgba(134,93,52,.85)}.mainWindow #mainWindowFullscreen{position:absolute;left:640px;top:30px}",""])},function(t,e){t.exports="<div id=mainWindowBox><h1>Elliorwis</h1><h4>艾利韦斯</h4><br><button id=mainWindowContinue class=brownButton>继续旅程</button><br><button id=mainWindowNew class=brownButton>新的旅程</button><br><button id=mainWindowLoad class=brownButton>读取进度</button><br><button id=mainWindowFullscreen class=brownButton>全屏</button></div>"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(275),s=r(l),c=n(277),d=r(c),f=u["default"].create("mapWindow"),h=f;e["default"]=h,f.css=s["default"],f.html=d["default"];var p=f.querySelector("#mapWindowClose"),v=f.querySelector("#mapWindowMap");p.addEventListener("click",function(t){o["default"].windows.map.hide()}),f.whenUp(["esc"],function(t){setTimeout(function(){p.click()},20)}),f.on("beforeShow",function(t){if(o["default"].stage&&o["default"].area&&o["default"].area.map){var e={x:o["default"].stage.x,y:o["default"].stage.y,centerX:o["default"].stage.centerX,centerY:o["default"].stage.centerY};o["default"].stage.x=0,o["default"].stage.y=0,o["default"].stage.centerX=0,o["default"].stage.centerY=0;var n=document.createElement("canvas");n.width=o["default"].area.map.width,n.height=o["default"].area.map.height;var r=n.getContext("2d");o["default"].stage.draw(r);var i=document.createElement("canvas");i.width=Math.floor(n.width/8),i.height=Math.floor(n.height/8);var a=i.getContext("2d");a.drawImage(n,0,0,n.width,n.height,0,0,i.width,i.height),r=null,n=null,v.innerHTML="",v.appendChild(i),o["default"].stage.x=e.x,o["default"].stage.y=e.y,o["default"].stage.centerX=e.centerX,o["default"].stage.centerY=e.centerY}})},function(t,e,n){var r=n(276);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".mapWindow{text-align:center}.mapWindow table,.mapWindow tbody,.mapWindow td,.mapWindow tr{width:100%;height:100%;margin:0;padding:0}.mapWindow #mapWindowClose{position:absolute;right:50px;top:50px;width:120px;height:60px;font-size:16px}.mapWindow #mapWindowMap canvas,.mapWindow #mapWindowMap img{max-width:700px;max-height:320px}",""])},function(t,e){t.exports="<div class=window-box><button id=mapWindowClose class=brownButton>关闭</button><table><tbody><tr><td><div id=mapWindowMap></div></table></div>"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(279),s=r(l),c=n(281),d=r(c),f=u["default"].create("overWindow"),h=f;e["default"]=h,f.css=s["default"],f.html=d["default"];var p=f.querySelector("#overWindowMessage"),v=f.querySelector("#overWindowReason"),y=["不幸的事情终于发生了……即便你的内心曾对神灵祈祷","不幸的事情终于发生了……你就知道自己今天不应该穿白色的袜子","不幸的事情终于发生了……明明还没有体验过天伦之乐","不幸的事情终于发生了……你的墓碑上写着：“下次不能随便踢小动物”","不幸的事情终于发生了……你感觉自己的身体变轻了…轻了…轻了…","不幸的事情终于发生了……你摸了摸自己的脖子，似乎找不到脑袋了，于是你一赌气","不幸的事情终于发生了……你的墓碑上写着：“下次再也不把治疗药水借给别人了”","不幸的事情终于发生了……曾经有一瓶治疗药水摆在你面前，而你没有珍惜","不幸的事情终于发生了……你回想起曾经在广阔的原野上尽情的奔跑","不幸的事情终于发生了……不过好消息是你再也不用减肥了","不幸的事情终于发生了……下次在冒险前一定要吃饱饭"];f.assign("open",function(t){t?v.textContent=t:v.innerHTML="",p.textContent=y[Math.floor(Math.random()*y.length)],o["default"].windows.stage.hide(),o["default"].windows["interface"].hide(),f.show()}),overWindowClose.addEventListener("click",function(t){o["default"].clearStage(),f.hide(),o["default"].windows.main.show()})},function(t,e,n){var r=n(280);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".overWindow{text-align:center}.overWindow table,.overWindow tbody,.overWindow td,.overWindow tr{width:100%;height:100%;margin:0;padding:0}.overWindow #overWindowClose{position:absolute;right:50px;top:50px;width:120px;height:60px;font-size:16px}.overWindow #overWindowMap canvas,.overWindow #overWindowMap img{max-width:700px;max-height:320px}",""])},function(t,e){t.exports="<div class=window-box><button id=overWindowClose class=brownButton>返回主菜单</button><table><tbody><tr><td><div><h1 id=overWindowMessage></h1><h2 id=overWindowReason></h2></div></table></div>"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(283),s=r(l),c=n(285),d=r(c),f=u["default"].create("pickupWindow"),h=f;e["default"]=h,f.css=s["default"],f.html=d["default"];var p=f.querySelector("button#pickupWindowClose"),v=f.querySelector("button#pickupWindowAll"),y=f.querySelector("#pickupWindowTable"),w=null,g=-1;p.addEventListener("click",function(t){o["default"].windows.pickup.hide()}),v.addEventListener("click",function(t){var e=w;e&&e.inner&&Object.keys(e.inner).length>0&&(Object.keys(e.inner).forEach(function(t){var n=inner[t];"gold"==t?o["default"].hero.data.gold+=n:o["default"].hero.data.items[t]?o["default"].hero.data.items[t]+=n:o["default"].hero.data.items[t]=n,delete e.inner[t]}),o["default"].windows.pickup.open(e))}),f.whenUp(["a","A"],function(t){v.click()}),f.whenUp(["esc"],function(t){setTimeout(function(){f.hide()},20)}),f.whenUp(["1","2","3","4","5","6","7","8","9"],function(t){for(var e=y.querySelectorAll("button"),n=0,r=e.length;r>n;n++){var i=e[n].getAttribute("data-index");i&&i==t&&e[n].click()}}),f.assign("open",function(t,e){if("undefined"==typeof e&&(e=-1),g=e,!t.inner||Object.keys(t.inner).length<=0)return o["default"].area.bags.has(t)&&(t.erase(),o["default"].area.bags["delete"](t)),o["default"].area.items.has(t)&&(t.erase(),o["default"].area.items["delete"](t)),void o["default"].windows.pickup.hide();w=t;var n=1,r="";Object.keys(t.inner).forEach(function(i){var a=t.inner[i],u=o["default"].items[i],l="";l+=e==n-1?'<tr style="background-color: green;">\n':"<tr>\n",l+=u.icon?'  <td style="text-align: center;"><img alt="" src="'+u.icon.src+'"></td>\n':"  <td> </td>\n",l+="  <td>"+u.data.name+"</td>\n",l+='  <td style="text-align: center;">'+u.data.value+"G</td>\n",l+='  <td style="text-align: center;">'+a+"</td>\n",l+="  <td>"+u.data.description+"</td>\n",l+='  <td><button data-id="'+i+'" data-index="'+n+'" class="brownButton">'+(9>=n?n:"")+" 拿取</button></td>\n",l+="</tr>\n",r+=l,n++}),y.innerHTML=r,o["default"].windows.pickup.show()}),f.whenUp(["enter"],function(){var t=y.querySelectorAll("button");g>=0&&g<t.length&&t[g].click()}),f.whenUp(["up","down"],function(t){var e=y.querySelectorAll("button").length;if(-1==g)"down"==t?f.open(w,0):"up"==t&&f.open(w,e-1);else if("down"==t){var n=g+1;n>=e&&(n=0),f.open(w,n)}else if("up"==t){var n=g-1;0>n&&(n=e-1),f.open(w,n)}}),y.addEventListener("click",function(t){var e=t.target.getAttribute("data-id");if(e&&w.inner&&w.inner.hasOwnProperty(e)){var n=w.inner[e];"gold"==e?o["default"].hero.data.gold+=n:o["default"].hero.data.items.hasOwnProperty(e)?o["default"].hero.data.items[e]+=n:o["default"].hero.data.items[e]=n,delete w.inner[e],f.open(w)}})},function(t,e,n){var r=n(284);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".pickupWindow table{width:100%}.pickupWindow button{width:60px;height:40px;font-size:16}.pickupWindow #pickupWindowTable tr:nth-child(odd){background-color:hsla(0,0%,75%,.6)}",""])},function(t,e){t.exports='<div class=window-box><button id=pickupWindowClose class=brownButton>关闭</button> <button id=pickupWindowAll class=brownButton>A 全部</button><table border=0><thead><tr><td style="width: 40px"><td style="width: 120px"><td style="width: 30px"><td style="width: 30px"><td><td style="width: 60px"><tbody id=pickupWindowTable></table></div>'},function(e,n,r){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var o=r(198),a=i(o),u=r(223),l=i(u),s=r(287),c=i(s),d=r(289),f=i(d),h=l["default"].create("questWindow"),p=h;n["default"]=p,h.css=c["default"],h.html=f["default"];var v=h.querySelector("#questWindowClose"),y=h.querySelector("#questWindowCurrent"),w=h.querySelector("#questWindowPast"),g=h.querySelector("#questWindowTable");v.addEventListener("click",function(){h.hide()}),h.whenUp(["esc"],function(t){setTimeout(function(){v.click()},20)}),y.addEventListener("click",function(){h.hide(),h.current()}),w.addEventListener("click",function(){h.hide(),h.past()}),h.assign("current",function(){y.disabled=!0,w.disabled=!1;var e="",n=a["default"].hero.data.currentQuest;n.forEach(function(n){var r=a["default"].Quest.isComplete(n),i='<div class="questWindowItem">\n';if(i+='  <label style="font-size: 20px; margin: 10px;">'+n.name+(r?"[已完成]":"[未完成]")+"</label>\n",i+='  <div style="margin: 10px;">简介：'+n.description+"</div>\n",n.reward&&(i+='  <div style="margin: 10px;">任务奖励：',n.reward.gold&&(i+='<label style="margin-right: 20px;">金币：'+n.reward.gold+"</label>"),n.reward.exp&&(i+='<label style="margin-right: 20px;">经验：'+n.reward.exp+"</label>"),i+="  </div>"),n.target&&"kill"==n.target.kill){var o=!0,u=!1,l=void 0;try{for(var s,c=n.target.kill[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value;i+='<div style="margin: 10px;">'+d.name+"："+d.current+" / "+t.need+"</div>"}}catch(f){u=!0,l=f}finally{try{!o&&c["return"]&&c["return"]()}finally{if(u)throw l}}}i+='  <label style="margin: 10px;">给予人：'+n.fromMap+" 的 "+n.fromName+"</label>\n",i+='  <label style="margin: 10px;">交付人：'+n.toMap+" 的 "+n.toName+"</label>\n",i+="</div>\n",e+=i}),e.length<=0&&(e="<div><label>没有正在进行的任务</label></div>"),g.innerHTML=e,h.show()}),h.assign("past",function(){y.disabled=!1,w.disabled=!0;var e="",n=a["default"].hero.data.completeQuest;n.forEach(function(n){var r='<div class="questWindowItem">\n';if(r+='  <label style="font-size: 20px; margin: 10px;">'+n.name+"[已完成]</label>\n",r+='  <div style="margin: 10px;">简介：'+n.description+"</div>\n",n.reward&&(r+='  <div style="margin: 10px;">任务奖励：',n.reward.gold&&(r+='<label style="margin-right: 20px;">金币：'+n.reward.gold+"</label>"),n.reward.exp&&(r+='<label style="margin-right: 20px;">经验：'+n.reward.exp+"</label>"),r+="  </div>"),n.target&&"kill"==n.target.type){var i=!0,o=!1,a=void 0;try{for(var u,l=n.target.kill[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;r+='<div style="margin: 10px;">'+s.name+"："+s.current+" / "+t.need+"</div>"}}catch(c){o=!0,a=c}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw a}}}r+='  <label style="margin: 10px;">给予人：'+n.fromMap+" 的 "+n.fromName+"</label>\n",r+='  <label style="margin: 10px;">交付人：'+n.toMap+" 的 "+n.toName+"</label>\n",r+="</div>\n",e+=r}),e.length<=0&&(e="<div><label>没有已完成任务</label></div>"),g.innerHTML=e,h.show()}),g.addEventListener("click",function(t){var e=t.target.getAttribute("data-id");e&&("remove"==type?(a["default"].Archive.remove(e),h.open()):"load"==type&&(a["default"].Archive.load(e),h.hide()))})},function(t,e,n){var r=n(288);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".questWindow #questWindowTable{width:100%;overflow-y:auto;height:320px}.questWindow .questWindowItem{border:1px solid gray;border-radius:10px;margin:10px}.questWindow .questWindowItem>button{width:100px;height:40px;border-radius:5px}.questWindow #questWindowItemBar button{width:100px;height:30px;font-size:16px;margin-bottom:5px}.questWindow #questWindowClose{float:right}",""])},function(t,e){t.exports="<div class=window-box><div id=questWindowItemBar><button id=questWindowClose class=brownButton>关闭</button> <button id=questWindowCurrent class=brownButton>当前任务</button> <button id=questWindowPast class=brownButton>已完成</button></div><div id=questWindowTable></div></div>"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(291),s=r(l),c=n(293),d=r(c),f=u["default"].create("registerWindow"),h=f;e["default"]=h,f.css=s["default"],f.html=d["default"];var p=f.querySelector("#submit"),v=f.querySelector("#back");p.addEventListener("click",function(){o["default"].Register.submit()}),v.addEventListener("click",function(){f.hide(),o["default"].windows.main.show()})},function(t,e,n){var r=n(292);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".registerWindow{text-align:center;height:412px;background-color:hsla(30,61%,85%,.85);border:20px solid rgba(134,93,52,.85)}.registerWindow hr{width:90%}.registerWindow input{width:240px;height:40px;border-radius:5px;text-align:center;font-size:16px;background-color:#d5ab63;margin:10px}.registerWindow label{font-size:20px;color:#fff}.registerWindow select{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:200px;height:40px;border-radius:5px;text-align:center;font-size:16px;background-color:#d5ab63;margin:10px}.registerWindow #registerWindowDisplay{position:fixed;height:250px;width:64px;left:80px;top:25px;transform:scale(1.4);-webkit-transform:scale(1.4);transform-origin:left top 0;-webkit-transform-origin:left top 0}.registerWindow #registerWindowContainer{overflow-x:hidden;overflow-y:scroll;left:200px;top:20px;width:620px;height:410px;position:fixed}.registerWindow #registerWindowBelief,.registerWindow #registerWindowClass{text-align:center;width:100%}.registerWindow #back,.registerWindow #submit{width:100px;height:60px}",""])},function(t,e){t.exports='<div id=registerWindowContainer><div id=registerWindowDisplaySelect><div><label>性别</label><select data-type=sex><option value=male>男性<option value=female>女性</select></div><div><label>皮肤</label><select data-type=body><option value=light>粉白<option value=dark>深色<option value=dark2>更深<option value=tanned>黄白<option value=tanned2>黄灰</select></div><div><label>眼睛</label><select data-type=eyes><option value=blue>蓝色<option value=brown>棕色<option value=gray>灰色<option value=green>绿色<option value=orange>橙色<option value=purple>紫色<option value=red>红色<option value=yellow>黄色</select></div><div id=customMaleHair><label>头发</label><select data-type=malehair><option value="">无<option value=bedhead>Bedhead<option value=long>Long<option value=longhawk>Longhawk<option value=messy1>messy1<option value=messy2>messy2<option value=mohawk>Mohawk<option value=page>Page<option value=parted>Parted<option value=plain>Plain<option value=shorthawk>Shorthawk</select></div><div id=customFemaleHair style="display: none"><label>头发</label><select data-type=femalehair><option value="">无<option value=bangs>bangs<option value=bangslong>bangslong<option value=bangslong2>bangslong2<option value=bunches>bunches<option value=loose>loose<option value=pixie>pixie<option value=ponytail>ponytail<option value=ponytail2>ponytail2<option value=princess>princess<option value=shoulderl>shoulderl<option value=shoulderr>shoulderr<option value=swoop>swoop<option value=unkempt>unkempt</select></div><div><label>发色</label><select data-type=haircolor><option value=black>Black<option value=blonde>Blonde<option value=blonde2>blonde2<option value=blue>blue<option value=blue2>blue2<option value=brown>brown<option value=brown2>brown2<option value=brunette>brunette<option value=brunette2>brunette2<option value=dark-blonde>dark-blonde<option value=gold>gold<option value=gray>gray<option value=gray2>gray2<option value=green>green<option value=green2>green2<option value=light-blonde>light-blonde<option value=light-blonde2>light-blonde2<option value=pink>pink<option value=pink2>pink2<option value=purple>purple<option value=raven>raven<option value=raven2>raven2<option value=redhead>redhead<option value=redhead2>redhead2<option value=ruby-red>ruby-red<option value=white>white<option value=white-blonde>white-blonde<option value=white-blonde2>white-blonde2<option value=white.centerYan>white.centerYan</select></div><div><label>帽子</label><select data-type=head><option value="">无<option value=chainhat>chainhat<option value=chain_hood>chain_hood<option value=cloth_hood>cloth_hood<option value=leather_cap>leather_cap<option value=red>red</select></div><div><label>上衣</label><select data-type=shirts><option value="">无<option value=brown>brown<option value=maroon>maroon<option value=teal>teal<option value=white>white</select></div><div><label>裤子</label><select data-type=pants><option value="">无<option value=magenta>magenta<option value=red>red<option value=teal>teal<option value=white>white</select></div><div><label>鞋子</label><select data-type=shoes><option value="">无<option value=black>black<option value=brown>brown<option value=maroon>maroon</select></div><div><label>头盔</label><select data-type=armorhelms><option value="">无<option value=golden>黄金<option value=metal>白银</select></div><div><label>胸甲</label><select data-type=armorchest><option value="">无<option value=golden>黄金<option value=metal>白银</select></div><div><label>臂甲</label><select data-type=armorarm><option value="">无<option value=golden>黄金<option value=metal>白银</select></div><div><label>腿甲</label><select data-type=armorlegs><option value="">无<option value=golden>黄金<option value=metal>白银</select></div><div><label>足甲</label><select data-type=armorfeet><option value="">无<option value=golden>黄金<option value=metal>白银</select></div></div><hr><div id=registerWindowPersonal><div><label>信仰</label><select id=registerWindowBeliefChoice data-type=belief><option value=None>无信仰<option value=Elen>艾琳 - 知识女神<option value=Enlon>恩朗 - 死亡主宰<option value=Minare>密娜 - 丰收女神<option value=Achiel>阿切奥 - 保护之神<option value=Racha>拉克 - 魔法女神<option value=Aestor>阿斯托 - 盗贼之神<option value=Hielach>赫拉克 - 财富之神<option value=Alik>阿丽克 - 治愈女神<option value=Amarien>阿玛恩 - 力量之神</select><div id=registerWindowBelief></div></div><div><label>职业</label><select id=registerWindowClassChoice data-type=class><option value=warrior>战士<option value=archer>弓箭手<option value=wizard>魔法师<option value=priest>牧师<option value=bard>吟游诗人<option value=thief>盗贼<option value=business>商人</select><div id=registerWindowClass></div></div><div style="padding-top: 20px"><input id=registerHeroName placeholder=名字></div></div><div style="padding-bottom: 20px; padding-top: 10px"><button id=submit class=brownButton>完成</button> <button id=back class=brownButton>返回</button></div></div><div id=registerWindowDisplay><label id=loading>正在载入预览</label><br><canvas width=64 height=250></canvas></div>'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(295),s=r(l),c=n(297),d=r(c),f=u["default"].create("sellWindow"),h=f;e["default"]=h,f.css=s["default"],f.html=d["default"];var p=f.querySelector("button#sellWindowClose"),v=f.querySelector("button#sellWindowBuy"),y=f.querySelector("button#sellWindowAll"),w=f.querySelector("button#sellWindowWeapon"),g=f.querySelector("button#sellWindowArmor"),m=f.querySelector("button#sellWindowPotion"),b=f.querySelector("button#sellWindowMaterial"),x=f.querySelector("button#sellWindowBook"),k=f.querySelector("button#sellWindowMisc"),A=f.querySelector("span#sellWindowGold"),S=f.querySelector("#sellWindowTable"),E=null,W=null,O=-1;p.addEventListener("click",function(){f.hide()}),v.addEventListener("click",function(){f.hide(),o["default"].windows.buy.open(E)}),f.whenUp(["tab"],function(){setTimeout(function(){f.hide(),o["default"].windows.buy.open(E)},20)}),y.addEventListener("click",function(t){f.open(E,null)}),w.addEventListener("click",function(t){f.open(E,"sword|spear|bow")}),g.addEventListener("click",function(t){f.open(E,"head|body|feet")}),m.addEventListener("click",function(t){f.open(E,"potion")}),b.addEventListener("click",function(t){f.open(E,"material")}),x.addEventListener("click",function(t){f.open(E,"book|scroll|letter")}),k.addEventListener("click",function(t){f.open(E,"misc")}),f.assign("open",function(t,e,n){"undefined"==typeof n&&(n=-1),E=t,W=e,O=n,A.textContent=o["default"].hero.data.gold+"G";var r="white",i="yellow";y.style.color=r,w.style.color=r,g.style.color=r,m.style.color=r,b.style.color=r,x.style.color=r,k.style.color=r,null==e?y.style.color=i:e.match(/sword/)?w.style.color=i:e.match(/head/)?g.style.color=i:e.match(/potion/)?m.style.color=i:e.match(/material/)?b.style.color=i:e.match(/book/)?x.style.color=i:e.match(/misc/)&&(k.style.color=i);var a=0,u="";Object.keys(o["default"].hero.data.items).forEach(function(t){var r=o["default"].hero.data.items[t],i=o["default"].items[t];if(!e||-1!=e.indexOf(i.data.type)){var l="";l+=n==a?'<tr style="background-color: green;">\n':"<tr>\n",l+=i.icon?'  <td style="text-align: center;"><img alt="" src="'+i.icon.src+'"></td>\n':"  <td> </td>\n",l+="  <td>"+i.data.name+"</td>\n",l+='  <td style="text-align: center;">'+Math.ceil(.8*i.data.value)+"G</td>\n",l+='  <td style="text-align: center;">'+r+"</td>\n",l+="  <td>"+i.data.description+"</td>\n",l+='  <td><button data-id="'+t+'" class="brownButton">卖出</button></td>\n',l+="</tr>\n",u+=l,a++}}),S.innerHTML=u,f.show()}),f.whenUp(["enter"],function(){var t=S.querySelectorAll("button");O>=0&&O<t.length&&t[O].click()}),f.whenUp(["up","down"],function(t){var e=S.querySelectorAll("button").length;if(!(0>=e))if(-1==O)"down"==t?f.open(E,W,0):"up"==t&&f.open(E,W,e-1);else if("down"==t){var n=O+1;n>=e&&(n=0),f.open(E,W,n)}else if("up"==t){var n=O-1;0>n&&(n=e-1),f.open(E,W,n)}}),f.whenUp(["esc"],function(){setTimeout(function(){f.hide()},20)}),f.whenUp(["left","right"],function(t){if("right"==t){var e=W;null==e?e="sword":e.match(/sword/)?e="head":e.match(/head/)?e="potion":e.match(/potion/)?e="material":e.match(/material/)?e="book":e.match(/book/)?e="misc":e.match(/misc/)&&(e=null),f.open(E,e)}else if("left"==t){var e=W;null==e?e="misc":e.match(/sword/)?e=null:e.match(/head/)?e="sword":e.match(/potion/)?e="head":e.match(/material/)?e="potion":e.match(/book/)?e="material":e.match(/misc/)&&(e="book"),f.open(E,e)}}),S.addEventListener("click",function(t){var e=t.target.getAttribute("data-id");if(e&&o["default"].hero.data.items.hasOwnProperty(e)){var n=o["default"].items[e],r=o["default"].hero.data.items[e];E.hasOwnProperty(e)?E[e]++:E[e]=1,1==r?(o["default"].hero.data.bar.forEach(function(t,n,r){t&&t.id==e&&(r[n]=null)}),Object.keys(o["default"].hero.data.equipment).forEach(function(t){var n=o["default"].hero.data.equipment[t];n==e&&(o["default"].hero.data.equipment[t]=null)}),delete o["default"].hero.data.items[e]):o["default"].hero.data.items[e]--,o["default"].hero.data.gold+=Math.ceil(.8*n.data.value),o["default"].windows["interface"].refresh(),f.open(E,W)}})},function(t,e,n){var r=n(296);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".sellWindow table{width:100%}.sellWindow table button{width:60px;height:40px;font-size:16px}.sellWindow #sellWindowTable tr:nth-child(odd){background-color:hsla(0,0%,75%,.6)}.sellWindow #sellWindowItemBar>button{width:60px;height:40px;font-size:16px;margin:0 5px 5px}.sellWindow #sellWindowClose,.sellWindow #sellWindowStatus{float:right}.sellWindow #sellWindowGold{position:absolute;right:100px;bottom:30px;font-size:20px;color:#000}",""])},function(t,e){t.exports='<div class=window-box><div id=sellWindowItemBar><button id=sellWindowClose class=brownButton>关闭</button> <button id=sellWindowBuy class=brownButton>买入</button> <button id=sellWindowAll class=brownButton>全部</button> <button id=sellWindowWeapon class=brownButton>武器</button> <button id=sellWindowArmor class=brownButton>护甲</button> <button id=sellWindowPotion class=brownButton>药水</button> <button id=sellWindowMaterial class=brownButton>材料</button> <button id=sellWindowBook class=brownButton>书籍</button> <button id=sellWindowMisc class=brownButton>其他</button></div><span id=sellWindowGold></span><div style="overflow: auto; height: 300px"><table border=0><thead><tr><td style="width: 40px"><td style="width: 120px"><td style="width: 30px"><td style="width: 30px"><td><td style="width: 60px"><tbody id=sellWindowTable></table></div></div>';
},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(229),s=r(l),c=n(222),d=r(c),f=n(299),h=r(f),p=n(301),v=r(p),y=u["default"].create("settingWindow"),w=y;e["default"]=w,y.css=h["default"],y.html=v["default"];var g=y.querySelector("#settingWindowShortcut"),m=y.querySelector("#settingWindowShortcutAll"),b=y.querySelector("#settingWindowClose"),x=y.querySelector("#settingWindowScale"),k=y.querySelector("#settingWindowFullscreen"),A=y.querySelector("#settingWindowRendererType");g.addEventListener("click",function(t){(0,d["default"])({1:0,2:1,3:2,4:3,5:4,6:5,7:6,8:7}).then(function(t){Number.isFinite(t)&&(o["default"].hero.data.bar[t]=null,o["default"].windows["interface"].refresh())})}),m.addEventListener("click",function(t){(0,s["default"])("确定要删除所有快捷栏图表吗？").then(function(){for(var t=0;8>t;t++)o["default"].hero.data.bar[t]=null;o["default"].windows["interface"].refresh()})["catch"](function(){})}),y.on("beforeShow",function(){A.textContent=o["default"].stage.rendererType}),b.addEventListener("click",function(t){y.hide()}),x.addEventListener("click",function(t){o["default"].config.scale=!o["default"].config.scale,y.show()}),y.whenUp(["esc"],function(t){b.click()}),y.assign("toggle",function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}),k.addEventListener("click",function(t){y.toggle()})},function(t,e,n){var r=n(300);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".settingWindow #settingWindowBox{width:100%;height:360px}.settingWindow #settingWindowBox button{width:120px;height:60px;font-size:16px;display:block}.settingWindow #settingWindowClose{width:60px;height:40px;font-size:16px;float:right}",""])},function(t,e){t.exports="<div class=window-box><button id=settingWindowClose class=brownButton>关闭</button><div id=settingWindowRendererType></div><div id=settingWindowBox><button id=settingWindowFullscreen class=brownButton>全屏</button> <button id=settingWindowScale class=brownButton>缩放</button> <button id=settingWindowShortcut class=brownButton>清除快捷栏</button> <button id=settingWindowShortcutAll class=brownButton>清除全部快捷栏</button></div></div>"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(229),s=r(l),c=n(222),d=r(c),f=n(303),h=r(f),p=n(305),v=r(p),y=u["default"].create("skillWindow"),w=y;e["default"]=w,y.css=h["default"],y.html=v["default"];var g=y.querySelector("button#skillWindowClose"),m=y.querySelector("#skillWindowTable"),b=-1;g.addEventListener("click",function(t){y.hide()}),y.whenUp(["esc"],function(t){setTimeout(function(){y.hide()},20)}),y.assign("open",function(t){"undefined"==typeof t&&(t=-1),b=t;var e=0,n="";o["default"].hero.data.skills.forEach(function(r){var i=o["default"].skills[r],a="";a+=t==e?'<tr style="background-color: green;">\n':"<tr>\n",a+='  <td><img alt="" src="'+i.icon.src+'"></td>\n',a+="  <td>"+i.data.name+"</td>\n",a+="  <td>"+i.data.description+"</td>\n",a+='  <td><button data-id="'+r+'" class="brownButton skillWindowManage">管理</button></td>\n',a+="</tr>\n",n+=a,e++}),m.innerHTML=n,o["default"].windows.skill.show()}),y.whenUp(["enter"],function(){var t=y.querySelectorAll(".skillWindowManage");b>=0&&b<t.length&&t[b].click()}),y.whenUp(["up","down"],function(t){var e=y.querySelectorAll(".skillWindowManage").length;if(-1==b)"down"==t?y.open(0):"up"==t&&y.open(e-1);else if("down"==t){var n=b+1;n>=e&&(n=0),y.open(n)}else if("up"==t){var n=b-1;0>n&&(n=e-1),y.open(n)}}),m.addEventListener("click",function(t){var e=t.target.getAttribute("data-id"),n=o["default"].hero.data.skills.indexOf(e);e&&o["default"].skills.hasOwnProperty(e)&&-1!=n&&!function(){var t=o["default"].skills[e],r={};r["快捷栏"]="shortcut",r["遗忘"]="remove",t.data.next&&(r["升级"]="levelup"),(0,d["default"])(r).then(function(r){switch(r){case"shortcut":(0,d["default"])({1:0,2:1,3:2,4:3,5:4,6:5,7:6,8:7}).then(function(t){Number.isFinite(t)&&t>=0&&(o["default"].hero.data.bar[t]={id:e,type:"skill"},o["default"].windows["interface"].refresh())});break;case"levelup":if(t.data.next){var i=[];if(o["default"].hero.data.gold<t.data.next.gold&&i.push("金币不足，需要金币"+t.data.next.gold+"，当前您有金币"+o["default"].hero.data.gold),o["default"].hero.data.exp<t.data.next.exp&&i.push("经验不足，需要经验"+t.data.next.exp+"，当前您有经验"+o["default"].hero.data.exp),i.length)return void o["default"].dialogue(i);(0,s["default"])("确定要升级这个技能吗？共需要金币"+t.data.next.gold+"，经验"+t.data.next.exp).then(function(){var e=t.data.next.id;o["default"].hero.data.skills.splice(n,1),o["default"].hero.data.skills.push(e),o["default"].hero.data.gold-=t.data.next.gold,o["default"].hero.data.exp-=t.data.next.exp,o["default"].windows.loading.begin(),o["default"].Skill.load(e).then(function(t){o["default"].windows.loading.end(),y.open()})})["catch"](function(){})}break;case"remove":(0,s["default"])("真的要遗忘 "+t.data.name+" 技能吗？").then(function(){o["default"].hero.data.bar.forEach(function(t,n,r){t&&t.id==e&&(r[n]=null)}),o["default"].hero.data.skills.splice(n,1),o["default"].windows["interface"].refresh(),y.open()})["catch"](function(){})}})}()})},function(t,e,n){var r=n(304);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".skillWindow table{width:100%}.skillWindow tr:nth-child(odd){background-color:hsla(0,0%,75%,.6)}.skillWindow table img{width:100%;height:100%}.skillWindow button{width:60px;height:40px;font-size:16px}.skillWindow #skillWindowItemBar button{width:60px;height:40px;font-size:16px;margin:0 5px 5px}.skillWindow #skillWindowClose{float:right}",""])},function(t,e){t.exports='<div class=window-box><div id=skillWindowItemBar><button id=skillWindowClose class=brownButton>关闭</button></div><table border=0><thead><tr><th style="width: 40px"><th style="width: 120px"><th><th style="width: 60px"><tbody id=skillWindowTable></table></div>'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(199),o=(r(i),n(198)),a=r(o),u=n(223),l=r(u),s=n(307),c=r(s),d=n(309),f=r(d),h=l["default"].create("statusWindow"),p=h;e["default"]=p,h.css=c["default"],h.html=f["default"];var v={head:h.querySelector("#equipment-head"),body:h.querySelector("#equipment-body"),feet:h.querySelector("#equipment-feet"),weapon:h.querySelector("#equipment-weapon"),neck:h.querySelector("#equipment-neck"),ring:h.querySelector("#equipment-ring")},y={head:h.querySelector("#equipmentButton-head"),body:h.querySelector("#equipmentButton-body"),feet:h.querySelector("#equipmentButton-feet"),weapon:h.querySelector("#equipmentButton-weapon"),neck:h.querySelector("#equipmentButton-neck"),ring:h.querySelector("#equipmentButton-ring")},w=-1;Object.keys(y).forEach(function(t){var e=y[t];e.addEventListener("click",function(){a["default"].hero.data.equipment[t]?a["default"].hero.data.equipment[t]=null:"weapon"==t?a["default"].windows.inventory.open("sword|spear|bow"):a["default"].windows.inventory.open("head|body|feet"),h.update()})});var g=h.querySelector("#heroName"),m=h.querySelector("#heroHP"),b=h.querySelector("#heroSP"),x=h.querySelector("#heroLevel"),k=h.querySelector("#heroEXP"),A=h.querySelector("#heroSTR"),S=h.querySelector("#heroDEX"),E=h.querySelector("#heroCON"),W=h.querySelector("#heroINT"),O=h.querySelector("#heroCHA"),M=h.querySelector("#heroATK"),C=h.querySelector("#heroDEF"),_=h.querySelector("#heroMATK"),P=h.querySelector("#heroMDEF"),T=h.querySelector("button#statusWindowClose"),j=h.querySelector("button#statusWindowInventory"),L=h.querySelector("#statusWindowEquipmentTable");T.addEventListener("click",function(t){h.hide()}),j.addEventListener("click",function(t){h.hide(),a["default"].windows.inventory.open()}),h.whenUp(["tab"],function(){setTimeout(function(){h.hide(),a["default"].windows.inventory.open()},20)}),h.whenUp(["esc"],function(t){setTimeout(function(){h.hide()},20)}),h.assign("update",function(t){"undefined"==typeof t&&(t=-1),w=t,g.textContent="名字："+a["default"].hero.data.name,m.textContent="生命力："+a["default"].hero.data.hp+"/"+a["default"].hero.data.$hp,b.textContent="精神力："+a["default"].hero.data.sp+"/"+a["default"].hero.data.$sp,x.textContent="等级："+a["default"].hero.data.level,k.textContent="经验："+a["default"].hero.data.exp,A.textContent="力量："+a["default"].hero.data.str,S.textContent="敏捷："+a["default"].hero.data.dex,E.textContent="耐力："+a["default"].hero.data.con,W.textContent="智力："+a["default"].hero.data["int"],O.textContent="魅力："+a["default"].hero.data.cha,M.textContent="攻击："+a["default"].hero.data.atk,C.textContent="防御："+a["default"].hero.data.def,_.textContent="魔法攻击："+a["default"].hero.data.matk,P.textContent="魔法防御："+a["default"].hero.data.mdef;for(var e=L.querySelectorAll("tr"),n=0,r=e.length;r>n;n++)t==n?e[n].style.backgroundColor="green":e[n].style.backgroundColor="";Object.keys(a["default"].hero.data.equipment).forEach(function(t){var e=a["default"].hero.data.equipment[t],n=a["default"].items[e],r=y[t];if(e){var i="";i+='<img alt="" src="'+n.icon.src+'">',i+="<span>"+n.data.name+"</span>",v[t].innerHTML=i,r.textContent="卸下"}else v[t].innerHTML="",r.textContent="装备"})}),h.whenUp(["enter"],function(){var t=L.querySelectorAll("button");w>=0&&w<t.length&&t[w].click()}),h.whenUp(["up","down"],function(t){var e=L.querySelectorAll("button").length;if(-1==w)"down"==t?h.open(0):"up"==t&&h.open(e-1);else if("down"==t){var n=w+1;n>=e&&(n=0),h.open(n)}else if("up"==t){var n=w-1;0>n&&(n=e-1),h.open(n)}}),h.assign("open",function(t){h.update(t),h.show()})},function(t,e,n){var r=n(308);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".statusWindow label{display:block}.statusWindow table{width:100%;height:320px}.statusWindow #statusWindowEquipmentTable tr:nth-child(odd){background-color:hsla(0,0%,75%,.6)}.statusWindow #heroName{font-size:24px;margin-left:240px}.statusWindow #statusWindowTable{width:50%}.statusWindow #statusWindowTable label{font-size:18px;margin-left:80px}.statusWindow #statusWindowEquipmentTable button{width:60px;height:40px}.statusWindow .statusWindowEquipmentText{width:60px;font-size:20px;text-align:center}.statusWindow #statusWindowItemBar button{width:60px;height:40px;font-size:16px;margin:0 5px 5px;text-align:center}.statusWindow #statusWindowClose,.statusWindow #statusWindowInventory{float:right}",""])},function(t,e){t.exports='<div class=window-box><div id=statusWindowItemBar><button id=statusWindowClose class=brownButton>关闭</button> <button id=statusWindowInventory class=brownButton>物品</button><label id=heroName></label></div><table border=0><tr><td id=statusWindowTable><label id=heroHP></label><label id=heroSP></label><label id=heroLevel></label><label id=heroEXP></label><label id=heroSTR></label><label id=heroDEX></label><label id=heroCON></label><label id=heroINT></label><label id=heroCHA></label><label id=heroATK></label><label id=heroDEF></label><label id=heroMATK></label><label id=heroMDEF></label><td style="width: 50%"><table id=statusWindowEquipmentTable border=0><tbody><tr><td class=statusWindowEquipmentText>头部<td id=equipment-head><td style="width: 60px"><button id=equipmentButton-head class=brownButton>卸下</button><tr><td class=statusWindowEquipmentText>身体<td id=equipment-body><td><button id=equipmentButton-body class=brownButton>卸下</button><tr><td class=statusWindowEquipmentText>足部<td id=equipment-feet><td><button id=equipmentButton-feet class=brownButton>卸下</button><tr><td class=statusWindowEquipmentText>武器<td id=equipment-weapon><td><button id=equipmentButton-weapon class=brownButton>卸下</button><tr><td class=statusWindowEquipmentText>项链<td id=equipment-neck><td><button id=equipmentButton-neck class=brownButton>卸下</button><tr><td class=statusWindowEquipmentText>戒指<td id=equipment-ring><td><button id=equipmentButton-ring class=brownButton>卸下</button></table></table></div>'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(198),o=r(i),a=n(223),u=r(a),l=n(311),s=r(l),c=n(313),d=r(c),f=u["default"].create("sysmenuWindow"),h=f;e["default"]=h,f.css=s["default"],f.html=d["default"];var p=f.querySelector("button#sysmenuWindowInventory"),v=f.querySelector("button#sysmenuWindowStatus"),y=f.querySelector("button#sysmenuWindowSkill"),w=f.querySelector("button#sysmenuWindowQuest"),g=f.querySelector("button#sysmenuWindowMap"),m=f.querySelector("button#sysmenuWindowSetting"),b=f.querySelector("button#sysmenuWindowArchive"),x=f.querySelector("button#sysmenuWindowExit"),k=f.querySelector("button#sysmenuWindowClose");f.whenUp(["esc"],function(t){k.click()}),f.whenUp(["1","2","3","4","5","6","7","8"],function(t){switch(t){case"1":p.click();break;case"2":v.click();break;case"3":y.click();break;case"4":w.click();break;case"5":g.click();break;case"6":m.click();break;case"7":b.click();break;case"8":x.click()}}),p.addEventListener("click",function(t){f.hide(),o["default"].windows.inventory.open()}),v.addEventListener("click",function(t){f.hide(),o["default"].windows.status.open()}),y.addEventListener("click",function(t){f.hide(),o["default"].windows.skill.open()}),w.addEventListener("click",function(t){f.hide(),o["default"].windows.quest.current()}),g.addEventListener("click",function(t){f.hide(),o["default"].windows.map.show()}),m.addEventListener("click",function(t){f.hide(),o["default"].windows.setting.show()}),b.addEventListener("click",function(t){f.hide(),o["default"].windows.archive.open()}),x.addEventListener("click",function(t){o["default"].clearStage(),o["default"].windows["interface"].hide(),o["default"].windows.stage.hide(),f.hide(),o["default"].windows.main.show()}),k.addEventListener("click",function(t){f.hide()})},function(t,e,n){var r=n(312);"string"==typeof r&&(r=[[t.id,r,""]]);n(197)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(195)(),e.push([t.id,".sysmenuWindow{text-align:center}.sysmenuWindow table,.sysmenuWindow tbody,.sysmenuWindow td,.sysmenuWindow tr{width:100%;height:100%;margin:0;padding:0}.sysmenuWindow button{width:200px;height:60px;margin:2px;font-size:16px}.sysmenuWindow button#sysmenuWindowClose{position:absolute;right:50px;top:50px;width:120px;height:60px;font-size:16px}",""])},function(t,e){t.exports="<div class=window-box><button id=sysmenuWindowClose class=brownButton>关闭窗口</button><table><tbody><tr><td><button id=sysmenuWindowInventory class=brownButton>1、背包物品</button> <button id=sysmenuWindowStatus class=brownButton>2、状态装备</button><br><button id=sysmenuWindowSkill class=brownButton>3、查看技能</button> <button id=sysmenuWindowQuest class=brownButton>4、任务列表</button><br><button id=sysmenuWindowMap class=brownButton>5、迷你地图</button> <button id=sysmenuWindowSetting class=brownButton>6、游戏设置</button><br><button id=sysmenuWindowArchive class=brownButton>7、存档管理</button> <button id=sysmenuWindowExit class=brownButton>8、退出游戏</button><br></table></div>"}]);