<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <meta name="keywords" content="Fantasy RPG, RPG, Game, Elliorwis">
    <meta name="description" content="Fantasy RPG Game Elliorwis">
    <meta name="author" content="mail@qhduan.com">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">


    <link rel="icon" type="image/png" href="icon32.png" />

    <title>艾利韦斯</title>
    <meta name="application-name" content="Elliorwis">
    <link rel="stylesheet" href="game.css">
  </head>
  <body>

    <script>

      (function CheckSupport () {
        (function CheckCanvasSupport () {
          var c = document.createElement("canvas");
          if (c.getContext("2d")) {
            console.log("canvas 2d supported");
            var w = document.createElement("canvas");
            if (w.getContext("webgl") || w.getContext("experimental-webgl")) {
              console.log("webgl supported");
            } else {
              console.log("webgl not supported");
            }
          } else {
            alert("canvas 2d 不支持，无法运行！");
            throw new Error("canvas 2d not supported");
          }
        })();
        (function CheckLocalStorageSupport () {
          if (window.localStorage && window.localStorage.getItem && window.localStorage.setItem) {
            console.log("localStorage supported");
          } else {
            alert("localStorage 不支持，无法运行！");
            throw new Error("localStorage not supported");
          }
        })();
        (function () {
          if (window.ArrayBuffer) {
            console.log("ArrayBuffer supported");
          } else {
            alert("ArrayBuffer 不支持，无法运行！");
            throw new Error("ArrayBuffer not supported");
          }
        })();
        (function () {
          if (window.Blob) {
            console.log("Blob supported");
          } else {
            alert("Blob 不支持，无法运行！");
            throw new Error("Blob not supported");
          }
        })();
      })();

      function ImportJavascript (urls) {
        var all = "";
        urls.forEach(function (u) {
          all += "<script src='" + u + "'><\/script>\n";
        });
        document.write(all);
      }

      var development = [
        "js/polyfill.js",

        "js/Sprite/Sprite.js",
        "js/Sprite/Util.js",
        "js/Sprite/Canvas.js",
        "js/Sprite/Webgl.js",
        "js/Sprite/Event.js",
        "js/Sprite/Tween.js",
        "js/Sprite/Loader.js",
        "js/Sprite/Ticker.js",
        "js/Sprite/Display.js",
        "js/Sprite/Container.js",
        "js/Sprite/Stage.js",
        "js/Sprite/Text.js",
        "js/Sprite/Frame.js",
        "js/Sprite/Sheet.js",
        "js/Sprite/Input.js",
        "js/Sprite/Shape.js",
        "js/Sprite/Bitmap.js",

        "js/Game/Game.js",

        "js/Game/Window.js",

        "js/Game/Window/Archive.js",
        "js/Game/Window/Buy.js",
        "js/Game/Window/Choice.js",
        "js/Game/Window/Confirm.js",
        "js/Game/Window/Dialogue.js",
        "js/Game/Window/Interface.js",
        "js/Game/Window/Inventory.js",
        "js/Game/Window/Loading.js",
        "js/Game/Window/Main.js",
        "js/Game/Window/Map.js",
        "js/Game/Window/Over.js",
        "js/Game/Window/Pickup.js",
        "js/Game/Window/Quest.js",
        "js/Game/Window/Register.js",
        "js/Game/Window/Sell.js",
        "js/Game/Window/Setting.js",
        "js/Game/Window/Skill.js",
        "js/Game/Window/Status.js",
        "js/Game/Window/Sysmenu.js",

        "js/Game/Astar.js",
        "js/Game/AI.js",
        "js/Game/Collision.js",
        "js/Game/UI.js",
        "js/Game/Area.js",
        "js/Game/Map.js",
        "js/Game/Quest.js",
        "js/Game/Item.js",
        "js/Game/Skill.js",
        "js/Game/Actor.js",
        "js/Game/ActorAlly.js",
        "js/Game/ActorHero.js",
        "js/Game/ActorMonster.js",
        "js/Game/ActorNPC.js",
        "js/Game/ActorPet.js",
        "js/Game/DrawHero.js",
        "js/Game/Input.js",
        "js/Game/Register.js",
        "js/Game/Archive.js"
      ];

      var product = [
        "js/all.js"
      ];

      if (document.URL.match(/dev/i)) {
        ImportJavascript(development);
        document.title = "艾利韦斯开发";
      } else if (document.URL.match(/prod/i)) {
        ImportJavascript(product);
        document.title = "艾利韦斯";
      } else {
        if (document.URL.match(/localhost|127\.0\.0\.1/)) {
          ImportJavascript(development);
          document.title = "艾利韦斯开发";
        } else {
          ImportJavascript(product);
          document.title = "艾利韦斯";
        }
      }

    </script>

  </body>
</html>
